export interface InterviewQuestion {
  id: number
  question: string
  answer: string
  difficulty?: 'junior' | 'middle' | 'senior'
  tags?: string[]
}

export const webAPIInterviewQuestions: InterviewQuestion[] = [
  {
    id: 76,
    question: "–ß—Ç–æ —Ç–∞–∫–æ–µ MutationObserver –∏ –¥–ª—è —á–µ–≥–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?",
    answer: "<p><strong>MutationObserver</strong> ‚Äî —ç—Ç–æ Web API –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ DOM-–¥–µ—Ä–µ–≤–µ:</p><h4>–û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</h4><p>–ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º/—É–¥–∞–ª–µ–Ω–∏–µ–º —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è –º–µ—Ö–∞–Ω–∏–∑–º —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ DOM-–º—É—Ç–∞—Ü–∏–∏.</p><h4>–°–æ–∑–¥–∞–Ω–∏–µ –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—è:</h4><p><code>const observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;mutations.forEach(mutation => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('–¢–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è:', mutation.type);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('–¶–µ–ª–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç:', mutation.target);</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><p><code>observer.observe(targetElement, {</code><br><code>&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;attributes: true,</code><br><code>&nbsp;&nbsp;subtree: true</code><br><code>});</code></p><h4>–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:</h4><ul><li><strong>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:</strong> –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏</li><li><strong>–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è:</strong> –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ, –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏</li><li><strong>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:</strong> –†–∞–±–æ—Ç–∞ —Å–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏</li><li><strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</strong> –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–Ω—ä–µ–∫—Ü–∏–π —Å–∫—Ä–∏–ø—Ç–æ–≤</li><li><strong>–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞:</strong> –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏</li></ul><p><em>–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ:</em> –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç setInterval –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ DOM.</p>",
    difficulty: 'junior',
    tags: ['MutationObserver', '–æ—Å–Ω–æ–≤—ã', 'Web API', 'DOM']
  },

  {
    id: 77,
    question: "–ö–∞–∫–∏–µ —Ç–∏–ø—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å MutationObserver?",
    answer: "<p>MutationObserver –º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ DOM:</p><h4>1. childList - –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–æ—á–µ—Ä–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤:</h4><p><code>observer.observe(element, {</code><br><code>&nbsp;&nbsp;childList: true</code><br><code>});</code></p><p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ –¥–æ—á–µ—Ä–Ω–∏—Ö —É–∑–ª–æ–≤. –°–≤–æ–π—Å—Ç–≤–∞ MutationRecord: <code>addedNodes</code>, <code>removedNodes</code>, <code>previousSibling</code>, <code>nextSibling</code></p><h4>2. attributes - –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤:</h4><p><code>observer.observe(element, {</code><br><code>&nbsp;&nbsp;attributes: true,</code><br><code>&nbsp;&nbsp;attributeOldValue: true,</code><br><code>&nbsp;&nbsp;attributeFilter: ['class', 'style']</code><br><code>});</code></p><p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤ —ç–ª–µ–º–µ–Ω—Ç–∞. –°–≤–æ–π—Å—Ç–≤–∞: <code>attributeName</code>, <code>oldValue</code></p><h4>3. characterData - –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞:</h4><p><code>observer.observe(textNode, {</code><br><code>&nbsp;&nbsp;characterData: true,</code><br><code>&nbsp;&nbsp;characterDataOldValue: true</code><br><code>});</code></p><p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —É–∑–ª–æ–≤. –°–≤–æ–π—Å—Ç–≤–∞: <code>oldValue</code>, <code>target.data</code></p><h4>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏:</h4><ul><li><code>subtree: true</code> ‚Äî –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –≤—Å–µ–º –ø–æ–¥–¥–µ—Ä–µ–≤–æ–º</li><li><code>attributeOldValue: true</code> ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤</li><li><code>characterDataOldValue: true</code> ‚Äî —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ–∫—Å—Ç</li><li><code>attributeFilter: ['attr1', 'attr2']</code> ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã</li></ul><p><em>–í–∞–∂–Ω–æ:</em> –•–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø—Ü–∏–π (childList, attributes, characterData) –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞.</p>",
    difficulty: 'middle',
    tags: ['MutationObserver', '—Ç–∏–ø—ã –º—É—Ç–∞—Ü–∏–π', '–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è', 'API']
  },

  {
    id: 78,
    question: "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é MutationObserver?",
    answer: "<p>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏ –∫–∞–∫ –∏—Ö –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å:</p><h4>–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</h4><p><code>const config = {</code><br><code>&nbsp;&nbsp;childList: true // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –æ–ø—Ü–∏—è</code><br><code>};</code></p><h4>–ü–æ–ª–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</h4><p><code>const fullConfig = {</code><br><code>&nbsp;&nbsp;// –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø—Ü–∏–∏ (—Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞)</code><br><code>&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;attributes: true,</code><br><code>&nbsp;&nbsp;characterData: true,</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø—Ü–∏–∏</code><br><code>&nbsp;&nbsp;subtree: true,</code><br><code>&nbsp;&nbsp;attributeOldValue: true,</code><br><code>&nbsp;&nbsp;characterDataOldValue: true,</code><br><code>&nbsp;&nbsp;attributeFilter: ['class', 'id', 'data-state']</code><br><code>};</code></p><h4>–ü—Ä–∏–º–µ—Ä—ã –ø–æ–¥ –∑–∞–¥–∞—á–∏:</h4><p><strong>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤:</strong></p><p><code>{ attributes: true, attributeFilter: ['class'] }</code></p><p><strong>–ì–ª—É–±–æ–∫–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ:</strong></p><p><code>{ childList: true, subtree: true }</code></p><p><strong>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞:</strong></p><p><code>{ childList: true, characterData: true, subtree: true }</code></p><h4>–¢–∏–ø–∏—á–Ω—ã–µ –æ—à–∏–±–∫–∏:</h4><p><code>// ‚ùå –ù–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –æ–ø—Ü–∏–∏</code><br><code>{ subtree: true }</code></p><p><code>// ‚ùå attributeOldValue –±–µ–∑ attributes</code><br><code>{ childList: true, attributeOldValue: true }</code></p><p><code>// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ</code><br><code>{ attributes: true, attributeOldValue: true }</code></p><p><em>Best practice:</em> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –æ–ø—Ü–∏–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.</p>",
    difficulty: 'middle',
    tags: ['MutationObserver', '–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è', '–æ–ø—Ü–∏–∏', '–Ω–∞—Å—Ç—Ä–æ–π–∫–∞']
  },

  {
    id: 79,
    question: "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å MutationRecord –∏ –∫–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –Ω–µ–º –¥–æ—Å—Ç—É–ø–Ω–∞?",
    answer: "<p><strong>MutationRecord</strong> ‚Äî –æ–±—ä–µ–∫—Ç, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–π –æ–¥–Ω–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤ DOM, –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ callback:</p><h4>–û–±—â–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤:</h4><p><code>mutation.type</code> ‚Äî —Ç–∏–ø –∏–∑–º–µ–Ω–µ–Ω–∏—è ('childList', 'attributes', 'characterData')</p><p><code>mutation.target</code> ‚Äî —ç–ª–µ–º–µ–Ω—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –ø—Ä–æ–∏–∑–æ—à–ª–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ</p><h4>–î–ª—è childList –º—É—Ç–∞—Ü–∏–π:</h4><p><code>mutation.addedNodes</code> ‚Äî NodeList –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤</p><p><code>mutation.removedNodes</code> ‚Äî NodeList —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤</p><p><code>mutation.previousSibling</code> ‚Äî –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–æ—Å–µ–¥</p><p><code>mutation.nextSibling</code> ‚Äî —Å–ª–µ–¥—É—é—â–∏–π —Å–æ—Å–µ–¥</p><h4>–î–ª—è attributes –º—É—Ç–∞—Ü–∏–π:</h4><p><code>mutation.attributeName</code> ‚Äî –∏–º—è –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞</p><p><code>mutation.oldValue</code> ‚Äî –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–µ—Å–ª–∏ attributeOldValue: true)</p><h4>–î–ª—è characterData –º—É—Ç–∞—Ü–∏–π:</h4><p><code>mutation.oldValue</code> ‚Äî –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ–∫—Å—Ç (–µ—Å–ª–∏ characterDataOldValue: true)</p><p><code>mutation.target.data</code> ‚Äî –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç</p><h4>–ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏:</h4><p><code>const observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;mutations.forEach(mutation => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;switch (mutation.type) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 'childList':</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('–î–æ–±–∞–≤–ª–µ–Ω–æ:', mutation.addedNodes.length);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('–£–¥–∞–ª–µ–Ω–æ:', mutation.removedNodes.length);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 'attributes':</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const newValue = mutation.target.getAttribute(mutation.attributeName);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(\`\${mutation.attributeName}: \${mutation.oldValue} ‚Üí \${newValue}\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case 'characterData':</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(\`–¢–µ–∫—Å—Ç: \${mutation.oldValue} ‚Üí \${mutation.target.data}\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><p><em>–í–∞–∂–Ω–æ:</em> –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ nodeType –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö/—É–¥–∞–ª–µ–Ω–Ω—ã—Ö —É–∑–ª–æ–≤ ‚Äî –º–æ–≥—É—Ç –±—ã—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —É–∑–ª—ã –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏.</p>",
    difficulty: 'middle',
    tags: ['MutationObserver', 'MutationRecord', '—Å–≤–æ–π—Å—Ç–≤–∞', '–æ–±—Ä–∞–±–æ—Ç–∫–∞']
  },

  {
    id: 80,
    question: "–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É disconnect(), takeRecords() –∏ unobserve()?",
    answer: "<p>MutationObserver –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç—Ä–∏ –º–µ—Ç–æ–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ–º:</p><h4>1. disconnect() - –ø–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞:</h4><p><code>observer.disconnect();</code></p><p><strong>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:</strong></p><ul><li>–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Å–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ</li><li>–û—á–∏—â–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –º—É—Ç–∞—Ü–∏–π</li><li>–û—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã</li></ul><p><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong> –ü—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ observer –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω</p><h4>2. takeRecords() - —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ:</h4><p><code>const pendingMutations = observer.takeRecords();</code></p><p><strong>–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:</strong></p><ul><li>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –º—É—Ç–∞—Ü–∏–π</li><li>–û—á–∏—â–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å –º—É—Ç–∞—Ü–∏–π</li><li>–ù–ï –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ</li><li>–ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç callback</li></ul><p><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong> –î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–µ–¥ disconnect, –¥–ª—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è callback</p><p><code>// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</code><br><code>window.addEventListener('beforeunload', () => {</code><br><code>&nbsp;&nbsp;const mutations = observer.takeRecords();</code><br><code>&nbsp;&nbsp;if (mutations.length > 0) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –°–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–∫—Ä—ã—Ç–∏–µ–º</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;processMutations(mutations);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;observer.disconnect();</code><br><code>});</code></p><h4>3. unobserve() - –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!</h4><p><strong>–í–∞–∂–Ω–æ:</strong> –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç IntersectionObserver –∏ ResizeObserver, —É MutationObserver –ù–ï–¢ –º–µ—Ç–æ–¥–∞ unobserve(). –ú–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ disconnect() –∏ –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π observer —Å –Ω—É–∂–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π.</p><h4>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:</h4><table><tr><th>–ú–µ—Ç–æ–¥</th><th>–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç</th><th>–û—á–∏—â–∞–µ—Ç –æ—á–µ—Ä–µ–¥—å</th><th>–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º—É—Ç–∞—Ü–∏–∏</th></tr><tr><td>disconnect()</td><td>‚úÖ</td><td>‚úÖ</td><td>‚ùå</td></tr><tr><td>takeRecords()</td><td>‚ùå</td><td>‚úÖ</td><td>‚úÖ</td></tr></table><p><em>Best practice:</em> –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ disconnect() –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.</p>",
    difficulty: 'middle',
    tags: ['MutationObserver', '–º–µ—Ç–æ–¥—ã', '—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ', 'lifecycle']
  },

  {
    id: 81,
    question: "–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –ø–æ–º–æ—â—å—é MutationObserver?",
    answer: "<p>–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ MutationObserver:</p><h4>–ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å debounce:</h4><p><code>class AutoSave {</code><br><code>&nbsp;&nbsp;constructor(element, saveCallback, delay = 2000) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.element = element;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.saveCallback = saveCallback;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.delay = delay;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.saveTimeout = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.hasUnsavedChanges = false;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.setupObserver();</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;setupObserver() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new MutationObserver(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.hasUnsavedChanges = true;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.scheduleSave();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe(this.element, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;characterData: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subtree: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributes: true</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;scheduleSave() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(this.saveTimeout);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.saveTimeout = setTimeout(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.save();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}, this.delay);</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;async save() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!this.hasUnsavedChanges) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const content = this.element.innerHTML;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await this.saveCallback(content);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.hasUnsavedChanges = false;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.showSaveStatus('–°–æ—Ö—Ä–∞–Ω–µ–Ω–æ');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.showSaveStatus('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'error');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;showSaveStatus(message, type = 'success') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;destroy() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(this.saveTimeout);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.disconnect();</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const editor = document.querySelector('#editor');</code><br><code>const autoSave = new AutoSave(editor, async (content) => {</code><br><code>&nbsp;&nbsp;// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage</code><br><code>&nbsp;&nbsp;localStorage.setItem('draft', content);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –ò–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä</code><br><code>&nbsp;&nbsp;await fetch('/api/save', {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;method: 'POST',</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;body: JSON.stringify({ content }),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;headers: { 'Content-Type': 'application/json' }</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><h4>–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–º:</h4><p><code>class AdvancedAutoSave extends AutoSave {</code><br><code>&nbsp;&nbsp;constructor(element, saveCallback, delay) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;super(element, saveCallback, delay);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.createStatusIndicator();</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;createStatusIndicator() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.indicator = document.createElement('div');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.indicator.className = 'save-status';</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.element.parentElement.appendChild(this.indicator);</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;scheduleSave() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;super.scheduleSave();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.indicator.textContent = '–ù–µ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è...';</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.indicator.className = 'save-status pending';</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;showSaveStatus(message, type) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.indicator.textContent = message;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.indicator.className = \`save-status \${type}\`;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.indicator.textContent = '';</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}, 2000);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><em>–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:</em> Debounce –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —á–∞—Å—Ç—ã—Ö —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π, –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –¥–ª—è UX, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, cleanup –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏.</p>",
    difficulty: 'middle',
    tags: ['MutationObserver', '–∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ', '–ø—Ä–∞–∫—Ç–∏–∫–∞', 'UX']
  },

  {
    id: 82,
    question: "–ö–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ DOM –¥–ª—è lazy loading?",
    answer: "<p>MutationObserver –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤:</p><h4>–†–µ–∞–ª–∏–∑–∞—Ü–∏—è lazy loader:</h4><p><code>class LazyLoadObserver {</code><br><code>&nbsp;&nbsp;constructor(selector, loadCallback) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.selector = selector;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.loadCallback = loadCallback;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.loadedElements = new WeakSet();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.setupObserver();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.checkExistingElements();</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;setupObserver() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutations.forEach(mutation => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutation.addedNodes.forEach(node => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∞–º —É–∑–µ–ª</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (node.nodeType === Node.ELEMENT_NODE) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.checkElement(node);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ—Ç–æ–º–∫–æ–≤</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const elements = node.querySelectorAll(this.selector);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elements.forEach(el => this.checkElement(el));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe(document.body, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subtree: true</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;checkExistingElements() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;document.querySelectorAll(this.selector).forEach(el => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.checkElement(el);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;checkElement(element) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (element.matches && </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element.matches(this.selector) && </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!this.loadedElements.has(element)) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.loadedElements.add(element);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.loadCallback(element);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;disconnect() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.disconnect();</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:</h4><p><code>// HTML: &lt;img data-src=\"image.jpg\" class=\"lazy\"&gt;</code></p><p><code>const lazyImages = new LazyLoadObserver('img[data-src]', (img) => {</code><br><code>&nbsp;&nbsp;img.src = img.dataset.src;</code><br><code>&nbsp;&nbsp;img.classList.add('loaded');</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;img.onload = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;img.classList.add('fade-in');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('–ó–∞–≥—Ä—É–∂–µ–Ω–æ:', img.dataset.src);</code><br><code>&nbsp;&nbsp;};</code><br><code>});</code></p><h4>–î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:</h4><p><code>const componentLoader = new LazyLoadObserver('[data-component]', (element) => {</code><br><code>&nbsp;&nbsp;const componentName = element.dataset.component;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª—è</code><br><code>&nbsp;&nbsp;import(\`./components/\${componentName}.js\`)</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;.then(module => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;module.init(element);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;})</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;.catch(err => console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', err));</code><br><code>});</code></p><h4>–° –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏ –∑–∞–≥—Ä—É–∑–∫–∏:</h4><p><code>class PriorityLazyLoader extends LazyLoadObserver {</code><br><code>&nbsp;&nbsp;checkElement(element) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.loadedElements.has(element)) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const priority = element.dataset.priority || 'normal';</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (priority === 'high') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.loadCallback(element);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.loadedElements.add(element);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} else {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requestIdleCallback(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.loadCallback(element);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.loadedElements.add(element);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><em>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:</em> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã, –¥–æ–±–∞–≤–ª—è–µ–º—ã–µ –≤ DOM –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç, –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —è–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤.</p>",
    difficulty: 'middle',
    tags: ['MutationObserver', 'lazy loading', '–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å']
  },

  {
    id: 83,
    question: "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MutationObserver –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç–µ–º—ã (—Å–≤–µ—Ç–ª–∞—è/—Ç–µ–º–Ω–∞—è)?",
    answer: "<p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç–µ–º—ã –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:</p><h4>–ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:</h4><p><code>class ThemeObserver {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.callbacks = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.currentTheme = this.detectTheme();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.setupObserver();</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;detectTheme() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return document.body.classList.contains('dark-theme') </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? 'dark' </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 'light';</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;setupObserver() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutations.forEach(mutation => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (mutation.type === 'attributes' && </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutation.attributeName === 'class') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const newTheme = this.detectTheme();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (newTheme !== this.currentTheme) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.currentTheme = newTheme;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.notifyThemeChange(newTheme);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe(document.body, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributes: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributeFilter: ['class']</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;onThemeChange(callback) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.callbacks.push(callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –í—ã–∑—ã–≤–∞–µ–º —Å—Ä–∞–∑—É —Å —Ç–µ–∫—É—â–µ–π —Ç–µ–º–æ–π</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;callback(this.currentTheme);</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;offThemeChange(callback) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const index = this.callbacks.indexOf(callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (index > -1) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.callbacks.splice(index, 1);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;notifyThemeChange(theme) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('–¢–µ–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∞ –Ω–∞:', theme);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.callbacks.forEach(callback => callback(theme));</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;disconnect() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.disconnect();</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const themeObserver = new ThemeObserver();</code></p><p><code>// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤</code><br><code>themeObserver.onThemeChange((theme) => {</code><br><code>&nbsp;&nbsp;chart.updateOptions({</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;theme: { mode: theme }</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><p><code>// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã</code><br><code>themeObserver.onThemeChange((theme) => {</code><br><code>&nbsp;&nbsp;map.setStyle(theme === 'dark' ? 'dark-style' : 'light-style');</code><br><code>});</code></p><p><code>// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage</code><br><code>themeObserver.onThemeChange((theme) => {</code><br><code>&nbsp;&nbsp;localStorage.setItem('preferred-theme', theme);</code><br><code>});</code></p><h4>–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å data-–∞—Ç—Ä–∏–±—É—Ç–æ–º:</h4><p><code>class AdvancedThemeObserver extends ThemeObserver {</code><br><code>&nbsp;&nbsp;detectTheme() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const dataTheme = document.body.dataset.theme;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (dataTheme) return dataTheme;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// Fallback –Ω–∞ –∫–ª–∞—Å—Å</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return super.detectTheme();</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;setupObserver() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutations.forEach(mutation => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (mutation.type === 'attributes') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const newTheme = this.detectTheme();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (newTheme !== this.currentTheme) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.currentTheme = newTheme;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.notifyThemeChange(newTheme);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe(document.body, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributes: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributeFilter: ['class', 'data-theme']</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –≥—Ä–∞—Ñ–∏–∫–æ–≤, –∫–∞—Ä—Ç, –≤–∏–¥–µ–æ-–ø–ª–µ–µ—Ä–æ–≤ —Å —Ç–µ–∫—É—â–µ–π —Ç–µ–º–æ–π –±–µ–∑ prop drilling.</p>",
    difficulty: 'middle',
    tags: ['MutationObserver', '—Ç–µ–º—ã', 'UI —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è', '–ø—Ä–∞–∫—Ç–∏–∫–∞']
  },

  {
    id: 84,
    question: "–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å MutationObserver –ø—Ä–∏ —á–∞—Å—Ç—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö?",
    answer: "<p>MutationObserver callback –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –æ—á–µ–Ω—å —á–∞—Å—Ç–æ, —Ç—Ä–µ–±—É—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:</p><h4>1. Debounce –¥–ª—è —Ç—è–∂–µ–ª—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:</h4><p><code>class DebouncedObserver {</code><br><code>&nbsp;&nbsp;constructor(target, config, callback, delay = 250) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.callback = callback;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.delay = delay;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.timeout = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.pendingMutations = [];</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pendingMutations.push(...mutations);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(this.timeout);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.timeout = setTimeout(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.callback(this.pendingMutations);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pendingMutations = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, this.delay);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe(target, config);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>2. Throttle –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã:</h4><p><code>class ThrottledObserver {</code><br><code>&nbsp;&nbsp;constructor(target, config, callback, interval = 1000) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.callback = callback;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.interval = interval;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.lastCall = 0;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.pendingMutations = [];</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pendingMutations.push(...mutations);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const now = Date.now();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const timeSinceLastCall = now - this.lastCall;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (timeSinceLastCall >= this.interval) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.callback(this.pendingMutations);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pendingMutations = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.lastCall = now;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe(target, config);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>3. requestAnimationFrame –¥–ª—è DOM –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:</h4><p><code>let rafId = null;</code></p><p><code>const observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;if (rafId) cancelAnimationFrame(rafId);</code></p><p><code>&nbsp;&nbsp;rafId = requestAnimationFrame(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û–±–Ω–æ–≤–ª–µ–Ω–∏—è DOM —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –±—Ä–∞—É–∑–µ—Ä–æ–º</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;mutations.forEach(mutation => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;updateUI(mutation);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;rafId = null;</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><h4>4. Batch DOM –æ–ø–µ—Ä–∞—Ü–∏–π:</h4><p><code>// ‚ùå –ü–õ–û–•–û - observer —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ appendChild</code><br><code>items.forEach(item => {</code><br><code>&nbsp;&nbsp;const div = document.createElement('div');</code><br><code>&nbsp;&nbsp;div.textContent = item;</code><br><code>&nbsp;&nbsp;container.appendChild(div);</code><br><code>});</code></p><p><code>// ‚úÖ –•–û–†–û–®–û - observer —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –û–î–ò–ù —Ä–∞–∑</code><br><code>const fragment = document.createDocumentFragment();</code><br><code>items.forEach(item => {</code><br><code>&nbsp;&nbsp;const div = document.createElement('div');</code><br><code>&nbsp;&nbsp;div.textContent = item;</code><br><code>&nbsp;&nbsp;fragment.appendChild(div);</code><br><code>});</code><br><code>container.appendChild(fragment);</code></p><h4>5. –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:</h4><p><code>class SmartObserver {</code><br><code>&nbsp;&nbsp;constructor(target, config, callback) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.target = target;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.config = config;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.callback = callback;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.setupVisibilityListener();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.start();</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;setupVisibilityListener() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;document.addEventListener('visibilitychange', () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (document.hidden) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.stop();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.start();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;start() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.observer) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new MutationObserver(this.callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe(this.target, this.config);</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;stop() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!this.observer) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.disconnect();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = null;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>6. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:</h4><p><code>// ‚ùå –°–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è</code><br><code>{ childList: true, attributes: true, subtree: true }</code></p><p><code>// ‚úÖ –¢–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ</code><br><code>{ attributes: true, attributeFilter: ['class'] }</code></p><p><em>–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:</em> Callback –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –±—ã—Å—Ç—Ä–æ. –¢—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî –≤ Web Workers –∏–ª–∏ —á–µ—Ä–µ–∑ debounce/throttle.</p>",
    difficulty: 'senior',
    tags: ['MutationObserver', '–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', 'debounce']
  },

  {
    id: 85,
    question: "–ö–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏?",
    answer: "<p>MutationObserver –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏–Ω—ä–µ–∫—Ü–∏–π –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤:</p><h4>–î–µ—Ç–µ–∫—Ç–æ—Ä –∏–Ω—ä–µ–∫—Ü–∏–π —Å–∫—Ä–∏–ø—Ç–æ–≤:</h4><p><code>class ScriptInjectionDetector {</code><br><code>&nbsp;&nbsp;constructor(allowedScripts = []) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.allowedScripts = new Set(allowedScripts);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.setupObserver();</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;setupObserver() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutations.forEach(mutation => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutation.addedNodes.forEach(node => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (node.tagName === 'SCRIPT') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.checkScript(node);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ –≤—Å–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–æ–º</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe(document.documentElement, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subtree: true</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;checkScript(scriptElement) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const src = scriptElement.src;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const inlineCode = scriptElement.textContent;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (src && !this.isAllowed(src)) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('üö® –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:', src);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptElement.remove();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reportToServer({ type: 'external', src });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ inline —Å–∫—Ä–∏–ø—Ç–∞</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (inlineCode && !this.isAllowedInline(inlineCode)) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('üö® –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π inline —Å–∫—Ä–∏–ø—Ç:', inlineCode);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scriptElement.remove();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reportToServer({ type: 'inline', code: inlineCode });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;isAllowed(src) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ whitelist</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.allowedScripts.has(src)) return true;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –¥–æ–º–µ–Ω—É</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const url = new URL(src);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const allowedDomains = ['cdn.example.com', 'analytics.google.com'];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return allowedDomains.some(domain => url.hostname === domain);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;isAllowedInline(code) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const suspiciousPatterns = [</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/eval\\(/,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/Function\\(/,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/document\\.write\\(/,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/innerHTML\\s*=/,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/crypto/i</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;];</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;return !suspiciousPatterns.some(pattern => pattern.test(code));</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;reportToServer(incident) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;fetch('/api/security/report', {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method: 'POST',</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;headers: { 'Content-Type': 'application/json' },</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body: JSON.stringify({</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...incident,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timestamp: Date.now(),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url: window.location.href,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userAgent: navigator.userAgent</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}).catch(console.error);</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;disconnect() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.disconnect();</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const detector = new ScriptInjectionDetector([</code><br><code>&nbsp;&nbsp;'https://cdn.example.com/app.js',</code><br><code>&nbsp;&nbsp;'https://www.google-analytics.com/analytics.js'</code><br><code>]);</code></p><h4>–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è —Å CSP –ø—Ä–æ–≤–µ—Ä–∫–æ–π:</h4><p><code>class AdvancedSecurityObserver extends ScriptInjectionDetector {</code><br><code>&nbsp;&nbsp;constructor(allowedScripts) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;super(allowedScripts);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.checkCSP();</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;checkCSP() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const csp = document.querySelector('meta[http-equiv=\"Content-Security-Policy\"]');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!csp) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.warn('‚ö†Ô∏è CSP –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;setupObserver() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;super.setupObserver();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –¢–∞–∫–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º iframe</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const iframeObserver = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutations.forEach(mutation => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutation.addedNodes.forEach(node => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (node.tagName === 'IFRAME') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.checkIframe(node);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;iframeObserver.observe(document.body, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subtree: true</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;checkIframe(iframe) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const src = iframe.src;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (src && !this.isAllowed(src)) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('üö® –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π iframe:', src);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iframe.remove();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reportToServer({ type: 'iframe', src });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –ó–∞—â–∏—Ç–∞ –æ—Ç XSS, –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π –±—Ä–∞—É–∑–µ—Ä–∞, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</p>",
    difficulty: 'senior',
    tags: ['MutationObserver', '–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å', 'XSS', '–∑–∞—â–∏—Ç–∞']
  },

  {
    id: 86,
    question: "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MutationObserver –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞?",
    answer: "<p>MutationObserver –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é DOM:</p><h4>–ú–æ–Ω–∏—Ç–æ—Ä –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</h4><p><code>class PerformanceMonitor {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.mutationCount = 0;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.mutationRate = 0;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.mutationsByType = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childList: 0,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributes: 0,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;characterData: 0</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.slowMutations = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.setupObserver();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.startReporting();</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;setupObserver() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const startTime = performance.now();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.mutationCount += mutations.length;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutations.forEach(mutation => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.mutationsByType[mutation.type]++;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const endTime = performance.now();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const duration = endTime - startTime;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç–æ–∫</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (duration > 16) { // > 1 —Ñ—Ä–µ–π–º–∞ –ø—Ä–∏ 60fps</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.slowMutations.push({</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count: mutations.length,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timestamp: Date.now()</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.warn(\`‚ö†Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º—É—Ç–∞—Ü–∏–π: \${duration.toFixed(2)}ms\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –≤—ã—Å–æ–∫–æ–π —á–∞—Å—Ç–æ—Ç–µ</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (this.mutationCount > 100) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.warn('‚ö†Ô∏è –í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ DOM –º—É—Ç–∞—Ü–∏–π:', this.mutationCount);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.logMutationsSummary(mutations);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe(document.body, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributes: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;characterData: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subtree: true</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;startReporting() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç—á–µ—Ç –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;setInterval(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.mutationRate = this.mutationCount;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.mutationCount = 0;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (this.mutationRate > 50) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(\`–ú—É—Ç–∞—Ü–∏–π/—Å–µ–∫: \${this.mutationRate}\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.table(this.mutationsByType);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}, 1000);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;// –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;setInterval(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.generateReport();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}, 10000);</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;logMutationsSummary(mutations) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const summary = mutations.reduce((acc, m) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const key = \`\${m.type}:\${m.target.tagName || m.target.nodeName}\`;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;acc[key] = (acc[key] || 0) + 1;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return acc;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}, {});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;console.table(summary);</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;generateReport() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const report = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;totalMutations: Object.values(this.mutationsByType).reduce((a, b) => a + b, 0),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mutationsByType: { ...this.mutationsByType },</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slowMutationsCount: this.slowMutations.length,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;averageSlowDuration: this.slowMutations.length > 0</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? this.slowMutations.reduce((sum, m) => sum + m.duration, 0) / this.slowMutations.length</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 0</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('üìä –û—Ç—á–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.table(report);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.sendToAnalytics(report);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;// –°–±—Ä–æ—Å –¥–∞–Ω–Ω—ã—Ö</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.slowMutations = [];</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;sendToAnalytics(report) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if ('sendBeacon' in navigator) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;navigator.sendBeacon('/api/metrics', JSON.stringify(report));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;disconnect() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.disconnect();</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const perfMonitor = new PerformanceMonitor();</code></p><p><code>// –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ - —É—Å–ª–æ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è</code><br><code>if (window.location.search.includes('debug=perf')) {</code><br><code>&nbsp;&nbsp;new PerformanceMonitor();</code><br><code>}</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production, A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.</p>",
    difficulty: 'senior',
    tags: ['MutationObserver', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', '–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥', '–º–µ—Ç—Ä–∏–∫–∏']
  },

  {
    id: 87,
    question: "–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É MutationObserver –∏ –¥—Ä—É–≥–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è DOM?",
    answer: "<p>–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π DOM, –∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–∏–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏:</p><h4>MutationObserver:</h4><p><strong>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</strong></p><ul><li>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π ‚Äî –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç main thread</li><li>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π ‚Äî batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º—É—Ç–∞—Ü–∏–π</li><li>–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏</li><li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–∏–π (childList, attributes, characterData)</li><li>–ú–æ–∂–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –≤—Å–µ–º –ø–æ–¥–¥–µ—Ä–µ–≤–æ–º (subtree)</li></ul><p><strong>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:</strong></p><ul><li>–ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π API</li><li>–¢—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏</li><li>–ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ IE10 –∏ –Ω–∏–∂–µ</li></ul><h4>DOM Events (DOMSubtreeModified –∏ –¥—Ä.):</h4><p><code>element.addEventListener('DOMSubtreeModified', handler);</code></p><p><strong>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:</strong></p><ul><li>‚ùå Deprecated (—É—Å—Ç–∞—Ä–µ–ª)</li><li>–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π ‚Äî –±–ª–æ–∫–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ</li><li>–û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</li><li>–í—ã–∑—ã–≤–∞–µ—Ç—Å—è –¥–ª—è –ö–ê–ñ–î–û–ì–û –∏–∑–º–µ–Ω–µ–Ω–∏—è</li><li>–ù–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é</li></ul><h4>setInterval –ø—Ä–æ–≤–µ—Ä–∫–∞:</h4><p><code>setInterval(() => {</code><br><code>&nbsp;&nbsp;const currentState = element.innerHTML;</code><br><code>&nbsp;&nbsp;if (currentState !== lastState) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ</code><br><code>&nbsp;&nbsp;}</code><br><code>}, 100);</code></p><p><strong>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:</strong></p><ul><li>–û—á–µ–Ω—å –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ</li><li>–ú–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –±—ã—Å—Ç—Ä—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</li><li>–ü–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π</li><li>–ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–∏–ø–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</li></ul><h4>Custom Events:</h4><p><code>element.dispatchEvent(new CustomEvent('contentChanged'));</code></p><p><strong>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</strong></p><ul><li>–ü—Ä–æ—Å—Ç–æ–π –∏ —è–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å</li><li>–ú–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ</li></ul><p><strong>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:</strong></p><ul><li>–¢—Ä–µ–±—É–µ—Ç —è–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –≤ –∫–æ–¥–µ</li><li>–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑–≤–Ω–µ</li><li>–ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫</li></ul><h4>Proxy –¥–ª—è –¥–∞–Ω–Ω—ã—Ö:</h4><p><code>const proxy = new Proxy(data, {</code><br><code>&nbsp;&nbsp;set(target, property, value) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;target[property] = value;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;updateDOM();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return true;</code><br><code>&nbsp;&nbsp;}</code><br><code>});</code></p><p><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</strong> –†–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö (Vue, MobX), –Ω–æ –ù–ï –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è DOM</p><h4>–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞:</h4><table><tr><th>–ú–µ—Ç–æ–¥</th><th>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</th><th>–î–µ—Ç–∞–ª—å–Ω–æ—Å—Ç—å</th><th>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å</th><th>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</th></tr><tr><td>MutationObserver</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚úÖ</td><td>‚úÖ –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è</td></tr><tr><td>DOM Events</td><td>‚≠ê</td><td>‚≠ê‚≠ê</td><td>‚ùå</td><td>‚ùå Deprecated</td></tr><tr><td>setInterval</td><td>‚≠ê</td><td>‚≠ê</td><td>‚ùå</td><td>‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</td></tr><tr><td>Custom Events</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚≠ê‚≠ê‚≠ê</td><td>‚úÖ</td><td>‚úÖ –î–ª—è —Å–≤–æ–µ–≥–æ –∫–æ–¥–∞</td></tr></table><p><em>–í—ã–≤–æ–¥:</em> MutationObserver ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è DOM. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ DOMSubtreeModified –∏–ª–∏ setInterval.</p>",
    difficulty: 'middle',
    tags: ['MutationObserver', '—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ', '–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å']
  },

  {
    id: 88,
    question: "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç MutationObserver —Å Shadow DOM?",
    answer: "<p>MutationObserver –∏ Shadow DOM –∏–º–µ—é—Ç —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ:</p><h4>–û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:</h4><p>MutationObserver –Ω–∞–±–ª—é–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ —Ç–µ–º –¥–µ—Ä–µ–≤–æ–º, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–∑–≤–∞–Ω <code>observe()</code>. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ Shadow DOM –Ω–µ–≤–∏–¥–∏–º—ã –¥–ª—è observer'–∞, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–≥–æ –∫ light DOM.</p><h4>–ù–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ light DOM:</h4><p><code>// –≠—Ç–æ—Ç observer –ù–ï —É–≤–∏–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ shadowRoot</code><br><code>const observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;console.log('Light DOM –∏–∑–º–µ–Ω–µ–Ω');</code><br><code>});</code></p><p><code>observer.observe(document.body, {</code><br><code>&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;subtree: true</code><br><code>});</code></p><h4>–ù–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ Shadow DOM:</h4><p><code>class MyElement extends HTMLElement {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;super();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.attachShadow({ mode: 'open' });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// Observer –¥–ª—è Shadow DOM</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.shadowObserver = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('Shadow DOM –∏–∑–º–µ–Ω–µ–Ω');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ shadowRoot</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.shadowObserver.observe(this.shadowRoot, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subtree: true</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;disconnectedCallback() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.shadowObserver.disconnect();</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π wrapper –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:</h4><p><code>class ShadowDOMObserver {</code><br><code>&nbsp;&nbsp;constructor(hostElement, callback) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.hostElement = hostElement;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.callback = callback;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observers = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.setupObservers();</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;setupObservers() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// Observer –¥–ª—è host —ç–ª–µ–º–µ–Ω—Ç–∞ (light DOM)</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const lightObserver = new MutationObserver(this.callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;lightObserver.observe(this.hostElement, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributes: true</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observers.push(lightObserver);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;// Observer –¥–ª—è shadow DOM –µ—Å–ª–∏ –µ—Å—Ç—å</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.hostElement.shadowRoot) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const shadowObserver = new MutationObserver(this.callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shadowObserver.observe(this.hostElement.shadowRoot, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributes: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subtree: true</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.observers.push(shadowObserver);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;disconnect() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observers.forEach(obs => obs.disconnect());</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observers = [];</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const myComponent = document.querySelector('my-component');</code><br><code>const observer = new ShadowDOMObserver(myComponent, (mutations) => {</code><br><code>&nbsp;&nbsp;console.log('–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:', mutations);</code><br><code>});</code></p><h4>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</h4><ul><li><strong>mode: 'closed':</strong> –ï—Å–ª–∏ shadowRoot –∑–∞–∫—Ä—ã—Ç, –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∏–∑–≤–Ω–µ</li><li><strong>Slotted content:</strong> Slotted —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ light DOM, –≤–∏–¥–Ω—ã light observer'—É</li><li><strong>–°–æ–±—ã—Ç–∏—è:</strong> –°–æ–±—ã—Ç–∏—è –∏–∑ Shadow DOM –≤—Å–ø–ª—ã–≤–∞—é—Ç –≤ light DOM —Å retargeting</li></ul><h4>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:</h4><p><code>// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–æ–≤—ã–º shadow DOM</code><br><code>const globalObserver = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;mutations.forEach(mutation => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;mutation.addedNodes.forEach(node => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (node.shadowRoot) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ü–æ–¥–∫–ª—é—á–∞–µ–º observer –∫ –Ω–æ–≤–æ–º—É shadowRoot</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;observeShadowRoot(node.shadowRoot);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><p><code>globalObserver.observe(document.body, {</code><br><code>&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;subtree: true</code><br><code>});</code></p><p><em>–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:</em> –î–ª—è –∫–∞–∂–¥–æ–≥–æ Shadow DOM –Ω—É–∂–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π MutationObserver, –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–π –∫ shadowRoot.</p>",
    difficulty: 'senior',
    tags: ['MutationObserver', 'Shadow DOM', 'Web Components', '–∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è']
  },

  {
    id: 89,
    question: "–ö–∞–∫–∏–µ –µ—Å—Ç—å best practices –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å MutationObserver?",
    answer: "<p>–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å MutationObserver –≤–∞–∂–Ω–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –∏ –∏–∑–±–µ–≥–∞—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫:</p><h4>‚úÖ Best Practices:</h4><p><strong>1. –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ disconnect():</strong></p><p><code>// React</code><br><code>useEffect(() => {</code><br><code>&nbsp;&nbsp;const observer = new MutationObserver(callback);</code><br><code>&nbsp;&nbsp;observer.observe(element, config);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return () => observer.disconnect(); // Cleanup!</code><br><code>}, []);</code></p><p><strong>2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ attributeFilter:</strong></p><p><code>// ‚ùå –ü–ª–æ—Ö–æ - –Ω–∞–±–ª—é–¥–∞–µ—Ç –∑–∞ –≤—Å–µ–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏</code><br><code>{ attributes: true }</code></p><p><code>// ‚úÖ –•–æ—Ä–æ—à–æ - —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã</code><br><code>{ attributes: true, attributeFilter: ['class', 'data-state'] }</code></p><p><strong>3. Batch DOM –æ–ø–µ—Ä–∞—Ü–∏–∏:</strong></p><p><code>// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ DocumentFragment</code><br><code>const fragment = document.createDocumentFragment();</code><br><code>items.forEach(item => fragment.appendChild(createItem(item)));</code><br><code>container.appendChild(fragment); // –û–¥–∏–Ω observer callback</code></p><p><strong>4. Debounce/throttle –¥–ª—è —á–∞—Å—Ç—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π:</strong></p><p><code>let timeout;</code><br><code>const observer = new MutationObserver(() => {</code><br><code>&nbsp;&nbsp;clearTimeout(timeout);</code><br><code>&nbsp;&nbsp;timeout = setTimeout(heavyOperation, 250);</code><br><code>});</code></p><p><strong>5. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ nodeType:</strong></p><p><code>mutation.addedNodes.forEach(node => {</code><br><code>&nbsp;&nbsp;if (node.nodeType === Node.ELEMENT_NODE) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤</code><br><code>&nbsp;&nbsp;}</code><br><code>});</code></p><p><strong>6. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WeakSet –¥–ª—è –æ—Ç—Å–ª–µ–∂–µ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤:</strong></p><p><code>const processed = new WeakSet();</code><br><code>if (!processed.has(element)) {</code><br><code>&nbsp;&nbsp;processed.add(element);</code><br><code>&nbsp;&nbsp;processElement(element);</code><br><code>}</code></p><h4>‚ùå –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏:</h4><p><strong>1. –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ —Ü–∏–∫–ª—ã:</strong></p><p><code>// ‚ùå –û–ü–ê–°–ù–û - –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª!</code><br><code>const observer = new MutationObserver(() => {</code><br><code>&nbsp;&nbsp;element.classList.toggle('active'); // –í—ã–∑–æ–≤–µ—Ç –Ω–æ–≤—É—é –º—É—Ç–∞—Ü–∏—é!</code><br><code>});</code><br><code>observer.observe(element, { attributes: true });</code></p><p><code>// ‚úÖ –†–µ—à–µ–Ω–∏–µ - –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∞—Ç—å observer</code><br><code>const observer = new MutationObserver(() => {</code><br><code>&nbsp;&nbsp;observer.disconnect();</code><br><code>&nbsp;&nbsp;element.classList.toggle('active');</code><br><code>&nbsp;&nbsp;observer.observe(element, config);</code><br><code>});</code></p><p><strong>2. –ó–∞–±—ã—Ç—ã–µ observers:</strong></p><p><code>// ‚ùå –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏</code><br><code>const observer = new MutationObserver(callback);</code><br><code>observer.observe(element, config);</code><br><code>// –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è disconnect()!</code></p><p><strong>3. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å callback:</strong></p><p><code>// ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ</code><br><code>element.appendChild(newNode);</code><br><code>console.log('Callback –≤—ã–∑–≤–∞–Ω'); // –≠—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –†–ê–ù–¨–®–ï callback!</code></p><p><strong>4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ subtree: true:</strong></p><p><code>// ‚ùå –û—á–µ–Ω—å –∑–∞—Ç—Ä–∞—Ç–Ω–æ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–µ—Ä–µ–≤—å–µ–≤</code><br><code>observer.observe(document.body, {</code><br><code>&nbsp;&nbsp;attributes: true,</code><br><code>&nbsp;&nbsp;subtree: true // –ù–∞–±–ª—é–¥–∞–µ—Ç –∑–∞ –í–°–ï–ú –≤ body!</code><br><code>});</code></p><p><strong>5. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:</strong></p><p><code>// ‚ùå –û—à–∏–±–∫–∞ - –Ω–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –æ–ø—Ü–∏–∏</code><br><code>{ subtree: true, attributeOldValue: true }</code></p><p><code>// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ</code><br><code>{ attributes: true, subtree: true, attributeOldValue: true }</code></p><h4>‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:</h4><ol><li>–ù–µ –æ—Ç–∫–ª—é—á–∞—Ç—å observer –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</li><li>–¢—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ callback</li><li>–ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è DOM –≤–Ω—É—Ç—Ä–∏ callback ‚Üí –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª</li><li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ addEventListener)</li><li>–û–∂–∏–¥–∞–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è callback</li><li>–ó–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ nodeType –ø—Ä–æ–≤–µ—Ä–∫—É</li></ol><h4>üéØ –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</h4><ul><li>–î–ª—è —Å–æ–±—ã—Ç–∏–π click, input, change ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ DOM events</li><li>–î–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏–∫—É</li><li>–î–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Proxy, —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏</li><li>–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ setInterval (–µ—Å–ª–∏ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ)</li></ul><p><em>–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:</em> MutationObserver –¥–ª—è –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –ù–ï –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç–µ (—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç).</p>",
    difficulty: 'senior',
    tags: ['MutationObserver', 'best practices', '–ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏', '–æ—à–∏–±–∫–∏']
  },
  {
    id: 90,
    question: "–ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å MutationObserver –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏ (React/Vue/Angular)?",
    answer: "<p>MutationObserver –º–æ–∂–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö:</p><h4>React –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:</h4><p><code>// –•—É–∫ useMutationObserver</code><br><code>import { useEffect, useRef } from 'react';</code></p><p><code>function useMutationObserver(callback, config) {</code><br><code>&nbsp;&nbsp;const targetRef = useRef(null);</code><br><code>&nbsp;&nbsp;const observerRef = useRef(null);</code></p><p><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!targetRef.current) return;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;observerRef.current = new MutationObserver(callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;observerRef.current.observe(targetRef.current, config);</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;observerRef.current?.disconnect();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;}, [callback, config]);</code></p><p><code>&nbsp;&nbsp;return targetRef;</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>function MyComponent() {</code><br><code>&nbsp;&nbsp;const [mutationCount, setMutationCount] = useState(0);</code></p><p><code>&nbsp;&nbsp;const elementRef = useMutationObserver(</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;(mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setMutationCount(prev => prev + mutations.length);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;},</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;{ childList: true, subtree: true }</code><br><code>&nbsp;&nbsp;);</code></p><p><code>&nbsp;&nbsp;return &lt;div ref={elementRef}&gt;Mutations: {mutationCount}&lt;/div&gt;;</code><br><code>}</code></p><h4>Vue 3 Composition API:</h4><p><code>&lt;script setup&gt;</code><br><code>import { ref, onMounted, onUnmounted } from 'vue';</code></p><p><code>const elementRef = ref(null);</code><br><code>const mutationCount = ref(0);</code><br><code>let observer = null;</code></p><p><code>onMounted(() => {</code><br><code>&nbsp;&nbsp;if (!elementRef.value) return;</code></p><p><code>&nbsp;&nbsp;observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;mutationCount.value += mutations.length;</code><br><code>&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;observer.observe(elementRef.value, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;subtree: true</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><p><code>onUnmounted(() => {</code><br><code>&nbsp;&nbsp;observer?.disconnect();</code><br><code>});</code><br><code>&lt;/script&gt;</code></p><p><code>&lt;template&gt;</code><br><code>&nbsp;&nbsp;&lt;div ref=\"elementRef\"&gt;Mutations: {{ mutationCount }}&lt;/div&gt;</code><br><code>&lt;/template&gt;</code></p><h4>Vue Composable:</h4><p><code>// composables/useMutationObserver.js</code><br><code>import { onMounted, onUnmounted } from 'vue';</code></p><p><code>export function useMutationObserver(targetRef, callback, options) {</code><br><code>&nbsp;&nbsp;let observer = null;</code></p><p><code>&nbsp;&nbsp;onMounted(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!targetRef.value) return;</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;observer = new MutationObserver(callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;observer.observe(targetRef.value, options);</code><br><code>&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;onUnmounted(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;observer?.disconnect();</code><br><code>&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;return { observer };</code><br><code>}</code></p><h4>Angular –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:</h4><p><code>import { Directive, ElementRef, Output, EventEmitter, OnDestroy, OnInit } from '@angular/core';</code></p><p><code>@Directive({</code><br><code>&nbsp;&nbsp;selector: '[appMutationObserver]'</code><br><code>})</code><br><code>export class MutationObserverDirective implements OnInit, OnDestroy {</code><br><code>&nbsp;&nbsp;@Output() mutations = new EventEmitter&lt;MutationRecord[]&gt;();</code><br><code>&nbsp;&nbsp;private observer: MutationObserver;</code></p><p><code>&nbsp;&nbsp;constructor(private elementRef: ElementRef) {}</code></p><p><code>&nbsp;&nbsp;ngOnInit() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new MutationObserver((mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.mutations.emit(mutations);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code></p><p><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe(this.elementRef.nativeElement, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childList: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attributes: true,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subtree: true</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code></p><p><code>&nbsp;&nbsp;ngOnDestroy() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer?.disconnect();</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>&lt;div appMutationObserver (mutations)=\"onMutations($event)\"&gt;</code><br><code>&nbsp;&nbsp;Content</code><br><code>&lt;/div&gt;</code></p><h4>–í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:</h4><ul><li><strong>React:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ useRef –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–∞, useEffect –¥–ª—è lifecycle</li><li><strong>Vue:</strong> onMounted/onUnmounted –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è observer</li><li><strong>Angular:</strong> –î–∏—Ä–µ–∫—Ç–∏–≤—ã –∏–ª–∏ —Å–µ—Ä–≤–∏—Å—ã —Å ngOnDestroy cleanup</li><li><strong>–í—Å–µ–≥–¥–∞:</strong> –û—Ç–∫–ª—é—á–∞–π—Ç–µ observer –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞</li></ul><h4>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:</h4><p><code>// React - –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏</code><br><code>function ThirdPartyWrapper() {</code><br><code>&nbsp;&nbsp;const wrapperRef = useMutationObserver(</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;(mutations) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –†–µ–∞–≥–∏—Ä—É–µ–º –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('Library component changed');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;},</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;{ childList: true, subtree: true }</code><br><code>&nbsp;&nbsp;);</code></p><p><code>&nbsp;&nbsp;return (</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div ref={wrapperRef}&gt;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ThirdPartyComponent /&gt;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;</code><br><code>&nbsp;&nbsp;);</code><br><code>}</code></p><p><em>Best practice:</em> –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ö—É–∫–∏/composables/–¥–∏—Ä–µ–∫—Ç–∏–≤—ã –¥–ª—è MutationObserver –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞.</p>",
    difficulty: 'middle',
    tags: ['MutationObserver', 'React', 'Vue', 'Angular', '–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è']
  },
  {
    id: 91,
    question: "–ß—Ç–æ —Ç–∞–∫–æ–µ AbortController –∏ –¥–ª—è —á–µ–≥–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?",
    answer: "<p><strong>AbortController</strong> ‚Äî —ç—Ç–æ Web API –¥–ª—è –æ—Ç–º–µ–Ω—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ Fetch –∑–∞–ø—Ä–æ—Å—ã, —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:</p><h4>–û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</h4><p>–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –ø—Ä–µ—Ä—ã–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã, —ç–∫–æ–Ω–æ–º—è —Ä–µ—Å—É—Ä—Å—ã –∏ —É–ª—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.</p><h4>–°–æ–∑–¥–∞–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const controller = new AbortController();</code><br><code>const signal = controller.signal;</code><br><code></code><br><code>fetch('/api/data', { signal })</code><br><code>&nbsp;&nbsp;.then(response => response.json())</code><br><code>&nbsp;&nbsp;.catch(error => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('–ó–∞–ø—Ä–æ—Å –æ—Ç–º–µ–Ω–µ–Ω');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code><br><code></code><br><code>// –û—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞</code><br><code>controller.abort();</code></p><h4>–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:</h4><ul><li><strong>–û—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤:</strong> –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ Fetch –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏</li><li><strong>Timeout:</strong> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞ –ø–æ —Ç–∞–π–º–∞—É—Ç—É</li><li><strong>Debounce –ø–æ–∏—Å–∫–∞:</strong> –û—Ç–º–µ–Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤</li><li><strong>–û—Ç–º–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏:</strong> –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤</li><li><strong>Cleanup:</strong> –û—Ç–º–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</li></ul><h4>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:</h4><p><strong>AbortController:</strong> –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–º–µ–Ω–æ–π</p><p><strong>AbortSignal:</strong> –°–∏–≥–Ω–∞–ª, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π –≤ –æ–ø–µ—Ä–∞—Ü–∏–∏</p><p><strong>abort():</strong> –ú–µ—Ç–æ–¥ –¥–ª—è –æ—Ç–º–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–π</p><p><em>–í–∞–∂–Ω–æ:</em> –ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ abort() signal —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è aborted –Ω–∞–≤—Å–µ–≥–¥–∞, –Ω–µ–ª—å–∑—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å.</p>",
    difficulty: 'junior',
    tags: ['AbortController', '–æ—Å–Ω–æ–≤—ã', '–æ—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤', 'Web API']
  },
  {
    id: 92,
    question: "–ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å Fetch –∑–∞–ø—Ä–æ—Å —Å –ø–æ–º–æ—â—å—é AbortController?",
    answer: "<p>AbortController ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ç–º–µ–Ω—ã Fetch –∑–∞–ø—Ä–æ—Å–æ–≤:</p><h4>–ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const controller = new AbortController();</code></p><p><code>fetch('https://api.example.com/data', {</code><br><code>&nbsp;&nbsp;signal: controller.signal</code><br><code>})</code><br><code>&nbsp;&nbsp;.then(response => response.json())</code><br><code>&nbsp;&nbsp;.then(data => console.log(data))</code><br><code>&nbsp;&nbsp;.catch(error => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('–ó–∞–ø—Ä–æ—Å –±—ã–ª –æ—Ç–º–µ–Ω–µ–Ω');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} else {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('–û—à–∏–±–∫–∞:', error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code></p><p><code>// –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å</code><br><code>controller.abort();</code></p><h4>–° async/await:</h4><p><code>async function fetchWithAbort() {</code><br><code>&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch('/api/data', {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: controller.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const data = await response.json();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return data;</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('–ó–∞–ø—Ä–æ—Å –æ—Ç–º–µ–Ω–µ–Ω');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–û—Ç–º–µ–Ω–∞ –ø–æ –∫–Ω–æ–ø–∫–µ:</h4><p><code>let currentController;</code></p><p><code>async function loadData() {</code><br><code>&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∑–∞–ø—Ä–æ—Å</code><br><code>&nbsp;&nbsp;if (currentController) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;currentController.abort();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;currentController = new AbortController();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch('/api/data', {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: currentController.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const data = await response.json();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;displayData(data);</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// HTML</code><br><code>// &lt;button onclick=\"loadData()\"&gt;–ó–∞–≥—Ä—É–∑–∏—Ç—å&lt;/button&gt;</code><br><code>// &lt;button onclick=\"currentController?.abort()\"&gt;–û—Ç–º–µ–Ω–∏—Ç—å&lt;/button&gt;</code></p><h4>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è signal:</h4><p><code>const controller = new AbortController();</code><br><code>const signal = controller.signal;</code></p><p><code>console.log(signal.aborted); // false</code></p><p><code>controller.abort();</code></p><p><code>console.log(signal.aborted); // true</code></p><p><em>–í–∞–∂–Ω–æ:</em> –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ <code>error.name === 'AbortError'</code> –¥–ª—è –æ—Ç–ª–∏—á–∏—è –æ—Ç–º–µ–Ω—ã –æ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫.</p>",
    difficulty: 'junior',
    tags: ['AbortController', 'Fetch', '–æ—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–∞', '–±–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ']
  },
  {
    id: 93,
    question: "–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å timeout –¥–ª—è Fetch –∑–∞–ø—Ä–æ—Å–∞ —Å –ø–æ–º–æ—â—å—é AbortController?",
    answer: "<p>AbortController –∏–¥–µ–∞–ª–µ–Ω –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ timeout'–æ–≤ –¥–ª—è Fetch –∑–∞–ø—Ä–æ—Å–æ–≤:</p><h4>–ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:</h4><p><code>async function fetchWithTimeout(url, timeout = 5000) {</code><br><code>&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–º–µ–Ω–∞ —á–µ—Ä–µ–∑ timeout</code><br><code>&nbsp;&nbsp;const timeoutId = setTimeout(() => controller.abort(), timeout);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(url, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: controller.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º —Ç–∞–π–º–µ—Ä –ø—Ä–∏ —É—Å–ø–µ—Ö–µ</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(timeoutId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return response;</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(timeoutId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new Error(\`Request timeout after \${timeout}ms\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>try {</code><br><code>&nbsp;&nbsp;const response = await fetchWithTimeout('/api/data', 3000);</code><br><code>&nbsp;&nbsp;const data = await response.json();</code><br><code>&nbsp;&nbsp;console.log(data);</code><br><code>} catch (error) {</code><br><code>&nbsp;&nbsp;console.error(error.message); // 'Request timeout after 3000ms'</code><br><code>}</code></p><h4>–° –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º AbortSignal.timeout() (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥):</h4><p><code>// Chrome 103+, Safari 16+, Firefox 100+</code><br><code>async function fetchWithTimeout(url, timeout = 5000) {</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(url, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: AbortSignal.timeout(timeout)</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return response;</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'TimeoutError' || error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new Error(\`Request timeout after \${timeout}ms\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–∏–≥–Ω–∞–ª–æ–≤:</h4><p><code>async function fetchWithTimeoutAndCancel(url, timeout, userController) {</code><br><code>&nbsp;&nbsp;const timeoutController = new AbortController();</code><br><code>&nbsp;&nbsp;const timeoutId = setTimeout(() => timeoutController.abort(), timeout);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –°–ª—É—à–∞–µ–º –æ–±–∞ —Å–∏–≥–Ω–∞–ª–∞</code><br><code>&nbsp;&nbsp;userController.signal.addEventListener('abort', () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;timeoutController.abort();</code><br><code>&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(url, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: timeoutController.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(timeoutId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return response;</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(timeoutId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞:</h4><p><code>class FetchWithTimeout {</code><br><code>&nbsp;&nbsp;constructor(defaultTimeout = 10000) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.defaultTimeout = defaultTimeout;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async fetch(url, options = {}) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const timeout = options.timeout || this.defaultTimeout;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const timeoutId = setTimeout(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;controller.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}, timeout);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(url, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...options,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: controller.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(timeoutId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return response;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(timeoutId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new Error(\`Timeout: Request exceeded \${timeout}ms\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>const fetcher = new FetchWithTimeout(5000);</code><br><code>const response = await fetcher.fetch('/api/data', { timeout: 3000 });</code></p><p><em>Best practice:</em> –í—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–π—Ç–µ timeout —á–µ—Ä–µ–∑ clearTimeout() –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.</p>",
    difficulty: 'middle',
    tags: ['AbortController', 'timeout', 'Fetch', '—Ç–∞–π–º–∞—É—Ç—ã']
  },
  {
    id: 94,
    question: "–ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–π –ø–µ—á–∞—Ç–∏ –≤ –ø–æ–∏—Å–∫–µ (debounce —Å –æ—Ç–º–µ–Ω–æ–π)?",
    answer: "<p>AbortController –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–º–µ–Ω—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–π –ø–µ—á–∞—Ç–∏:</p><h4>–ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:</h4><p><code>class SearchWithAbort {</code><br><code>&nbsp;&nbsp;constructor(searchCallback) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.searchCallback = searchCallback;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.currentController = null;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async search(query) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∑–∞–ø—Ä–æ—Å</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.currentController) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.currentController.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.currentController = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(\`/api/search?q=\${query}\`, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: this.currentController.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const results = await response.json();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.searchCallback(results);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('Search error:', error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å input:</h4><p><code>const search = new SearchWithAbort((results) => {</code><br><code>&nbsp;&nbsp;displaySearchResults(results);</code><br><code>});</code></p><p><code>const searchInput = document.querySelector('#search');</code><br><code>searchInput.addEventListener('input', (e) => {</code><br><code>&nbsp;&nbsp;search.search(e.target.value);</code><br><code>});</code></p><h4>–° debounce:</h4><p><code>class DebouncedSearch {</code><br><code>&nbsp;&nbsp;constructor(searchCallback, delay = 300) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.searchCallback = searchCallback;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.delay = delay;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.currentController = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.debounceTimeout = null;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;search(query) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–∞–π–º–µ—Ä</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(this.debounceTimeout);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∑–∞–ø—Ä–æ—Å</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.currentController) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.currentController.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ó–∞–ø—É—Å–∫–∞–µ–º —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.debounceTimeout = setTimeout(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.performSearch(query);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}, this.delay);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async performSearch(query) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.currentController = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(\`/api/search?q=\${query}\`, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: this.currentController.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const results = await response.json();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.searchCallback(results);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('Search error:', error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>React —Ö—É–∫:</h4><p><code>function useSearchWithAbort(searchFn, delay = 300) {</code><br><code>&nbsp;&nbsp;const [results, setResults] = useState([]);</code><br><code>&nbsp;&nbsp;const [loading, setLoading] = useState(false);</code><br><code>&nbsp;&nbsp;const controllerRef = useRef(null);</code><br><code>&nbsp;&nbsp;const timeoutRef = useRef(null);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const search = useCallback((query) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(timeoutRef.current);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current?.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!query) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setResults([]);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;setLoading(true);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;timeoutRef.current = setTimeout(async () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const data = await searchFn(query, controllerRef.current.signal);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setResults(data);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} finally {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setLoading(false);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}, delay);</code><br><code>&nbsp;&nbsp;}, [searchFn, delay]);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// Cleanup</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(timeoutRef.current);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current?.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;}, []);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return { results, loading, search };</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>function SearchComponent() {</code><br><code>&nbsp;&nbsp;const { results, loading, search } = useSearchWithAbort(</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;async (query, signal) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const res = await fetch(\`/api/search?q=\${query}\`, { signal });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return res.json();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return (</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&lt;input </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onChange={(e) => search(e.target.value)}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;placeholder=\"–ü–æ–∏—Å–∫...\"</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;/&gt;</code><br><code>&nbsp;&nbsp;);</code><br><code>}</code></p><p><em>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:</em> –≠–∫–æ–Ω–æ–º–∏—Ç bandwidth –∏ —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞, –æ—Ç–º–µ–Ω—è—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –∑–∞–ø—Ä–æ—Å—ã.</p>",
    difficulty: 'middle',
    tags: ['AbortController', '–ø–æ–∏—Å–∫', 'debounce', '–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è']
  },
  {
    id: 95,
    question: "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AbortSignal –¥–ª—è –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è –æ—Ç–º–µ–Ω—ã?",
    answer: "<p>AbortSignal –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±—ã—Ç–∏–µ 'abort' –¥–ª—è —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞ –æ—Ç–º–µ–Ω—É –æ–ø–µ—Ä–∞—Ü–∏–π:</p><h4>–ë–∞–∑–æ–≤–æ–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ:</h4><p><code>const controller = new AbortController();</code><br><code>const signal = controller.signal;</code></p><p><code>signal.addEventListener('abort', () => {</code><br><code>&nbsp;&nbsp;console.log('–û–ø–µ—Ä–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞!');</code><br><code>&nbsp;&nbsp;console.log('–ü—Ä–∏—á–∏–Ω–∞:', signal.reason);</code><br><code>});</code></p><p><code>controller.abort('–û—Ç–º–µ–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º');</code></p><h4>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è:</h4><p><code>const signal = controller.signal;</code></p><p><code>// –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ –æ–ø–µ—Ä–∞—Ü–∏–∏</code><br><code>if (signal.aborted) {</code><br><code>&nbsp;&nbsp;console.log('–£–∂–µ –æ—Ç–º–µ–Ω–µ–Ω–æ');</code><br><code>&nbsp;&nbsp;return;</code><br><code>}</code></p><p><code>// –†–µ–∞–∫—Ç–∏–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</code><br><code>signal.addEventListener('abort', () => {</code><br><code>&nbsp;&nbsp;// –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</code><br><code>});</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏:</h4><p><code>async function processWithAbort(signal) {</code><br><code>&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä—è–µ–º –≤ –Ω–∞—á–∞–ª–µ</code><br><code>&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw new Error('Already aborted');</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–º–µ–Ω—ã</code><br><code>&nbsp;&nbsp;const abortHandler = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('–ü—Ä–µ—Ä—ã–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É...');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;cleanup();</code><br><code>&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;signal.addEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –î–ª–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;for (let i = 0; i < 1000; i++) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new Error('Operation aborted');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await processItem(i);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;} finally {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—á–∏—Å—Ç–∫–∞ —Å–ª—É—à–∞—Ç–µ–ª—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–°–æ–∑–¥–∞–Ω–∏–µ Promise —Å –æ—Ç–º–µ–Ω–æ–π:</h4><p><code>function createAbortablePromise(signal) {</code><br><code>&nbsp;&nbsp;return new Promise((resolve, reject) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ä–∞–∑—É</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new Error('Aborted'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –°–ª—É—à–∞–µ–º –æ—Ç–º–µ–Ω—É</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const abortHandler = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new Error('Aborted'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;signal.addEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;doAsyncWork()</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(result => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(result);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.catch(error => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><h4>–ü–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–º–µ–Ω—ã:</h4><p><code>const controller = new AbortController();</code></p><p><code>controller.signal.addEventListener('abort', () => {</code><br><code>&nbsp;&nbsp;const reason = controller.signal.reason;</code><br><code>&nbsp;&nbsp;console.log('–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã:', reason);</code><br><code>});</code></p><p><code>// –û—Ç–º–µ–Ω–∞ —Å –ø—Ä–∏—á–∏–Ω–æ–π</code><br><code>controller.abort('Timeout exceeded');</code><br><code>// –∏–ª–∏</code><br><code>controller.abort(new Error('User cancelled'));</code></p><h4>–û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ:</h4><p><code>class ResourceManager {</code><br><code>&nbsp;&nbsp;constructor(signal) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.resources = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;signal.addEventListener('abort', () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.cleanup();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;allocate(resource) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.resources.push(resource);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;cleanup() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('–û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤...');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.resources.forEach(r => r.dispose());</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.resources = [];</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><em>Best practice:</em> –í—Å–µ–≥–¥–∞ —É–¥–∞–ª—è–π—Ç–µ —Å–ª—É—à–∞—Ç–µ–ª–µ–π abort —Å–æ–±—ã—Ç–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.</p>",
    difficulty: 'middle',
    tags: ['AbortSignal', '—Å–æ–±—ã—Ç–∏—è', '–ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ', 'cleanup']
  },
  {
    id: 96,
    question: "–ö–∞–∫ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ AbortSignal (AbortSignal.any)?",
    answer: "<p>–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º —É—Å–ª–æ–≤–∏—è–º ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è <code>AbortSignal.any()</code>:</p><h4>–ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AbortSignal.any():</h4><p><code>const userController = new AbortController();</code><br><code>const timeoutController = new AbortController();</code></p><p><code>// –ö–æ–º–±–∏–Ω–∏—Ä—É–µ–º —Å–∏–≥–Ω–∞–ª—ã</code><br><code>const combinedSignal = AbortSignal.any([</code><br><code>&nbsp;&nbsp;userController.signal,</code><br><code>&nbsp;&nbsp;timeoutController.signal</code><br><code>]);</code></p><p><code>fetch('/api/data', { signal: combinedSignal })</code><br><code>&nbsp;&nbsp;.catch(error => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('–û—Ç–º–µ–Ω–µ–Ω–æ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏–ª–∏ —Ç–∞–π–º–∞—É—Ç–æ–º)');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code></p><p><code>// –û—Ç–º–µ–Ω–∞ —Ç–∞–π–º–∞—É—Ç–æ–º —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥</code><br><code>setTimeout(() => timeoutController.abort(), 5000);</code></p><p><code>// –ò–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º</code><br><code>// userController.abort();</code></p><h4>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä - –∑–∞–ø—Ä–æ—Å —Å —Ç–∞–π–º–∞—É—Ç–æ–º –∏ —Ä—É—á–Ω–æ–π –æ—Ç–º–µ–Ω–æ–π:</h4><p><code>async function fetchWithTimeoutAndCancel(url, timeout, userSignal) {</code><br><code>&nbsp;&nbsp;// –°–æ–∑–¥–∞–µ–º —Å–∏–≥–Ω–∞–ª –¥–ª—è —Ç–∞–π–º–∞—É—Ç–∞</code><br><code>&nbsp;&nbsp;const timeoutSignal = AbortSignal.timeout(timeout);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –ö–æ–º–±–∏–Ω–∏—Ä—É–µ–º</code><br><code>&nbsp;&nbsp;const combinedSignal = AbortSignal.any([userSignal, timeoutSignal]);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(url, { signal: combinedSignal });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return response.json();</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError' || error.name === 'TimeoutError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (timeoutSignal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new Error('Timeout');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (userSignal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new Error('User cancelled');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>Polyfill –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤:</h4><p><code>if (!AbortSignal.any) {</code><br><code>&nbsp;&nbsp;AbortSignal.any = function(signals) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;signals.forEach(signal => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;controller.abort(signal.reason);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.addEventListener('abort', () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;controller.abort(signal.reason);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, { once: true });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return controller.signal;</code><br><code>&nbsp;&nbsp;};</code><br><code>}</code></p><h4>–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –æ—Ç–º–µ–Ω—ã:</h4><p><code>async function complexFetch(url) {</code><br><code>&nbsp;&nbsp;const userController = new AbortController();</code><br><code>&nbsp;&nbsp;const timeoutSignal = AbortSignal.timeout(10000);</code><br><code>&nbsp;&nbsp;const networkController = new AbortController();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –û—Ç–º–µ–Ω–∞ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–µ—Ç–∏</code><br><code>&nbsp;&nbsp;window.addEventListener('offline', () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;networkController.abort('Network lost');</code><br><code>&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const combinedSignal = AbortSignal.any([</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;userController.signal,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;timeoutSignal,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;networkController.signal</code><br><code>&nbsp;&nbsp;]);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(url, { signal: combinedSignal });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return response.json();</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Abort reason:', combinedSignal.reason);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>React –ø—Ä–∏–º–µ—Ä:</h4><p><code>function DataLoader() {</code><br><code>&nbsp;&nbsp;const userControllerRef = useRef(new AbortController());</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const controller = userControllerRef.current;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–º–µ–Ω–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => controller.abort();</code><br><code>&nbsp;&nbsp;}, []);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const loadData = async () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const combinedSignal = AbortSignal.any([</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;userControllerRef.current.signal,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AbortSignal.timeout(5000)</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;]);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch('/api/data', { signal: combinedSignal });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// ...</code><br><code>&nbsp;&nbsp;};</code><br><code>}</code></p><p><em>–ü–æ–¥–¥–µ—Ä–∂–∫–∞:</em> AbortSignal.any() –¥–æ—Å—Ç—É–ø–µ–Ω –≤ Chrome 116+, Safari 17+, Firefox 115+. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ polyfill –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤.</p>",
    difficulty: 'senior',
    tags: ['AbortSignal', '–∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ', 'AbortSignal.any', '–ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ']
  },
  {
    id: 97,
    question: "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AbortController —Å XMLHttpRequest?",
    answer: "<p>XMLHttpRequest –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç AbortSignal –Ω–∞–ø—Ä—è–º—É—é, –Ω–æ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–º–µ–Ω—É –≤—Ä—É—á–Ω—É—é:</p><h4>–ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:</h4><p><code>function xhrWithAbort(url, signal) {</code><br><code>&nbsp;&nbsp;return new Promise((resolve, reject) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const xhr = new XMLHttpRequest();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –°–ª—É—à–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω—ã</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const abortHandler = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xhr.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;signal.addEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;xhr.onload = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(xhr.responseText);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;xhr.onerror = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new Error('Network error'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;xhr.open('GET', url);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;xhr.send();</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const controller = new AbortController();</code></p><p><code>xhrWithAbort('/api/data', controller.signal)</code><br><code>&nbsp;&nbsp;.then(data => console.log(data))</code><br><code>&nbsp;&nbsp;.catch(error => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('XHR request aborted');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code></p><p><code>// –û—Ç–º–µ–Ω–∞</code><br><code>controller.abort();</code></p><h4>–° upload progress:</h4><p><code>function uploadWithAbort(url, formData, signal, onProgress) {</code><br><code>&nbsp;&nbsp;return new Promise((resolve, reject) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const xhr = new XMLHttpRequest();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const abortHandler = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xhr.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;signal.addEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// Upload progress</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;xhr.upload.onprogress = (e) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (e.lengthComputable) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const percent = (e.loaded / e.total) * 100;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onProgress?.(percent);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;xhr.onload = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(xhr.responseText);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;xhr.onerror = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new Error('Upload failed'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;xhr.open('POST', url);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;xhr.send(formData);</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><h4>–ö–ª–∞—Å—Å-–æ–±–µ—Ä—Ç–∫–∞:</h4><p><code>class XHRWithAbortSignal {</code><br><code>&nbsp;&nbsp;constructor(url, options = {}) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.url = url;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.options = options;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.xhr = new XMLHttpRequest();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async send(signal) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return new Promise((resolve, reject) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (signal?.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (signal) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.addEventListener('abort', () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.xhr.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.xhr.onload = () => resolve(this.xhr);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.xhr.onerror = () => reject(new Error('Network error'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.xhr.open(this.options.method || 'GET', this.url);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (this.options.headers) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object.entries(this.options.headers).forEach(([key, value]) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.xhr.setRequestHeader(key, value);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.xhr.send(this.options.body);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>const controller = new AbortController();</code><br><code>const xhr = new XHRWithAbortSignal('/api/data');</code></p><p><code>xhr.send(controller.signal)</code><br><code>&nbsp;&nbsp;.then(xhr => console.log(xhr.responseText))</code><br><code>&nbsp;&nbsp;.catch(error => console.error(error));</code></p><p><em>–í–∞–∂–Ω–æ:</em> –í—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–π—Ç–µ —Å–ª—É—à–∞—Ç–µ–ª–µ–π abort —Å–æ–±—ã—Ç–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.</p>",
    difficulty: 'middle',
    tags: ['AbortController', 'XMLHttpRequest', '–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è', 'upload']
  },
  {
    id: 98,
    question: "–ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ —Å FileReader?",
    answer: "<p>FileReader API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç AbortSignal –Ω–∞–ø—Ä—è–º—É—é, –Ω–æ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–º–µ–Ω—É:</p><h4>–û–±–µ—Ä—Ç–∫–∞ —Å AbortController:</h4><p><code>function readFileWithAbort(file, signal, method = 'readAsText') {</code><br><code>&nbsp;&nbsp;return new Promise((resolve, reject) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const reader = new FileReader();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–º–µ–Ω—ã</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const abortHandler = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reader.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;signal.addEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;reader.onload = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(reader.result);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;reader.onerror = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(reader.error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –í—ã–∑–æ–≤ –Ω—É–∂–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;reader[method](file);</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const controller = new AbortController();</code><br><code>const fileInput = document.querySelector('input[type=\"file\"]');</code></p><p><code>fileInput.addEventListener('change', async (e) => {</code><br><code>&nbsp;&nbsp;const file = e.target.files[0];</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const content = await readFileWithAbort(</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file, </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;controller.signal, </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'readAsText'</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('File content:', content);</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('File reading cancelled');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>});</code></p><p><code>// –û—Ç–º–µ–Ω–∞ —á—Ç–µ–Ω–∏—è</code><br><code>cancelButton.onclick = () => controller.abort();</code></p><h4>–° –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º:</h4><p><code>function readFileWithProgress(file, signal, onProgress) {</code><br><code>&nbsp;&nbsp;return new Promise((resolve, reject) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const reader = new FileReader();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const abortHandler = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reader.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;signal.addEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≥—Ä–µ—Å—Å —á—Ç–µ–Ω–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;reader.onprogress = (e) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (e.lengthComputable) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const percent = (e.loaded / e.total) * 100;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onProgress?.(percent);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;reader.onload = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(reader.result);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;reader.onerror = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(reader.error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;reader.readAsDataURL(file);</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><h4>–ö–ª–∞—Å—Å FileReaderWithAbort:</h4><p><code>class FileReaderWithAbort {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.reader = new FileReader();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;read(file, method, signal) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return new Promise((resolve, reject) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (signal?.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const abortHandler = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reader.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal?.addEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reader.onload = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal?.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(this.reader.result);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reader.onerror = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal?.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(this.reader.error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reader.onabort = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal?.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reader[method](file);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;readAsText(file, signal) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return this.read(file, 'readAsText', signal);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;readAsDataURL(file, signal) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return this.read(file, 'readAsDataURL', signal);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;readAsArrayBuffer(file, signal) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return this.read(file, 'readAsArrayBuffer', signal);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>const reader = new FileReaderWithAbort();</code><br><code>const controller = new AbortController();</code></p><p><code>reader.readAsText(file, controller.signal)</code><br><code>&nbsp;&nbsp;.then(content => console.log(content))</code><br><code>&nbsp;&nbsp;.catch(err => console.error(err));</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –û—Ç–º–µ–Ω–∞ —á—Ç–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –ø–∞—Ä—Å–∏–Ω–≥ CSV/JSON.</p>",
    difficulty: 'middle',
    tags: ['AbortController', 'FileReader', '—Ñ–∞–π–ª—ã', '—á—Ç–µ–Ω–∏–µ']
  },
  {
    id: 99,
    question: "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AbortController –≤ React –¥–ª—è –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏?",
    answer: "<p>AbortController –∫—Ä–∏—Ç–∏—á–µ–Ω –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:</p><h4>–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å useEffect:</h4><p><code>import { useEffect, useState } from 'react';</code></p><p><code>function DataComponent() {</code><br><code>&nbsp;&nbsp;const [data, setData] = useState(null);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;fetch('/api/data', { signal: controller.signal })</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(res => res.json())</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(setData)</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.catch(error => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('Error:', error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// Cleanup –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => controller.abort();</code><br><code>&nbsp;&nbsp;}, []);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return &lt;div&gt;{data ? JSON.stringify(data) : 'Loading...'}&lt;/div&gt;;</code><br><code>}</code></p><h4>–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ö—É–∫ useFetch:</h4><p><code>function useFetch(url, options = {}) {</code><br><code>&nbsp;&nbsp;const [data, setData] = useState(null);</code><br><code>&nbsp;&nbsp;const [loading, setLoading] = useState(false);</code><br><code>&nbsp;&nbsp;const [error, setError] = useState(null);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;setLoading(true);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;fetch(url, { </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...options, </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: controller.signal </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;})</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(res => res.json())</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(data => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setData(data);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setError(null);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.catch(error => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setError(error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.finally(() => setLoading(false));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => controller.abort();</code><br><code>&nbsp;&nbsp;}, [url]);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return { data, loading, error };</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>function App() {</code><br><code>&nbsp;&nbsp;const { data, loading, error } = useFetch('/api/users');</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;if (loading) return &lt;div&gt;Loading...&lt;/div&gt;;</code><br><code>&nbsp;&nbsp;if (error) return &lt;div&gt;Error: {error.message}&lt;/div&gt;;</code><br><code>&nbsp;&nbsp;return &lt;div&gt;{JSON.stringify(data)}&lt;/div&gt;;</code><br><code>}</code></p><h4>–° —Ä—É—á–Ω–æ–π –æ—Ç–º–µ–Ω–æ–π:</h4><p><code>function useFetchWithManualAbort(url) {</code><br><code>&nbsp;&nbsp;const [data, setData] = useState(null);</code><br><code>&nbsp;&nbsp;const [loading, setLoading] = useState(false);</code><br><code>&nbsp;&nbsp;const controllerRef = useRef(null);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const execute = useCallback(async () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∑–∞–ø—Ä–æ—Å</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current?.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;setLoading(true);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(url, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: controllerRef.current.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const json = await response.json();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setData(json);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} finally {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setLoading(false);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}, [url]);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const cancel = useCallback(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current?.abort();</code><br><code>&nbsp;&nbsp;}, []);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// Cleanup –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => controllerRef.current?.abort();</code><br><code>&nbsp;&nbsp;}, []);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return { data, loading, execute, cancel };</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>function DataLoader() {</code><br><code>&nbsp;&nbsp;const { data, loading, execute, cancel } = useFetchWithManualAbort('/api/data');</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return (</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div&gt;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button onClick={execute}&gt;–ó–∞–≥—Ä—É–∑–∏—Ç—å&lt;/button&gt;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button onClick={cancel}&gt;–û—Ç–º–µ–Ω–∏—Ç—å&lt;/button&gt;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{loading && &lt;div&gt;Loading...&lt;/div&gt;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{data && &lt;div&gt;{JSON.stringify(data)}&lt;/div&gt;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;</code><br><code>&nbsp;&nbsp;);</code><br><code>}</code></p><h4>–° –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏:</h4><p><code>function UserProfile({ userId }) {</code><br><code>&nbsp;&nbsp;const [user, setUser] = useState(null);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;fetch(\`/api/users/\${userId}\`, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: controller.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;})</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(res => res.json())</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.then(setUser)</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.catch(error => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ userId –∏–ª–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => controller.abort();</code><br><code>&nbsp;&nbsp;}, [userId]);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return &lt;div&gt;{user?.name}&lt;/div&gt;;</code><br><code>}</code></p><p><em>–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ:</em> –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ cleanup —Ñ—É–Ω–∫—Ü–∏—é —Å abort() –∏–∑ useEffect –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—à–∏–±–æ–∫ \"Can't perform a React state update on an unmounted component\".</p>",
    difficulty: 'middle',
    tags: ['AbortController', 'React', 'hooks', 'useEffect']
  },
  {
    id: 100,
    question: "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AbortController –≤ Vue –¥–ª—è –æ—Ç–º–µ–Ω—ã –∑–∞–ø—Ä–æ—Å–æ–≤?",
    answer: "<p>–í Vue 3 AbortController –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ lifecycle hooks –∏ composables:</p><h4>Options API —Å lifecycle hooks:</h4><p><code>export default {</code><br><code>&nbsp;&nbsp;data() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data: null,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;controller: null</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;},</code><br><code>&nbsp;&nbsp;mounted() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.loadData();</code><br><code>&nbsp;&nbsp;},</code><br><code>&nbsp;&nbsp;beforeUnmount() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.controller?.abort();</code><br><code>&nbsp;&nbsp;},</code><br><code>&nbsp;&nbsp;methods: {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;async loadData() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.controller = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch('/api/data', {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: this.controller.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.data = await response.json();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('Error:', error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>Composition API —Å onBeforeUnmount:</h4><p><code>&lt;script setup&gt;</code><br><code>import { ref, onMounted, onBeforeUnmount } from 'vue';</code></p><p><code>const data = ref(null);</code><br><code>const controller = ref(null);</code></p><p><code>async function loadData() {</code><br><code>&nbsp;&nbsp;controller.value = new AbortController();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch('/api/data', {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: controller.value.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;data.value = await response.json();</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>onMounted(() => loadData());</code></p><p><code>onBeforeUnmount(() => {</code><br><code>&nbsp;&nbsp;controller.value?.abort();</code><br><code>});</code><br><code>&lt;/script&gt;</code></p><h4>–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π composable useFetch:</h4><p><code>// composables/useFetch.js</code><br><code>import { ref, onBeforeUnmount } from 'vue';</code></p><p><code>export function useFetch(url, options = {}) {</code><br><code>&nbsp;&nbsp;const data = ref(null);</code><br><code>&nbsp;&nbsp;const loading = ref(false);</code><br><code>&nbsp;&nbsp;const error = ref(null);</code><br><code>&nbsp;&nbsp;const controller = ref(null);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async function execute() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∑–∞–ø—Ä–æ—Å</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controller.value?.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controller.value = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;loading.value = true;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;error.value = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(url, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...options,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: controller.value.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data.value = await response.json();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (err) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (err.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error.value = err;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} finally {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loading.value = false;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;function cancel() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controller.value?.abort();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// Cleanup –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</code><br><code>&nbsp;&nbsp;onBeforeUnmount(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controller.value?.abort();</code><br><code>&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return { data, loading, error, execute, cancel };</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>&lt;script setup&gt;</code><br><code>import { useFetch } from '@/composables/useFetch';</code></p><p><code>const { data, loading, error, execute, cancel } = useFetch('/api/users');</code><br><code></code><br><code>// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</code><br><code>onMounted(() => execute());</code><br><code>&lt;/script&gt;</code></p><p><code>&lt;template&gt;</code><br><code>&nbsp;&nbsp;&lt;div&gt;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=\"execute\"&gt;–ó–∞–≥—Ä—É–∑–∏—Ç—å&lt;/button&gt;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&lt;button @click=\"cancel\"&gt;–û—Ç–º–µ–Ω–∏—Ç—å&lt;/button&gt;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div v-if=\"loading\"&gt;–ó–∞–≥—Ä—É–∑–∫–∞...&lt;/div&gt;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div v-else-if=\"error\"&gt;–û—à–∏–±–∫–∞: {{ error.message }}&lt;/div&gt;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&lt;div v-else-if=\"data\"&gt;{{ data }}&lt;/div&gt;</code><br><code>&nbsp;&nbsp;&lt;/div&gt;</code><br><code>&lt;/template&gt;</code></p><h4>–° watch –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:</h4><p><code>&lt;script setup&gt;</code><br><code>import { ref, watch, onBeforeUnmount } from 'vue';</code></p><p><code>const props = defineProps(['userId']);</code><br><code>const user = ref(null);</code><br><code>let controller = null;</code></p><p><code>async function loadUser(id) {</code><br><code>&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –∑–∞–ø—Ä–æ—Å</code><br><code>&nbsp;&nbsp;controller?.abort();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;controller = new AbortController();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(\`/api/users/\${id}\`, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: controller.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;user.value = await response.json();</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ userId</code><br><code>watch(() => props.userId, (newId) => {</code><br><code>&nbsp;&nbsp;if (newId) loadUser(newId);</code><br><code>}, { immediate: true });</code></p><p><code>onBeforeUnmount(() => {</code><br><code>&nbsp;&nbsp;controller?.abort();</code><br><code>});</code><br><code>&lt;/script&gt;</code></p><p><em>Best practice:</em> –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ composables –¥–ª—è –ª–æ–≥–∏–∫–∏ —Å AbortController –≤–º–µ—Å—Ç–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –≤ –∫–∞–∂–¥–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ.</p>",
    difficulty: 'middle',
    tags: ['AbortController', 'Vue', 'Composition API', 'composables']
  },
  {
    id: 101,
    question: "–ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö —Ä–µ—Å—É—Ä—Å–æ–≤?",
    answer: "<p>–û—Ç–º–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ —ç–∫–æ–Ω–æ–º–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞:</p><h4>–û—Ç–º–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:</h4><p><code>function loadImageWithAbort(src, signal) {</code><br><code>&nbsp;&nbsp;return new Promise((resolve, reject) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const img = new Image();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–º–µ–Ω—ã</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const abortHandler = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–µ—Ä—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;img.src = '';</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;signal.addEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;img.onload = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(img);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;img.onerror = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new Error('Image load failed'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;img.src = src;</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const controller = new AbortController();</code></p><p><code>loadImageWithAbort('/image.jpg', controller.signal)</code><br><code>&nbsp;&nbsp;.then(img => document.body.appendChild(img))</code><br><code>&nbsp;&nbsp;.catch(error => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('Image loading cancelled');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code></p><p><code>// –û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É</code><br><code>controller.abort();</code></p><h4>–û—Ç–º–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤:</h4><p><code>function loadScriptWithAbort(src, signal) {</code><br><code>&nbsp;&nbsp;return new Promise((resolve, reject) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const script = document.createElement('script');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;script.src = src;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const abortHandler = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script.remove();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;signal.addEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;script.onload = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(script);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;script.onerror = () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal.removeEventListener('abort', abortHandler);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;script.remove();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new Error('Script load failed'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;document.head.appendChild(script);</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><h4>–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤:</h4><p><code>class ResourceLoader {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.controllers = new Map();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async loadImage(id, src) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.controllers.set(id, controller);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const img = await loadImageWithAbort(src, controller.signal);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.controllers.delete(id);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return img;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.controllers.delete(id);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;cancelLoad(id) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const controller = this.controllers.get(id);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (controller) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;controller.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.controllers.delete(id);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;cancelAll() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.controllers.forEach(controller => controller.abort());</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.controllers.clear();</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>const loader = new ResourceLoader();</code></p><p><code>loader.loadImage('hero', '/hero.jpg')</code><br><code>&nbsp;&nbsp;.then(img => document.body.appendChild(img));</code></p><p><code>// –û—Ç–º–µ–Ω–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É</code><br><code>loader.cancelLoad('hero');</code></p><p><code>// –ò–ª–∏ –≤—Å–µ –∑–∞–≥—Ä—É–∑–∫–∏</code><br><code>loader.cancelAll();</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –ö–∞—Ä—É—Å–µ–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –ª–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞, –æ—Ç–º–µ–Ω–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–æ—É—Ç–∞, —ç–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞.</p>",
    difficulty: 'middle',
    tags: ['AbortController', '–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è', '—Ä–µ—Å—É—Ä—Å—ã', '–∑–∞–≥—Ä—É–∑–∫–∞']
  },
  {
    id: 102,
    question: "–ö–∞–∫–∏–µ –µ—Å—Ç—å best practices –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å AbortController?",
    answer: "<p>–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å AbortController –≤–∞–∂–Ω–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º –∏ –∏–∑–±–µ–≥–∞—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫:</p><h4>‚úÖ Best Practices:</h4><p><strong>1. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ signal.aborted:</strong></p><p><code>async function operation(signal) {</code><br><code>&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw new DOMException('Already aborted', 'AbortError');</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –î–ª–∏—Ç–µ–ª—å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è...</code><br><code>}</code></p><p><strong>2. –û—á–∏—â–∞–π—Ç–µ —Å–ª—É—à–∞—Ç–µ–ª–µ–π —Å–æ–±—ã—Ç–∏–π:</strong></p><p><code>const abortHandler = () => cleanup();</code><br><code>signal.addEventListener('abort', abortHandler);</code><br><code></code><br><code>// –í –∫–æ–Ω—Ü–µ</code><br><code>signal.removeEventListener('abort', abortHandler);</code></p><p><strong>3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ { once: true } –¥–ª—è –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–∏:</strong></p><p><code>signal.addEventListener('abort', handler, { once: true });</code></p><p><strong>4. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ error.name === 'AbortError':</strong></p><p><code>catch (error) {</code><br><code>&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–∞—è –æ—Ç–º–µ–Ω–∞, –Ω–µ –ª–æ–≥–∏—Ä—É–µ–º –∫–∞–∫ –æ—à–∏–±–∫—É</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;console.error('–†–µ–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞:', error);</code><br><code>}</code></p><p><strong>5. –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏:</strong></p><p><code>// ‚ùå –ü–ª–æ—Ö–æ - –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>const controller = new AbortController();</code><br><code>controller.abort();</code><br><code>// –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å!</code></p><p><code>// ‚úÖ –•–æ—Ä–æ—à–æ - –Ω–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä</code><br><code>function makeRequest() {</code><br><code>&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;return { controller, promise: fetch(url, { signal: controller.signal }) };</code><br><code>}</code></p><p><strong>6. –ü–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ø—Ä–∏—á–∏–Ω—É –æ—Ç–º–µ–Ω—ã:</strong></p><p><code>controller.abort('User cancelled');</code><br><code>// –∏–ª–∏</code><br><code>controller.abort(new Error('Timeout exceeded'));</code></p><h4>‚ùå –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏:</h4><p><strong>1. –ó–∞–±—ã—Ç—ã–µ cleanup:</strong></p><p><code>// ‚ùå –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏ –≤ React</code><br><code>useEffect(() => {</code><br><code>&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;fetch(url, { signal: controller.signal });</code><br><code>&nbsp;&nbsp;// –ó–∞–±—ã–ª–∏ return cleanup!</code><br><code>}, []);</code></p><p><code>// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ</code><br><code>useEffect(() => {</code><br><code>&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;fetch(url, { signal: controller.signal });</code><br><code>&nbsp;&nbsp;return () => controller.abort();</code><br><code>}, []);</code></p><p><strong>2. –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ AbortSignal:</strong></p><p><code>// ‚ùå –ù–µ–ª—å–∑—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</code><br><code>const signal = controller.signal;</code><br><code>controller.abort();</code><br><code>// signal.aborted === true –Ω–∞–≤—Å–µ–≥–¥–∞!</code></p><p><strong>3. –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ AbortError:</strong></p><p><code>// ‚ùå –ü–ª–æ—Ö–æ - –ª–æ–≥–∏—Ä—É–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—É—é –æ—Ç–º–µ–Ω—É</code><br><code>catch (error) {</code><br><code>&nbsp;&nbsp;console.error('Error:', error); // –õ–æ–≥–∏—Ä—É–µ—Ç AbortError</code><br><code>}</code></p><p><code>// ‚úÖ –•–æ—Ä–æ—à–æ</code><br><code>catch (error) {</code><br><code>&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.error('Error:', error);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><strong>4. –ó–∞–±—ã—Ç—ã–µ —Å–ª—É—à–∞—Ç–µ–ª–∏:</strong></p><p><code>// ‚ùå –°–ª—É—à–∞—Ç–µ–ª—å –Ω–µ —É–¥–∞–ª–µ–Ω</code><br><code>signal.addEventListener('abort', handler);</code><br><code>// –†–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ!</code></p><p><code>// ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ once –∏–ª–∏ —É–¥–∞–ª—è–π—Ç–µ</code><br><code>signal.addEventListener('abort', handler, { once: true });</code></p><p><strong>5. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ü–∏–∫–ª–∞—Ö:</strong></p><p><code>// ‚ùå –ü–ª–æ—Ö–æ - –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Å –æ–¥–Ω–∏–º signal</code><br><code>const controller = new AbortController();</code><br><code>items.forEach(item => {</code><br><code>&nbsp;&nbsp;fetch(item.url, { signal: controller.signal });</code><br><code>});</code><br><code>// abort() –æ—Ç–º–µ–Ω–∏—Ç –í–°–ï –∑–∞–ø—Ä–æ—Å—ã</code></p><p><strong>6. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ long operations:</strong></p><p><code>// ‚ùå –ü–ª–æ—Ö–æ - –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ abort</code><br><code>async function longOperation(signal) {</code><br><code>&nbsp;&nbsp;for (let i = 0; i < 10000; i++) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;await processItem(i); // –ù–µ–ª—å–∑—è –ø—Ä–µ—Ä–≤–∞—Ç—å!</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// ‚úÖ –•–æ—Ä–æ—à–æ - –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞</code><br><code>async function longOperation(signal) {</code><br><code>&nbsp;&nbsp;for (let i = 0; i < 10000; i++) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new DOMException('Aborted', 'AbortError');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;await processItem(i);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:</h4><ol><li>–ù–µ –æ—Ç–º–µ–Ω—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤</li><li>–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∂–µ –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä</li><li>–ó–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä—è—Ç—å signal.aborted –≤ –¥–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö</li><li>–ù–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å AbortError –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫</li><li>–°–æ–∑–¥–∞–≤–∞—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤–º–µ—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã—Ö</li></ol><h4>üéØ –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</h4><ul><li>–î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</li><li>–ö–æ–≥–¥–∞ –∑–∞–ø—Ä–æ—Å —É–∂–µ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è</li><li>–î–ª—è –æ—Ç–º–µ–Ω—ã setTimeout (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ clearTimeout)</li><li>–î–ª—è –æ—Ç–º–µ–Ω—ã setInterval (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ clearInterval)</li></ul><p><em>–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:</em> –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –Ω–æ–≤—ã–π AbortController –¥–ª—è –∫–∞–∂–¥–æ–π –æ—Ç–º–µ–Ω—è–µ–º–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏, –≤—Å–µ–≥–¥–∞ –æ—á–∏—â–∞–π—Ç–µ —Ä–µ—Å—É—Ä—Å—ã.</p>",
    difficulty: 'senior',
    tags: ['AbortController', 'best practices', '–ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏', '–æ—à–∏–±–∫–∏']
  },
  {
    id: 103,
    question: "–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AbortController –¥–ª—è –æ—Ç–º–µ–Ω—ã –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤?",
    answer: "<p>–ß–∞—Å—Ç–æ –Ω—É–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –≥—Ä—É–ø–ø—É —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ:</p><h4>–ë–∞–∑–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ - –æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è –≤—Å–µ—Ö:</h4><p><code>async function loadPageData(pageId) {</code><br><code>&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;const signal = controller.signal;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –æ–¥–Ω–∏–º signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const [user, posts, comments] = await Promise.all([</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fetch(\`/api/users/\${pageId}\`, { signal }),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fetch(\`/api/posts?userId=\${pageId}\`, { signal }),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fetch(\`/api/comments?userId=\${pageId}\`, { signal })</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;]);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;user: await user.json(),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;posts: await posts.json(),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comments: await comments.json()</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('All requests cancelled');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>const controller = new AbortController();</code><br><code>loadPageData(123);</code><br><code></code><br><code>// –û—Ç–º–µ–Ω—è–µ—Ç –í–°–ï —Ç—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞</code><br><code>controller.abort();</code></p><h4>–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π:</h4><p><code>class RequestManager {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.groups = new Map();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;createGroup(groupId) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const controller = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.groups.set(groupId, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;controller,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requests: []</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return controller.signal;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async fetch(groupId, url, options = {}) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const group = this.groups.get(groupId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!group) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new Error(\`Group \${groupId} not found\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const promise = fetch(url, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...options,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal: group.controller.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;group.requests.push(promise);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return promise;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;cancelGroup(groupId) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const group = this.groups.get(groupId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (group) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;group.controller.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.groups.delete(groupId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;cancelAll() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.groups.forEach((group, groupId) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;group.controller.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.groups.clear();</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>const manager = new RequestManager();</code></p><p><code>async function loadDashboard() {</code><br><code>&nbsp;&nbsp;const groupId = 'dashboard';</code><br><code>&nbsp;&nbsp;manager.createGroup(groupId);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const [users, stats, activities] = await Promise.all([</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manager.fetch(groupId, '/api/users'),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manager.fetch(groupId, '/api/stats'),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;manager.fetch(groupId, '/api/activities')</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;]);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return { users, stats, activities };</code><br><code>&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error(error);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// –û—Ç–º–µ–Ω–∏—Ç—å –≥—Ä—É–ø–ø—É –∑–∞–ø—Ä–æ—Å–æ–≤</code><br><code>manager.cancelGroup('dashboard');</code></p><h4>–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –æ–±—â–µ–π –æ—Ç–º–µ–Ω–æ–π:</h4><p><code>async function loadWithDependencies(signal) {</code><br><code>&nbsp;&nbsp;// –®–∞–≥ 1: –ó–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</code><br><code>&nbsp;&nbsp;const userRes = await fetch('/api/user', { signal });</code><br><code>&nbsp;&nbsp;const user = await userRes.json();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º</code><br><code>&nbsp;&nbsp;if (signal.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw new DOMException('Aborted', 'AbortError');</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –®–∞–≥ 2: –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</code><br><code>&nbsp;&nbsp;const [posts, followers] = await Promise.all([</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;fetch(\`/api/posts?userId=\${user.id}\`, { signal }),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;fetch(\`/api/followers?userId=\${user.id}\`, { signal })</code><br><code>&nbsp;&nbsp;]);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;user,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;posts: await posts.json(),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;followers: await followers.json()</code><br><code>&nbsp;&nbsp;};</code><br><code>}</code></p><h4>React —Ö—É–∫ –¥–ª—è –≥—Ä—É–ø–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤:</h4><p><code>function useGroupedRequests() {</code><br><code>&nbsp;&nbsp;const controllerRef = useRef(null);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const execute = useCallback(async (requests) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é –≥—Ä—É–ø–ø—É</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current?.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const signal = controllerRef.current.signal;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –í—ã–ø–æ–ª–Ω—è–µ–º –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã —Å –æ–¥–Ω–∏–º signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const results = await Promise.all(</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requests.map(req => fetch(req.url, { ...req.options, signal }))</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return Promise.all(results.map(r => r.json()));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}, []);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const cancel = useCallback(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current?.abort();</code><br><code>&nbsp;&nbsp;}, []);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => controllerRef.current?.abort();</code><br><code>&nbsp;&nbsp;}, []);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return { execute, cancel };</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>function Dashboard() {</code><br><code>&nbsp;&nbsp;const { execute, cancel } = useGroupedRequests();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const loadData = async () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const data = await execute([</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ url: '/api/users' },</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ url: '/api/stats' },</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ url: '/api/activities' }</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;]);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö</code><br><code>&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return (</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&lt;button onClick={cancel}&gt;Cancel All&lt;/button&gt;</code><br><code>&nbsp;&nbsp;);</code><br><code>}</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –ó–∞–≥—Ä—É–∑–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, dashboard —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –≤–∏–¥–∂–µ—Ç–æ–≤, –æ—Ç–º–µ–Ω–∞ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ä–æ—É—Ç–∞.</p>",
    difficulty: 'senior',
    tags: ['AbortController', '–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã', '–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞', 'Promise.all']
  },
  {
    id: 104,
    question: "–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –æ—Ç–º–µ–Ω—ã —á–µ—Ä–µ–∑ AbortController?",
    answer: "<p>–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ retry –ª–æ–≥–∏–∫–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–º–µ–Ω—ã –ø–æ–≤—ã—à–∞–µ—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</p><h4>–ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è retry —Å abort:</h4><p><code>async function fetchWithRetry(url, options = {}, retries = 3, signal) {</code><br><code>&nbsp;&nbsp;for (let attempt = 0; attempt <= retries; attempt++) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–º–µ–Ω—ã –ø–µ—Ä–µ–¥ –ø–æ–ø—ã—Ç–∫–æ–π</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (signal?.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new DOMException('Aborted', 'AbortError');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(url, {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...options,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!response.ok) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new Error(\`HTTP \${response.status}\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return response;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ù–µ retry –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ü–æ—Å–ª–µ–¥–Ω—è—è –ø–æ–ø—ã—Ç–∫–∞ - –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (attempt === retries) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Exponential backoff</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const delay = Math.pow(2, attempt) * 1000;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(\`Retry \${attempt + 1}/\${retries} after \${delay}ms\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –û–∂–∏–¥–∞–Ω–∏–µ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –æ—Ç–º–µ–Ω—ã</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await sleep(delay, signal);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// –§—É–Ω–∫—Ü–∏—è sleep —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π abort</code><br><code>function sleep(ms, signal) {</code><br><code>&nbsp;&nbsp;return new Promise((resolve, reject) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (signal?.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const timeout = setTimeout(resolve, ms);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;signal?.addEventListener('abort', () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(timeout);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(new DOMException('Aborted', 'AbortError'));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}, { once: true });</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const controller = new AbortController();</code></p><p><code>try {</code><br><code>&nbsp;&nbsp;const response = await fetchWithRetry(</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;'/api/data',</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;{},</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;3, // 3 –ø–æ–ø—ã—Ç–∫–∏</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controller.signal</code><br><code>&nbsp;&nbsp;);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const data = await response.json();</code><br><code>&nbsp;&nbsp;console.log(data);</code><br><code>} catch (error) {</code><br><code>&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Request cancelled during retry');</code><br><code>&nbsp;&nbsp;} else {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.error('All retries failed:', error);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// –û—Ç–º–µ–Ω–∏—Ç—å –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç (–¥–∞–∂–µ –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è retry)</code><br><code>controller.abort();</code></p><h4>–ö–ª–∞—Å—Å —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º retry:</h4><p><code>class RetryableFetch {</code><br><code>&nbsp;&nbsp;constructor(config = {}) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.maxRetries = config.maxRetries || 3;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.retryDelay = config.retryDelay || 1000;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.retryOn = config.retryOn || [500, 502, 503, 504];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.backoffMultiplier = config.backoffMultiplier || 2;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async fetch(url, options = {}, signal) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;let lastError;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;for (let attempt = 0; attempt <= this.maxRetries; attempt++) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (signal?.aborted) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new DOMException('Aborted', 'AbortError');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetch(url, { ...options, signal });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –£—Å–ø–µ—Ö</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (response.ok) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return response;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–µ–Ω –ª–∏ retry –¥–ª—è —ç—Ç–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!this.retryOn.includes(response.status)) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return response; // –ù–µ retry –¥–ª—è 4xx –æ—à–∏–±–æ–∫</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw new Error(\`HTTP \${response.status}\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (error) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (error.name === 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw error;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastError = error;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (attempt < this.maxRetries) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const delay = this.retryDelay * Math.pow(this.backoffMultiplier, attempt);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(\`Retry \${attempt + 1}/\${this.maxRetries} after \${delay}ms\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await sleep(delay, signal);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw lastError;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>const fetcher = new RetryableFetch({</code><br><code>&nbsp;&nbsp;maxRetries: 5,</code><br><code>&nbsp;&nbsp;retryDelay: 1000,</code><br><code>&nbsp;&nbsp;retryOn: [500, 502, 503, 504],</code><br><code>&nbsp;&nbsp;backoffMultiplier: 2</code><br><code>});</code></p><p><code>const controller = new AbortController();</code></p><p><code>fetcher.fetch('/api/data', {}, controller.signal)</code><br><code>&nbsp;&nbsp;.then(res => res.json())</code><br><code>&nbsp;&nbsp;.then(data => console.log(data));</code></p><p><code>// –û—Ç–º–µ–Ω–∏—Ç—å retry</code><br><code>setTimeout(() => controller.abort(), 5000);</code></p><h4>React —Ö—É–∫ —Å retry:</h4><p><code>function useFetchWithRetry(url, options = {}, retries = 3) {</code><br><code>&nbsp;&nbsp;const [data, setData] = useState(null);</code><br><code>&nbsp;&nbsp;const [loading, setLoading] = useState(false);</code><br><code>&nbsp;&nbsp;const [error, setError] = useState(null);</code><br><code>&nbsp;&nbsp;const controllerRef = useRef(null);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const execute = useCallback(async () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current?.abort();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current = new AbortController();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;setLoading(true);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;setError(null);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const response = await fetchWithRetry(</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;retries,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;controllerRef.current.signal</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const json = await response.json();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setData(json);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (err) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (err.name !== 'AbortError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setError(err);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} finally {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setLoading(false);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}, [url, retries]);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => controllerRef.current?.abort();</code><br><code>&nbsp;&nbsp;}, []);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return { data, loading, error, execute };</code><br><code>}</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –ù–µ–Ω–∞–¥–µ–∂–Ω—ã–µ API, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é, rate limiting, —É–ª—É—á—à–µ–Ω–∏–µ UX –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.</p>",
    difficulty: 'senior',
    tags: ['AbortController', 'retry', '–Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å', 'error handling']
  },
  {
    id: 105,
    question: "–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É AbortController –∏ –¥—Ä—É–≥–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ –æ—Ç–º–µ–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–π?",
    answer: "<p>–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–æ—Å–æ–±–æ–≤ –æ—Ç–º–µ–Ω—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–∞–∂–¥—ã–π —Å–æ —Å–≤–æ–∏–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏:</p><h4>AbortController (—Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç):</h4><p><strong>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</strong></p><ul><li>–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π Web API</li><li>–†–∞–±–æ—Ç–∞–µ—Ç —Å Fetch, ReadableStream, addEventListener</li><li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–º–µ–Ω—ã (signal.reason)</li><li>–ú–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª—ã (AbortSignal.any)</li><li>–°–æ–±—ã—Ç–∏–µ 'abort' –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏</li><li>–í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–∞—Ö</li></ul><p><strong>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:</strong></p><ul><li>–ù–µ–ª—å–∑—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ abort()</li><li>–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å setTimeout/setInterval –Ω–∞–ø—Ä—è–º—É—é</li><li>–¢—Ä–µ–±—É–µ—Ç —Ä—É—á–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ —Å—Ç–∞—Ä—ã—Ö API</li></ul><h4>Promise cancellation –ø–∞—Ç—Ç–µ—Ä–Ω—ã:</h4><p><code>// –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ - —Ñ–ª–∞–≥ –æ—Ç–º–µ–Ω—ã</code><br><code>let cancelled = false;</code><br><code></code><br><code>async function operation() {</code><br><code>&nbsp;&nbsp;if (cancelled) return;</code><br><code>&nbsp;&nbsp;await step1();</code><br><code>&nbsp;&nbsp;if (cancelled) return;</code><br><code>&nbsp;&nbsp;await step2();</code><br><code>}</code></p><p><strong>–ü—Ä–æ–±–ª–µ–º—ã:</strong></p><ul><li>–ù–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏–∏</li><li>–ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ñ–ª–∞–≥</li><li>–°–ª–æ–∂–Ω–æ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏</li><li>–ù–µ—Ç —Å–æ–±—ã—Ç–∏–π –æ—Ç–º–µ–Ω—ã</li></ul><h4>–ë–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (Bluebird, Axios):</h4><p><code>// Bluebird cancellable promises</code><br><code>const promise = new Promise((resolve) => {</code><br><code>&nbsp;&nbsp;// ...</code><br><code>}).cancellable();</code></p><p><code>promise.cancel();</code></p><p><code>// Axios CancelToken (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)</code><br><code>const CancelToken = axios.CancelToken;</code><br><code>const source = CancelToken.source();</code><br><code></code><br><code>axios.get('/api/data', {</code><br><code>&nbsp;&nbsp;cancelToken: source.token</code><br><code>});</code><br><code></code><br><code>source.cancel('Cancelled');</code></p><p><strong>–ü—Ä–æ–±–ª–µ–º—ã:</strong></p><ul><li>–ù–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏</li><li>Axios –ø–µ—Ä–µ—à–µ–ª –Ω–∞ AbortController</li><li>–†–∞–∑–Ω—ã–µ API –≤ —Ä–∞–∑–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫–∞—Ö</li></ul><h4>clearTimeout / clearInterval:</h4><p><code>const timeoutId = setTimeout(callback, 1000);</code><br><code>clearTimeout(timeoutId);</code></p><p><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</strong> –¢–æ–ª—å–∫–æ –¥–ª—è —Ç–∞–π–º–µ—Ä–æ–≤, –Ω–µ –¥–ª—è fetch/promises</p><h4>removeEventListener:</h4><p><code>element.addEventListener('click', handler);</code><br><code>element.removeEventListener('click', handler);</code></p><p><strong>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</strong> –¢–æ–ª—å–∫–æ –¥–ª—è DOM —Å–æ–±—ã—Ç–∏–π</p><h4>–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞:</h4><table><tr><th>–ú–µ—Ç–æ–¥</th><th>–°—Ç–∞–Ω–¥–∞—Ä—Ç</th><th>Fetch</th><th>–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ—Å—Ç—å</th><th>–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–º–µ–Ω—ã</th></tr><tr><td>AbortController</td><td>‚úÖ Web API</td><td>‚úÖ</td><td>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</td><td>‚úÖ</td></tr><tr><td>–§–ª–∞–≥ cancelled</td><td>‚ùå</td><td>‚ùå</td><td>‚≠ê‚≠ê</td><td>‚ùå</td></tr><tr><td>Bluebird</td><td>‚ùå</td><td>‚ùå</td><td>‚≠ê‚≠ê‚≠ê</td><td>‚úÖ</td></tr><tr><td>Axios CancelToken</td><td>‚ùå</td><td>N/A</td><td>‚≠ê‚≠ê‚≠ê</td><td>‚úÖ</td></tr><tr><td>clearTimeout</td><td>‚úÖ</td><td>‚ùå</td><td>‚≠ê</td><td>‚ùå</td></tr></table><h4>–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ AbortController:</h4><p><code>// ‚ùå –°—Ç–∞—Ä—ã–π Axios</code><br><code>const source = axios.CancelToken.source();</code><br><code>axios.get(url, { cancelToken: source.token });</code><br><code>source.cancel();</code></p><p><code>// ‚úÖ –ù–æ–≤—ã–π Axios —Å AbortController</code><br><code>const controller = new AbortController();</code><br><code>axios.get(url, { signal: controller.signal });</code><br><code>controller.abort();</code></p><h4>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ:</h4><ul><li><strong>AbortController:</strong> Fetch, –ø–æ—Ç–æ–∫–∏, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ async –æ–ø–µ—Ä–∞—Ü–∏–∏</li><li><strong>clearTimeout:</strong> –¢–æ–ª—å–∫–æ –¥–ª—è setTimeout/setInterval</li><li><strong>removeEventListener:</strong> –¢–æ–ª—å–∫–æ –¥–ª—è DOM —Å–æ–±—ã—Ç–∏–π</li><li><strong>–§–ª–∞–≥–∏:</strong> –ü—Ä–æ—Å—Ç—ã–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)</li></ul><p><em>–í—ã–≤–æ–¥:</em> AbortController ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –æ—Ç–º–µ–Ω—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –ú–∏–≥—Ä–∏—Ä—É–π—Ç–µ —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤.</p>",
    difficulty: 'middle',
    tags: ['AbortController', '—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ', '–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã', '—Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã']
  },
  {
    id: 106,
    question: "–ß—Ç–æ —Ç–∞–∫–æ–µ Web Storage API –∏ –∫–∞–∫–∏–µ –¥–≤–∞ —Ç–∏–ø–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â –æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç?",
    answer: "<p><strong>Web Storage API</strong> ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–∞—Ä –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞:</p><h4>–î–≤–∞ —Ç–∏–ø–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â:</h4><p><strong>localStorage:</strong> –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –±–µ–∑ —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –¥–∞–∂–µ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞ –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞.</p><p><strong>sessionStorage:</strong> –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ –≤—Ä–µ–º—è —Å–µ—Å—Å–∏–∏. –î–∞–Ω–Ω—ã–µ —É–¥–∞–ª—è—é—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏ –∏–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞.</p><h4>–û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</h4><ul><li>–°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API</li><li>–•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫</li><li>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ ~5-10 –ú–ë –Ω–∞ –¥–æ–º–µ–Ω</li><li>–î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ —Å —Ç–æ–≥–æ –∂–µ origin</li><li>–ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</li></ul><p><em>–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ –æ—Ç cookies:</em> Web Storage –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –∫–∞–∂–¥—ã–º HTTP-–∑–∞–ø—Ä–æ—Å–æ–º, —á—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç bandwidth.</p>",
    difficulty: 'junior',
    tags: ['Web Storage', 'localStorage', 'sessionStorage', '–æ—Å–Ω–æ–≤—ã']
  },
  {
    id: 107,
    question: "–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É localStorage –∏ sessionStorage?",
    answer: "<p>localStorage –∏ sessionStorage –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π API, –Ω–æ —Ä–∞–∑–Ω—É—é –æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∏ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏:</p><h4>localStorage:</h4><ul><li><strong>–í—Ä–µ–º—è –∂–∏–∑–Ω–∏:</strong> –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ, –¥–æ —è–≤–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è</li><li><strong>–û–±–ª–∞—Å—Ç—å:</strong> –û–±—â–∏–π –¥–ª—è –≤—Å–µ—Ö –≤–∫–ª–∞–¥–æ–∫ –∏ –æ–∫–æ–Ω –æ–¥–Ω–æ–≥–æ origin</li><li><strong>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:</strong> –û—Å—Ç–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –±—Ä–∞—É–∑–µ—Ä–∞</li><li><strong>–£–¥–∞–ª–µ–Ω–∏–µ:</strong> –¢–æ–ª—å–∫–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞</li></ul><h4>sessionStorage:</h4><ul><li><strong>–í—Ä–µ–º—è –∂–∏–∑–Ω–∏:</strong> –î–æ –∑–∞–∫—Ä—ã—Ç–∏—è –≤–∫–ª–∞–¥–∫–∏/–æ–∫–Ω–∞</li><li><strong>–û–±–ª–∞—Å—Ç—å:</strong> –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–ª—è –∫–∞–∂–¥–æ–π –≤–∫–ª–∞–¥–∫–∏</li><li><strong>–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:</strong> –£–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏</li><li><strong>–£–¥–∞–ª–µ–Ω–∏–µ:</strong> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏</li></ul><h4>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</h4><p><strong>localStorage:</strong> –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–º—ã, —è–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —Ç–æ–∫–µ–Ω—ã, preferences, –∫—ç—à –¥–∞–Ω–Ω—ã—Ö</p><p><strong>sessionStorage:</strong> –î–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ wizard'–∞, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ</p><p><em>–í–∞–∂–Ω–æ:</em> –î–∞–∂–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∫–ª–∞–¥–∫–∏ (Ctrl+Shift+T) —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π sessionStorage.</p>",
    difficulty: 'junior',
    tags: ['localStorage', 'sessionStorage', '—Ä–∞–∑–ª–∏—á–∏—è', '–æ–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç–∏']
  },
  {
    id: 108,
    question: "–ö–∞–∫–∏–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ localStorage/sessionStorage?",
    answer: "<p>Web Storage –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å <strong>—Ç–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–∏</strong>. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ç–∏–ø—ã –Ω—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å:</p><h4>–°—Ç—Ä–æ–∫–∏ ‚Äî –Ω–∞–ø—Ä—è–º—É—é:</h4><p><code>localStorage.setItem('name', 'John');</code></p><h4>–ß–∏—Å–ª–∞ ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫—É:</h4><p><code>localStorage.setItem('age', 25); // –°–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ '25'</code><br><code>const age = Number(localStorage.getItem('age')); // –û–±—Ä–∞—Ç–Ω–æ –≤ —á–∏—Å–ª–æ</code></p><h4>–ë—É–ª–µ–≤—ã –∑–Ω–∞—á–µ–Ω–∏—è ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫—É:</h4><p><code>localStorage.setItem('isActive', true); // –°–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ 'true'</code><br><code>const isActive = localStorage.getItem('isActive') === 'true';</code></p><h4>–û–±—ä–µ–∫—Ç—ã –∏ –º–∞—Å—Å–∏–≤—ã ‚Äî —á–µ—Ä–µ–∑ JSON:</h4><p><code>const user = { name: 'John', age: 25 };</code><br><code>localStorage.setItem('user', JSON.stringify(user));</code><br><code></code><br><code>const savedUser = JSON.parse(localStorage.getItem('user'));</code></p><h4>Date ‚Äî –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ ISO:</h4><p><code>const date = new Date();</code><br><code>localStorage.setItem('date', date.toISOString());</code><br><code></code><br><code>const savedDate = new Date(localStorage.getItem('date'));</code></p><h4>–ß—Ç–æ –Ω–µ–ª—å–∑—è —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å:</h4><ul><li>–§—É–Ω–∫—Ü–∏–∏ (–ø–æ—Ç–µ—Ä—è—é—Ç—Å—è –ø—Ä–∏ JSON.stringify)</li><li>Symbol (–Ω–µ —Å–µ—Ä–∏–∞–ª–∏–∑—É—é—Ç—Å—è)</li><li>undefined (–ø—Ä–µ–≤—Ä–∞—Ç–∏—Ç—Å—è –≤ —Å—Ç—Ä–æ–∫—É 'undefined')</li><li>–¶–∏–∫–ª–∏—á–µ—Å–∫–∏–µ —Å—Å—ã–ª–∫–∏ (–æ—à–∏–±–∫–∞ –ø—Ä–∏ stringify)</li></ul><p><em>Best practice:</em> –í—Å–µ–≥–¥–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ JSON.parse –≤ try-catch –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.</p>",
    difficulty: 'junior',
    tags: ['localStorage', '—Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö', 'JSON', '—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è']
  },
  {
    id: 109,
    question: "–ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ —Ä–∞–∑–º–µ—Ä Web Storage?",
    answer: "<p>–í–∞–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Storage –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:</p><h4>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏:</h4><p><code>function isStorageAvailable(type) {</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const storage = window[type];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const test = '__storage_test__';</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;storage.setItem(test, test);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;storage.removeItem(test);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return true;</code><br><code>&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return false;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>if (isStorageAvailable('localStorage')) {</code><br><code>&nbsp;&nbsp;// –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</code><br><code>}</code></p><h4>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:</h4><p><code>function getStorageSize() {</code><br><code>&nbsp;&nbsp;let total = 0;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;for (let key in localStorage) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (localStorage.hasOwnProperty(key)) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total += localStorage[key].length + key.length;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return (total / 1024).toFixed(2) + ' KB';</code><br><code>}</code></p><h4>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞:</h4><p><code>function getStorageLimit() {</code><br><code>&nbsp;&nbsp;let max = 0;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const test = '0'.repeat(1024); // 1KB</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;let i = 0;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;while (i < 10000) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem('test' + i, test);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i++;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;max = i;</code><br><code>&nbsp;&nbsp;} finally {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—á–∏—Å—Ç–∫–∞</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;for (let j = 0; j < i; j++) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.removeItem('test' + j);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return max + ' KB –ø—Ä–∏–º–µ—Ä–Ω–æ';</code><br><code>}</code></p><h4>–ü—Ä–∏—á–∏–Ω—ã –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:</h4><ul><li>–†–µ–∂–∏–º –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã)</li><li>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–ª—é—á–∏–ª Storage –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö</li><li>–•—Ä–∞–Ω–∏–ª–∏—â–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–æ (QuotaExceededError)</li><li>–°—Ç–∞—Ä—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –±–µ–∑ –ø–æ–¥–¥–µ—Ä–∂–∫–∏</li></ul><p><em>–¢–∏–ø–∏—á–Ω—ã–π –ª–∏–º–∏—Ç:</em> 5MB –¥–ª—è localStorage –∏ sessionStorage –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –±—Ä–∞—É–∑–µ—Ä–æ–≤.</p>",
    difficulty: 'middle',
    tags: ['Web Storage', '–ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏', '—Ä–∞–∑–º–µ—Ä', '–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è']
  },
  {
    id: 110,
    question: "–ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫—É QuotaExceededError –ø—Ä–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–∏ Storage?",
    answer: "<p>QuotaExceededError –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∫–æ–≥–¥–∞ Storage –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω. –í–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —ç—Ç—É –æ—à–∏–±–∫—É:</p><h4>–ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:</h4><p><code>function safeSetItem(key, value) {</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, value);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return true;</code><br><code>&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (e.name === 'QuotaExceededError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.warn('Storage full');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return false;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;throw e;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö:</h4><p><code>function setItemWithExpiry(key, value, ttl) {</code><br><code>&nbsp;&nbsp;const item = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;value: value,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;expiry: Date.now() + ttl</code><br><code>&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, JSON.stringify(item));</code><br><code>&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (e.name === 'QuotaExceededError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –û—á–∏—â–∞–µ–º –∏—Å—Ç–µ–∫—à–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cleanupExpired();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–±—É–µ–º —Å–Ω–æ–≤–∞</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, JSON.stringify(item));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (e2) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('Storage still full');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>function cleanupExpired() {</code><br><code>&nbsp;&nbsp;const now = Date.now();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;Object.keys(localStorage).forEach(key => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const item = JSON.parse(localStorage.getItem(key));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (item.expiry && item.expiry < now) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.removeItem(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ù–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ - –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><h4>LRU (Least Recently Used) —Å—Ç—Ä–∞—Ç–µ–≥–∏—è:</h4><p><code>class LRUStorage {</code><br><code>&nbsp;&nbsp;set(key, value) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const item = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastUsed: Date.now()</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, JSON.stringify(item));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (e.name === 'QuotaExceededError') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.removeLeastRecentlyUsed();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, JSON.stringify(item));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;removeLeastRecentlyUsed() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;let oldestKey = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;let oldestTime = Date.now();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;Object.keys(localStorage).forEach(key => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const item = JSON.parse(localStorage.getItem(key));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (item.lastUsed < oldestTime) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oldestTime = item.lastUsed;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oldestKey = key;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (oldestKey) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.removeItem(oldestKey);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><em>Best practice:</em> –í—Å–µ–≥–¥–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ setItem –≤ try-catch –∏ –∏–º–µ–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –æ—á–∏—Å—Ç–∫–∏.</p>",
    difficulty: 'middle',
    tags: ['Web Storage', 'QuotaExceededError', '–æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫', '–æ—á–∏—Å—Ç–∫–∞']
  },
  {
    id: 111,
    question: "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Å–æ–±—ã—Ç–∏–µ–º storage –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏?",
    answer: "<p>–°–æ–±—ã—Ç–∏–µ <code>storage</code> –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏ –æ–¥–Ω–æ–≥–æ origin:</p><h4>–ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>window.addEventListener('storage', (e) => {</code><br><code>&nbsp;&nbsp;console.log('Key:', e.key);</code><br><code>&nbsp;&nbsp;console.log('Old value:', e.oldValue);</code><br><code>&nbsp;&nbsp;console.log('New value:', e.newValue);</code><br><code>&nbsp;&nbsp;console.log('URL:', e.url);</code><br><code>&nbsp;&nbsp;console.log('Storage:', e.storageArea);</code><br><code>});</code></p><h4>–í–∞–∂–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</h4><ul><li>–°—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¢–û–õ–¨–ö–û –≤ –¥—Ä—É–≥–∏—Ö –≤–∫–ª–∞–¥–∫–∞—Ö, –Ω–µ –≤ —Ç–æ–π –≥–¥–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ</li><li>–†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è localStorage, –Ω–µ –¥–ª—è sessionStorage</li><li>e.key === null –ø—Ä–∏ –≤—ã–∑–æ–≤–µ clear()</li><li>e.oldValue –∏ e.newValue –≤—Å–µ–≥–¥–∞ —Å—Ç—Ä–æ–∫–∏</li></ul><h4>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏:</h4><p><code>// –í–æ –≤–∫–ª–∞–¥–∫–µ 1</code><br><code>function setTheme(theme) {</code><br><code>&nbsp;&nbsp;localStorage.setItem('theme', theme);</code><br><code>&nbsp;&nbsp;applyTheme(theme);</code><br><code>}</code></p><p><code>// –í–æ –≤–∫–ª–∞–¥–∫–µ 2 - –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ</code><br><code>window.addEventListener('storage', (e) => {</code><br><code>&nbsp;&nbsp;if (e.key === 'theme' && e.newValue) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;applyTheme(e.newValue);</code><br><code>&nbsp;&nbsp;}</code><br><code>});</code></p><h4>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:</h4><p><code>// Logout –≤–æ –≤—Å–µ—Ö –≤–∫–ª–∞–¥–∫–∞—Ö</code><br><code>function logout() {</code><br><code>&nbsp;&nbsp;localStorage.removeItem('token');</code><br><code>&nbsp;&nbsp;redirectToLogin();</code><br><code>}</code></p><p><code>window.addEventListener('storage', (e) => {</code><br><code>&nbsp;&nbsp;if (e.key === 'token' && !e.newValue) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –¢–æ–∫–µ–Ω —É–¥–∞–ª–µ–Ω –≤ –¥—Ä—É–≥–æ–π –≤–∫–ª–∞–¥–∫–µ</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;redirectToLogin();</code><br><code>&nbsp;&nbsp;}</code><br><code>});</code></p><h4>Broadcast —Å–æ–æ–±—â–µ–Ω–∏–π –º–µ–∂–¥—É –≤–∫–ª–∞–¥–∫–∞–º–∏:</h4><p><code>function broadcastMessage(type, data) {</code><br><code>&nbsp;&nbsp;const message = { type, data, timestamp: Date.now() };</code><br><code>&nbsp;&nbsp;localStorage.setItem('broadcast', JSON.stringify(message));</code><br><code>&nbsp;&nbsp;localStorage.removeItem('broadcast'); // –¢—Ä–∏–≥–≥–µ—Ä —Å–æ–±—ã—Ç–∏—è</code><br><code>}</code></p><p><code>window.addEventListener('storage', (e) => {</code><br><code>&nbsp;&nbsp;if (e.key === 'broadcast' && e.newValue) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const message = JSON.parse(e.newValue);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;handleMessage(message);</code><br><code>&nbsp;&nbsp;}</code><br><code>});</code></p><p><em>–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:</em> –î–ª—è –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ BroadcastChannel API.</p>",
    difficulty: 'middle',
    tags: ['storage event', '—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è', '–≤–∫–ª–∞–¥–∫–∏', '–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è']
  },
  {
    id: 112,
    question: "–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å TTL (–≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏)?",
    answer: "<p>TTL (Time To Live) –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –¥–∞–Ω–Ω—ã–µ:</p><h4>–ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:</h4><p><code>const StorageWithTTL = {</code><br><code>&nbsp;&nbsp;set(key, value, ttlMinutes) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const item = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value: value,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expiry: Date.now() + ttlMinutes * 60 * 1000</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, JSON.stringify(item));</code><br><code>&nbsp;&nbsp;},</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;get(key) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const itemStr = localStorage.getItem(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!itemStr) return null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const item = JSON.parse(itemStr);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (Date.now() > item.expiry) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.removeItem(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return item.value;</code><br><code>&nbsp;&nbsp;}</code><br><code>};</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>// –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞ 30 –º–∏–Ω—É—Ç</code><br><code>StorageWithTTL.set('sessionData', userData, 30);</code></p><p><code>// –ü–æ–ª—É—á–∏—Ç—å (–≤–µ—Ä–Ω–µ—Ç null –µ—Å–ª–∏ –∏—Å—Ç–µ–∫–ª–æ)</code><br><code>const data = StorageWithTTL.get('sessionData');</code></p><h4>–ö–ª–∞—Å—Å —Å –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫–æ–π:</h4><p><code>class CacheStorage {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.cleanup(); // –û—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;set(key, value, ttlSeconds = 3600) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const item = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;value,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expiry: Date.now() + ttlSeconds * 1000</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, JSON.stringify(item));</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;get(key) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const itemStr = localStorage.getItem(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!itemStr) return null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const item = JSON.parse(itemStr);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (Date.now() > item.expiry) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.remove(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return item.value;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.remove(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;remove(key) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;localStorage.removeItem(key);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;cleanup() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const now = Date.now();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;Object.keys(localStorage).forEach(key => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const item = JSON.parse(localStorage.getItem(key));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (item.expiry && item.expiry < now) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.remove(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><em>Best practice:</em> –ó–∞–ø—É—Å–∫–∞–π—Ç–µ cleanup() –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∏—Å—Ç–µ–∫—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.</p>",
    difficulty: 'middle',
    tags: ['Web Storage', 'TTL', '–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ', 'expiry']
  },
  {
    id: 113,
    question: "–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É Web Storage –∏ Cookies?",
    answer: "<p>Web Storage –∏ Cookies —Ä–µ—à–∞—é—Ç –ø–æ—Ö–æ–∂–∏–µ –∑–∞–¥–∞—á–∏, –Ω–æ –∏–º–µ—é—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è:</p><h4>Web Storage (localStorage/sessionStorage):</h4><ul><li><strong>–†–∞–∑–º–µ—Ä:</strong> ~5-10 –ú–ë</li><li><strong>–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:</strong> –ù–∏–∫–æ–≥–¥–∞, —Ç–æ–ª—å–∫–æ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è —Å—Ç–æ—Ä–æ–Ω–∞</li><li><strong>API:</strong> –ü—Ä–æ—Å—Ç–æ–π –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π</li><li><strong>–î–æ—Å—Ç—É–ø:</strong> –¢–æ–ª—å–∫–æ JavaScript</li><li><strong>–°—Ä–æ–∫ –∂–∏–∑–Ω–∏:</strong> localStorage - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ, sessionStorage - –¥–æ –∑–∞–∫—Ä—ã—Ç–∏—è –≤–∫–ª–∞–¥–∫–∏</li></ul><h4>Cookies:</h4><ul><li><strong>–†–∞–∑–º–µ—Ä:</strong> ~4 –ö–ë</li><li><strong>–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:</strong> –° –∫–∞–∂–¥—ã–º HTTP-–∑–∞–ø—Ä–æ—Å–æ–º</li><li><strong>API:</strong> –°—Ç—Ä–æ–∫–∞ document.cookie, –Ω–µ—É–¥–æ–±–Ω—ã–π</li><li><strong>–î–æ—Å—Ç—É–ø:</strong> JavaScript –∏ —Å–µ—Ä–≤–µ—Ä</li><li><strong>–°—Ä–æ–∫ –∂–∏–∑–Ω–∏:</strong> –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ expires/max-age</li><li><strong>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:</strong> HttpOnly, Secure, SameSite —Ñ–ª–∞–≥–∏</li></ul><h4>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</h4><p><strong>Web Storage:</strong></p><ul><li>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ UI (—Ç–µ–º–∞, —è–∑—ã–∫)</li><li>–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö</li><li>–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</li><li>–ë–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã –¥–∞–Ω–Ω—ã—Ö</li></ul><p><strong>Cookies:</strong></p><ul><li>–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (—Ç–æ–∫–µ–Ω—ã)</li><li>–°–µ—Å—Å–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</li><li>Tracking –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞</li><li>–î–∞–Ω–Ω—ã–µ, –Ω—É–∂–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—É</li></ul><h4>–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</h4><p>Web Storage –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç cookies –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Å –∫–∞–∂–¥—ã–º –∑–∞–ø—Ä–æ—Å–æ–º.</p><p><em>–í—ã–≤–æ–¥:</em> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Web Storage –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, cookies - –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏.</p>",
    difficulty: 'middle',
    tags: ['Web Storage', 'Cookies', '—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ', '—Ä–∞–∑–ª–∏—á–∏—è']
  },
  {
    id: 114,
    question: "–ö–∞–∫–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç best practices –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Web Storage?",
    answer: "<p>–°–ª–µ–¥–æ–≤–∞–Ω–∏–µ best practices –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</p><h4>1. –í—Å–µ–≥–¥–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –≤ try-catch:</h4><p><code>try {</code><br><code>&nbsp;&nbsp;localStorage.setItem('key', 'value');</code><br><code>} catch (e) {</code><br><code>&nbsp;&nbsp;// QuotaExceededError –∏–ª–∏ –¥—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏</code><br><code>}</code></p><h4>2. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å:</h4><p><code>if (typeof Storage !== 'undefined') {</code><br><code>&nbsp;&nbsp;// Storage –¥–æ—Å—Ç—É–ø–µ–Ω</code><br><code>}</code></p><h4>3. –ù–µ —Ö—Ä–∞–Ω–∏—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:</h4><p>‚ùå –ù–ï —Ö—Ä–∞–Ω–∏—Ç—å: –ø–∞—Ä–æ–ª–∏, –Ω–æ–º–µ—Ä–∞ –∫–∞—Ä—Ç, SSN, –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏</p><p>‚úÖ –ú–æ–∂–Ω–æ: –ø—É–±–ª–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –∫—ç—à, UI —Å–æ—Å—Ç–æ—è–Ω–∏–µ</p><h4>4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã –¥–ª—è –∫–ª—é—á–µ–π:</h4><p><code>const APP_PREFIX = 'myapp_';</code><br><code>localStorage.setItem(APP_PREFIX + 'theme', 'dark');</code></p><h4>5. –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —á—Ç–µ–Ω–∏–∏:</h4><p><code>function safeGetItem(key) {</code><br><code>&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const item = localStorage.getItem(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return item ? JSON.parse(item) : null;</code><br><code>&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;localStorage.removeItem(key); // –£–¥–∞–ª—è–µ–º –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return null;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>6. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:</h4><p><code>function setItemIfFits(key, value) {</code><br><code>&nbsp;&nbsp;const str = JSON.stringify(value);</code><br><code>&nbsp;&nbsp;if (str.length > 1024 * 1024) { // > 1MB</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.warn('Data too large');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return false;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;localStorage.setItem(key, str);</code><br><code>}</code></p><h4>7. –û—á–∏—â–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ:</h4><p><code>// –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</code><br><code>function cleanupOldData() {</code><br><code>&nbsp;&nbsp;const thirtyDaysAgo = Date.now() - 30 * 24 * 60 * 60 * 1000;</code><br><code>&nbsp;&nbsp;// –õ–æ–≥–∏–∫–∞ –æ—á–∏—Å—Ç–∫–∏...</code><br><code>}</code></p><h4>8. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ namespace:</h4><p><code>const storage = {</code><br><code>&nbsp;&nbsp;prefix: 'myapp_',</code><br><code>&nbsp;&nbsp;set(key, value) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(this.prefix + key, JSON.stringify(value));</code><br><code>&nbsp;&nbsp;},</code><br><code>&nbsp;&nbsp;get(key) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return JSON.parse(localStorage.getItem(this.prefix + key));</code><br><code>&nbsp;&nbsp;}</code><br><code>};</code></p><h4>9. –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —á–∞—Å—Ç–æ—Ç—É –∑–∞–ø–∏—Å–∏:</h4><p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ debounce –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, —Ç–∞–∫ –∫–∞–∫ Storage –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ.</p><h4>10. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö:</h4><p>–í–µ–¥–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∫–∞–∫–∏–µ –∫–ª—é—á–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∏ –∏—Ö —Ñ–æ—Ä–º–∞—Ç.</p><p><em>–ö—Ä–∏—Ç–∏—á–Ω–æ:</em> Storage –¥–æ—Å—Ç—É–ø–µ–Ω –ª—é–±–æ–º—É JavaScript –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ - –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã!</p>",
    difficulty: 'senior',
    tags: ['Web Storage', 'best practices', '–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å']
  },
  {
    id: 115,
    question: "–ö–∞–∫–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã Web Storage –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö?",
    answer: "<p>–°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤ Web Storage –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:</p><h4>1. IndexedDB:</h4><p><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong> –ë–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (>10MB), –æ—Ñ–ª–∞–π–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p><p><strong>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</strong></p><ul><li>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä</li><li>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API</li><li>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π</li><li>–•—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –±–µ–∑ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏</li></ul><p><strong>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:</strong> –°–ª–æ–∂–Ω—ã–π API</p><h4>2. Cache API:</h4><p><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong> –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤, –æ—Ñ–ª–∞–π–Ω PWA</p><p><strong>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</strong></p><ul><li>–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è Response –æ–±—ä–µ–∫—Ç–æ–≤</li><li>–†–∞–±–æ—Ç–∞–µ—Ç —Å Service Workers</li><li>–ë–æ–ª—å—à–æ–π —Ä–∞–∑–º–µ—Ä</li></ul><h4>3. Cookies:</h4><p><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong> –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–∞</p><p><strong>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</strong></p><ul><li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä</li><li>HttpOnly –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</li><li>–ö–æ–Ω—Ç—Ä–æ–ª—å —Å—Ä–æ–∫–∞ –∂–∏–∑–Ω–∏</li></ul><p><strong>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:</strong> –ú–∞–ª–µ–Ω—å–∫–∏–π —Ä–∞–∑–º–µ—Ä (4KB)</p><h4>4. File System Access API:</h4><p><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong> –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π, —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã</p><p><strong>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</strong> –î–æ—Å—Ç—É–ø –∫ —Ä–µ–∞–ª—å–Ω—ã–º —Ñ–∞–π–ª–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</p><h4>5. WebSQL (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π):</h4><p><strong>–°—Ç–∞—Ç—É—Å:</strong> Deprecated, –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å</p><h4>6. Memory (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ):</h4><p><strong>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</strong> –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ä–∞–º–∫–∞—Ö —Å–µ—Å—Å–∏–∏</p><p><strong>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:</strong> –¢–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</p><h4>–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞:</h4><table><tr><th>–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è</th><th>–†–∞–∑–º–µ—Ä</th><th>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å</th><th>–°–ª–æ–∂–Ω–æ—Å—Ç—å</th></tr><tr><td>localStorage</td><td>~5MB</td><td>‚ùå</td><td>‚≠ê</td></tr><tr><td>IndexedDB</td><td>–ë–æ–ª—å—à–æ–π</td><td>‚úÖ</td><td>‚≠ê‚≠ê‚≠ê‚≠ê</td></tr><tr><td>Cache API</td><td>–ë–æ–ª—å—à–æ–π</td><td>‚úÖ</td><td>‚≠ê‚≠ê‚≠ê</td></tr><tr><td>Cookies</td><td>4KB</td><td>‚ùå</td><td>‚≠ê‚≠ê</td></tr></table><p><em>–í—ã–±–æ—Ä –∑–∞–≤–∏—Å–∏—Ç:</em> –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –Ω—É–∂–Ω—ã –ª–∏ –æ–Ω–∏ —Å–µ—Ä–≤–µ—Ä—É, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ª–∏ –æ—Ñ–ª–∞–π–Ω –¥–æ—Å—Ç—É–ø.</p>",
    difficulty: 'middle',
    tags: ['Web Storage', '–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã', 'IndexedDB', 'Cache API']
  },
  {
    id: 116,
    question: "–ö–∞–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏?",
    answer: "<p>–•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –≤–æ–ø—Ä–æ—Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</p><h4>–í–∞—Ä–∏–∞–Ω—Ç—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è:</h4><p><strong>1. HttpOnly Cookies (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø):</strong></p><p>‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</p><ul><li>–ù–µ–¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è JavaScript (–∑–∞—â–∏—Ç–∞ –æ—Ç XSS)</li><li>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä</li><li>Secure —Ñ–ª–∞–≥ –¥–ª—è HTTPS only</li><li>SameSite –∑–∞—â–∏—Ç–∞ –æ—Ç CSRF</li></ul><p>‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏: –ù—É–∂–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ</p><p><strong>2. localStorage (–ù–ï –†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø):</strong></p><p>‚ùå –ü—Ä–æ–±–ª–µ–º—ã:</p><ul><li>–î–æ—Å—Ç—É–ø–µ–Ω –ª—é–±–æ–º—É JavaScript (—É—è–∑–≤–∏–º –∫ XSS)</li><li>–ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∫—Ä–∞–∂–∏ —Ç–æ–∫–µ–Ω–∞</li><li>–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ</li></ul><p>‚úÖ –ö–æ–≥–¥–∞ –º–æ–∂–Ω–æ: SPA –±–µ–∑ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞, –∫—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã</p><p><strong>3. sessionStorage (–ö–û–ú–ü–†–û–ú–ò–°–°):</strong></p><p>–ß—É—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ localStorage, —Ç–∞–∫ –∫–∞–∫ —É–¥–∞–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –≤–∫–ª–∞–¥–∫–∏, –Ω–æ –≤—Å–µ –µ—â–µ —É—è–∑–≤–∏–º –∫ XSS.</p><p><strong>4. Memory (–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π):</strong></p><p>‚úÖ –°–∞–º–æ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞</p><p>‚ùå –¢–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã</p><h4>Best practices:</h4><p><code>// ‚ùå –ü–õ–û–•–û - —Ç–æ–∫–µ–Ω –≤ localStorage</code><br><code>localStorage.setItem('token', token);</code></p><p><code>// ‚úÖ –õ–£–ß–®–ï - HttpOnly cookie (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)</code><br><code>// Set-Cookie: token=xxx; HttpOnly; Secure; SameSite=Strict</code></p><p><code>// ‚úÖ –ö–û–ú–ü–†–û–ú–ò–°–° - –∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏–µ —Ç–æ–∫–µ–Ω—ã</code><br><code>sessionStorage.setItem('token', token);</code><br><code>// + Refresh token –≤ HttpOnly cookie</code></p><h4>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:</h4><ul><li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Ä–æ–∫–∏ –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–æ–≤</li><li>Implement token rotation</li><li>–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ fingerprint –±—Ä–∞—É–∑–µ—Ä–∞</li><li>–õ–æ–≥–∏—Ä—É–π—Ç–µ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</li><li>CSP –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç XSS</li></ul><p><em>–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:</em> –ï—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ HttpOnly cookies. –ï—Å–ª–∏ –Ω–µ—Ç - sessionStorage —Å –∫–æ—Ä–æ—Ç–∫–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏ –∏ refresh –º–µ—Ö–∞–Ω–∏–∑–º–æ–º.</p>",
    difficulty: 'senior',
    tags: ['–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å', '—Ç–æ–∫–µ–Ω—ã', '–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è', 'XSS']
  },
  {
    id: 117,
    question: "–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ Storage?",
    answer: "<p>–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö:</p><h4>–ë–∞–∑–æ–≤–∞—è —Å—Ö–µ–º–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:</h4><p><code>const STORAGE_VERSION = 2;</code></p><p><code>function saveData(key, data) {</code><br><code>&nbsp;&nbsp;const versioned = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;version: STORAGE_VERSION,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;data: data</code><br><code>&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;localStorage.setItem(key, JSON.stringify(versioned));</code><br><code>}</code></p><p><code>function loadData(key) {</code><br><code>&nbsp;&nbsp;const item = localStorage.getItem(key);</code><br><code>&nbsp;&nbsp;if (!item) return null;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const parsed = JSON.parse(item);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏</code><br><code>&nbsp;&nbsp;if (parsed.version !== STORAGE_VERSION) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return migrateData(parsed, key);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return parsed.data;</code><br><code>}</code></p><h4>–ú–∏–≥—Ä–∞—Ü–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏:</h4><p><code>function migrateData(oldData, key) {</code><br><code>&nbsp;&nbsp;const version = oldData.version || 1;</code><br><code>&nbsp;&nbsp;let data = oldData.data;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –ú–∏–≥—Ä–∞—Ü–∏—è —Å –≤–µ—Ä—Å–∏–∏ 1 –Ω–∞ 2</code><br><code>&nbsp;&nbsp;if (version === 1) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;data = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...data,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newField: 'defaultValue'</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</code><br><code>&nbsp;&nbsp;saveData(key, data);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return data;</code><br><code>}</code></p><h4>–ö–ª–∞—Å—Å —Å –∞–≤—Ç–æ–º–∏–≥—Ä–∞—Ü–∏–µ–π:</h4><p><code>class VersionedStorage {</code><br><code>&nbsp;&nbsp;constructor(version, migrations = {}) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.version = version;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.migrations = migrations;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;set(key, data) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const item = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version: this.version,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, JSON.stringify(item));</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;get(key) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const item = localStorage.getItem(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!item) return null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;let parsed = JSON.parse(item);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const itemVersion = parsed.version || 1;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–∏–º–µ–Ω—è–µ–º –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;for (let v = itemVersion; v < this.version; v++) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const migration = this.migrations[v];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (migration) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parsed.data = migration(parsed.data);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –°–æ—Ö—Ä–∞–Ω—è–µ–º –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (itemVersion < this.version) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.set(key, parsed.data);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return parsed.data;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const storage = new VersionedStorage(3, {</code><br><code>&nbsp;&nbsp;1: (data) => ({ ...data, newField: 'default' }),</code><br><code>&nbsp;&nbsp;2: (data) => ({ ...data, renamedField: data.oldField })</code><br><code>});</code></p><p><code>storage.set('userData', { name: 'John' });</code><br><code>const data = storage.get('userData'); // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è</code></p><p><em>Best practice:</em> –í—Å–µ–≥–¥–∞ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω—è–π—Ç–µ backup –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º.</p>",
    difficulty: 'senior',
    tags: ['–≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ', '–º–∏–≥—Ä–∞—Ü–∏—è', '–¥–∞–Ω–Ω—ã–µ', '–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞']
  },
  {
    id: 118,
    question: "–ö–∞–∫ –æ—Ç–ª–∞–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å Web Storage –≤ DevTools?",
    answer: "<p>Chrome DevTools –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –º–æ—â–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Storage:</p><h4>Application Tab ‚Üí Storage:</h4><p><strong>–ü—Ä–æ—Å–º–æ—Ç—Ä –¥–∞–Ω–Ω—ã—Ö:</strong></p><ul><li>Application ‚Üí Local Storage / Session Storage</li><li>–í–∏–¥–Ω—ã –≤—Å–µ –∫–ª—é—á–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏—è</li><li>–ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é</li><li>–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞</li></ul><p><strong>–û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö:</strong></p><ul><li>–ü–ö–ú –Ω–∞ –¥–æ–º–µ–Ω–µ ‚Üí Clear</li><li>–ò–ª–∏ –∫–Ω–æ–ø–∫–∞ ¬´Clear All¬ª –¥–ª—è –≤—Å–µ–≥–æ Storage</li></ul><h4>Console –º–µ—Ç–æ–¥—ã:</h4><p><code>// –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –∫–ª—é—á–µ–π</code><br><code>console.table(localStorage);</code></p><p><code>// –†–∞–∑–º–µ—Ä Storage</code><br><code>let size = 0;</code><br><code>for (let key in localStorage) {</code><br><code>&nbsp;&nbsp;size += localStorage[key].length + key.length;</code><br><code>}</code><br><code>console.log(size / 1024 + ' KB');</code></p><p><code>// –ü–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–∞–º</code><br><code>Object.keys(localStorage).filter(key => key.includes('user'));</code></p><h4>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π:</h4><p><code>// –ü–µ—Ä–µ—Ö–≤–∞—Ç setItem</code><br><code>const originalSetItem = localStorage.setItem;</code><br><code>localStorage.setItem = function(key, value) {</code><br><code>&nbsp;&nbsp;console.log('Storage set:', key, value);</code><br><code>&nbsp;&nbsp;originalSetItem.apply(this, arguments);</code><br><code>};</code></p><h4>Breakpoints –Ω–∞ Storage:</h4><ul><li>Sources ‚Üí Event Listener Breakpoints</li><li>–í—ã–±—Ä–∞—Ç—å ¬´storage¬ª –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π</li></ul><h4>Network Tab:</h4><p>–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–∞–∑–º–µ—Ä cookies –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ - –∏–Ω–æ–≥–¥–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å Storage —Å–≤—è–∑–∞–Ω—ã —Å –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ–º cookies.</p><h4>–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:</h4><p><strong>1. QuotaExceededError:</strong> –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö, –æ—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ</p><p><strong>2. –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è:</strong> –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∂–∏–º –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞</p><p><strong>3. –î–∞–Ω–Ω—ã–µ –ø—Ä–æ–ø–∞–¥–∞—é—Ç:</strong> –ü—Ä–æ–≤–µ—Ä—å—Ç–µ sessionStorage vs localStorage</p><p><strong>4. JSON.parse –æ—à–∏–±–∫–∞:</strong> –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –ø–∞—Ä—Å–∏–Ω–≥–æ–º</p><p><em>–°–æ–≤–µ—Ç:</em> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ console.table() –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö Storage.</p>",
    difficulty: 'middle',
    tags: ['–æ—Ç–ª–∞–¥–∫–∞', 'DevTools', 'Chrome', 'debugging']
  },
  {
    id: 119,
    question: "–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Storage —Å —Å–∂–∞—Ç–∏–µ–º –¥–∞–Ω–Ω—ã—Ö?",
    answer: "<p>–°–∂–∞—Ç–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–æ–π—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ Storage:</p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LZ-based –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤:</h4><p><code>// –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É lz-string</code><br><code>import LZString from 'lz-string';</code></p><p><code>const CompressedStorage = {</code><br><code>&nbsp;&nbsp;set(key, data) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const json = JSON.stringify(data);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const compressed = LZString.compress(json);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, compressed);</code><br><code>&nbsp;&nbsp;},</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;get(key) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const compressed = localStorage.getItem(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!compressed) return null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const json = LZString.decompress(compressed);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return JSON.parse(json);</code><br><code>&nbsp;&nbsp;}</code><br><code>};</code></p><h4>–ö–ª–∞—Å—Å —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–∂–∞—Ç–∏–µ–º:</h4><p><code>class SmartStorage {</code><br><code>&nbsp;&nbsp;constructor(compressionThreshold = 1024) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.threshold = compressionThreshold;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;set(key, data) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const json = JSON.stringify(data);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –°–∂–∏–º–∞–µ–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –±–æ–ª—å—à–µ –ø–æ—Ä–æ–≥–∞</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (json.length > this.threshold) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const compressed = LZString.compress(json);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, 'compressed:' + compressed);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} else {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, json);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;get(key) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const item = localStorage.getItem(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!item) return null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–µ—Ñ–∏–∫—Å —Å–∂–∞—Ç–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (item.startsWith('compressed:')) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const compressed = item.slice(11);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const json = LZString.decompress(compressed);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return JSON.parse(json);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return JSON.parse(item);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∂–∞—Ç–∏—è:</h4><p><code>function compressionStats(data) {</code><br><code>&nbsp;&nbsp;const json = JSON.stringify(data);</code><br><code>&nbsp;&nbsp;const compressed = LZString.compress(json);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const original = json.length;</code><br><code>&nbsp;&nbsp;const compressed = compressed.length;</code><br><code>&nbsp;&nbsp;const ratio = ((1 - compressed / original) * 100).toFixed(2);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;console.log(\`Original: \${original} bytes\`);</code><br><code>&nbsp;&nbsp;console.log(\`Compressed: \${compressed} bytes\`);</code><br><code>&nbsp;&nbsp;console.log(\`Saved: \${ratio}%\`);</code><br><code>}</code></p><h4>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</h4><ul><li>–ú–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ 2-10 —Ä–∞–∑ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö</li><li>–û—Å–æ–±–µ–Ω–Ω–æ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –¥–ª—è —Ç–µ–∫—Å—Ç–∞ –∏ JSON</li><li>–ü—Ä–æ–∑—Ä–∞—á–Ω–æ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞</li></ul><h4>–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:</h4><ul><li>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ —Å–∂–∞—Ç–∏–µ/—Ä–∞—Å–ø–∞–∫–æ–≤–∫—É</li><li>–ù—É–∂–Ω–∞ –≤–Ω–µ—à–Ω—è—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞</li><li>–ù–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö–æ—Ä–æ—à–æ —Å–∂–∏–º–∞—é—Ç—Å—è</li></ul><p><em>Best practice:</em> –°–∂–∏–º–∞–π—Ç–µ —Ç–æ–ª—å–∫–æ –±–æ–ª—å—à–∏–µ –æ–±—ä–µ–∫—Ç—ã (>1KB) –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.</p>",
    difficulty: 'senior',
    tags: ['—Å–∂–∞—Ç–∏–µ', '–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', '—Ä–∞–∑–º–µ—Ä']
  },
  {
    id: 120,
    question: "–ö–∞–∫ –∏–º–∏—Ç–∏—Ä–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API –¥–ª—è Storage?",
    answer: "<p>Web Storage —Å–∏–Ω—Ö—Ä–æ–Ω–µ–Ω, –Ω–æ –∏–Ω–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —Å –¥—Ä—É–≥–∏–º–∏ Storage API:</p><h4>Promise-based –æ–±–µ—Ä—Ç–∫–∞:</h4><p><code>const AsyncStorage = {</code><br><code>&nbsp;&nbsp;async getItem(key) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return new Promise((resolve) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const value = localStorage.getItem(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve(value ? JSON.parse(value) : null);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;},</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async setItem(key, value) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return new Promise((resolve, reject) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.setItem(key, JSON.stringify(value));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reject(e);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;},</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async removeItem(key) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return new Promise((resolve) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.removeItem(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>};</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>// –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å—Ç–∏–ª—å</code><br><code>await AsyncStorage.setItem('user', { name: 'John' });</code><br><code>const user = await AsyncStorage.getItem('user');</code></p><h4>–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∞–¥–∞–ø—Ç–µ—Ä:</h4><p><code>class StorageAdapter {</code><br><code>&nbsp;&nbsp;constructor(storage = localStorage) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.storage = storage;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async get(key) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const item = this.storage.getItem(key);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return item ? JSON.parse(item) : null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async set(key, value) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.storage.setItem(key, JSON.stringify(value));</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async delete(key) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.storage.removeItem(key);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async clear() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.storage.clear();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async keys() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return Object.keys(this.storage);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ó–∞—á–µ–º –Ω—É–∂–µ–Ω –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API:</h4><ul><li>–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å —Å IndexedDB –∏ Cache API</li><li>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—É–¥—É—â–µ–π –∑–∞–º–µ–Ω—ã –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ</li><li>–£–ø—Ä–æ—â–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –º–æ–∫–∞–º–∏</li><li>–ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –∫–æ–¥</li></ul><h4>–ü–æ–ª–∏—Ñ–∏–ª–ª –¥–ª—è React Native AsyncStorage:</h4><p><code>const AsyncStorage = {</code><br><code>&nbsp;&nbsp;getItem: (key) => Promise.resolve(localStorage.getItem(key)),</code><br><code>&nbsp;&nbsp;setItem: (key, value) => Promise.resolve(localStorage.setItem(key, value)),</code><br><code>&nbsp;&nbsp;removeItem: (key) => Promise.resolve(localStorage.removeItem(key)),</code><br><code>&nbsp;&nbsp;clear: () => Promise.resolve(localStorage.clear())</code><br><code>};</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –û–±–ª–µ–≥—á–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—é –∫–æ–¥–∞ –º–µ–∂–¥—É web –∏ React Native, —Å–æ–∑–¥–∞–µ—Ç –µ–¥–∏–Ω—ã–π API.</p>",
    difficulty: 'middle',
    tags: ['–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å', 'Promise', '–∞–¥–∞–ø—Ç–µ—Ä', 'API']
  },
  {
    id: 121,
    question: "–ß—Ç–æ —Ç–∞–∫–æ–µ requestAnimationFrame –∏ –¥–ª—è —á–µ–≥–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?",
    answer: "<p><strong>requestAnimationFrame</strong> ‚Äî —ç—Ç–æ Web API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–ª–∞–≤–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å —á–∞—Å—Ç–æ—Ç–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞:</p><h4>–û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</h4><p>–ü–æ–∑–≤–æ–ª—è–µ—Ç –±—Ä–∞—É–∑–µ—Ä—É –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏, –≤—ã–∑—ã–≤–∞—è callback –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–µ–π –ø–µ—Ä–µ—Ä–∏—Å–æ–≤–∫–æ–π —ç–∫—Ä–∞–Ω–∞, –æ–±—ã—á–Ω–æ 60 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É (60 FPS).</p><h4>–ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>function animate() {</code><br><code>&nbsp;&nbsp;// –õ–æ–≥–∏–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏</code><br><code>&nbsp;&nbsp;element.style.left = position + 'px';</code><br><code>&nbsp;&nbsp;position += 1;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –ó–∞–ø—Ä–æ—Å —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–∞–¥—Ä–∞</code><br><code>&nbsp;&nbsp;requestAnimationFrame(animate);</code><br><code>}</code><br><code></code><br><code>// –ó–∞–ø—É—Å–∫ –∞–Ω–∏–º–∞—Ü–∏–∏</code><br><code>requestAnimationFrame(animate);</code></p><h4>–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:</h4><ul><li><strong>–ê–Ω–∏–º–∞—Ü–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤:</strong> –ü–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞</li><li><strong>Canvas/WebGL:</strong> –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≥—Ä–∞—Ñ–∏–∫–∏</li><li><strong>–ò–≥—Ä—ã:</strong> –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª</li><li><strong>–ü–∞—Ä–∞–ª–ª–∞–∫—Å —ç—Ñ—Ñ–µ–∫—Ç—ã:</strong> –°–∫—Ä–æ–ª–ª-–∞–Ω–∏–º–∞—Ü–∏–∏</li><li><strong>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:</strong> –ì—Ä–∞—Ñ–∏–∫–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</li></ul><h4>–í–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:</h4><p><code>const requestId = requestAnimationFrame(callback);</code><br><code>// –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å —á–µ—Ä–µ–∑:</code><br><code>cancelAnimationFrame(requestId);</code></p><p><em>–ö–ª—é—á–µ–≤–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ:</em> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –≤ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤.</p>",
    difficulty: 'junior',
    tags: ['requestAnimationFrame', '–æ—Å–Ω–æ–≤—ã', '–∞–Ω–∏–º–∞—Ü–∏–∏', 'Web API']
  },

  {
    id: 122,
    question: "–ö–∞–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–º–µ–µ—Ç requestAnimationFrame –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å setInterval/setTimeout?",
    answer: "<p>requestAnimationFrame (rAF) –∏–º–µ–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –Ω–∞–¥ —Ç–∞–π–º–µ—Ä–∞–º–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π:</p><h4>1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –º–æ–Ω–∏—Ç–æ—Ä–æ–º:</h4><p><strong>rAF:</strong> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å —á–∞—Å—Ç–æ—Ç–æ–π –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞ (–æ–±—ã—á–Ω–æ 60Hz)</p><p><strong>setInterval:</strong> –ú–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è —á–∞—â–µ –∏–ª–∏ —Ä–µ–∂–µ, —á–µ–º –Ω—É–∂–Ω–æ, —Å–æ–∑–¥–∞–≤–∞—è —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é</p><h4>2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞:</h4><p><strong>rAF:</strong> –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö</p><p><strong>setInterval:</strong> –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ–æ–Ω–µ, —Ç—Ä–∞—Ç—è —Ä–µ—Å—É—Ä—Å—ã</p><h4>3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞—Ç—á–∏–Ω–≥–∞:</h4><p><strong>rAF:</strong> –í—Å–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –≤ –æ–¥–∏–Ω repaint</p><p><strong>setInterval:</strong> –ú–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ reflow/repaint</p><h4>4. –¢–æ—á–Ω–æ—Å—Ç—å —Ç–∞–π–º–∏–Ω–≥–∞:</h4><p><code>// ‚ùå setInterval - –º–æ–∂–µ—Ç –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∏</code><br><code>setInterval(() => animate(), 16); // ~60fps</code></p><p><code>// ‚úÖ rAF - –≤—Å–µ–≥–¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω</code><br><code>function animate() {</code><br><code>&nbsp;&nbsp;// –∞–Ω–∏–º–∞—Ü–∏—è</code><br><code>&nbsp;&nbsp;requestAnimationFrame(animate);</code><br><code>}</code></p><h4>5. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</h4><ul><li><strong>CPU:</strong> –ù–∞ 50-80% –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∏</li><li><strong>–ë–∞—Ç–∞—Ä–µ—è:</strong> –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —ç–∫–æ–Ω–æ–º–Ω–µ–µ</li><li><strong>–ü–ª–∞–≤–Ω–æ—Å—Ç—å:</strong> –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤</li></ul><h4>6. API –¥–ª—è timestamp:</h4><p>rAF –ø–µ—Ä–µ–¥–∞–µ—Ç –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω—ã–π timestamp –≤ callback, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ time-based –∞–Ω–∏–º–∞—Ü–∏–π.</p><p><em>–í—ã–≤–æ–¥:</em> –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ requestAnimationFrame –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π –≤–º–µ—Å—Ç–æ setInterval/setTimeout.</p>",
    difficulty: 'middle',
    tags: ['requestAnimationFrame', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', '—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ', '–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è']
  },

  {
    id: 123,
    question: "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç timestamp –≤ requestAnimationFrame –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω?",
    answer: "<p>Callback requestAnimationFrame –ø–æ–ª—É—á–∞–µ—Ç –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω—ã–π timestamp - –≤—Ä–µ–º—è –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö —Å –º–æ–º–µ–Ω—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã:</p><h4>–ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>function animate(timestamp) {</code><br><code>&nbsp;&nbsp;console.log('Current time:', timestamp);</code><br><code>&nbsp;&nbsp;// timestamp ‚âà 1234.567890123</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;requestAnimationFrame(animate);</code><br><code>}</code><br><code></code><br><code>requestAnimationFrame(animate);</code></p><h4>Time-based –∞–Ω–∏–º–∞—Ü–∏–∏:</h4><p><code>let startTime = null;</code><br><code>const duration = 2000; // 2 —Å–µ–∫—É–Ω–¥—ã</code></p><p><code>function animate(timestamp) {</code><br><code>&nbsp;&nbsp;if (!startTime) startTime = timestamp;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const elapsed = timestamp - startTime;</code><br><code>&nbsp;&nbsp;const progress = Math.min(elapsed / duration, 1);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –æ—Ç 0 –¥–æ 300px –∑–∞ 2 —Å–µ–∫—É–Ω–¥—ã</code><br><code>&nbsp;&nbsp;element.style.left = (progress * 300) + 'px';</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;if (progress < 1) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ó–∞—á–µ–º –Ω—É–∂–µ–Ω timestamp:</h4><ul><li><strong>–ù–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç FPS:</strong> –ê–Ω–∏–º–∞—Ü–∏—è –æ–¥–∏–Ω–∞–∫–æ–≤–∞ –Ω–∞ –ª—é–±–æ–π —á–∞—Å—Ç–æ—Ç–µ</li><li><strong>–ü–ª–∞–≤–Ω–æ—Å—Ç—å:</strong> –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∫–∞–¥—Ä–æ–≤</li><li><strong>–¢–æ—á–Ω–æ—Å—Ç—å:</strong> –í—ã—Å–æ–∫–æ—Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è (DOMHighResTimeStamp)</li><li><strong>–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:</strong> –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∞–Ω–∏–º–∞—Ü–∏–π</li></ul><h4>Delta time –ø–∞—Ç—Ç–µ—Ä–Ω:</h4><p><code>let lastTime = 0;</code></p><p><code>function animate(timestamp) {</code><br><code>&nbsp;&nbsp;const deltaTime = timestamp - lastTime;</code><br><code>&nbsp;&nbsp;lastTime = timestamp;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// –°–∫–æ—Ä–æ—Å—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞ –æ—Ç FPS</code><br><code>&nbsp;&nbsp;position += velocity * (deltaTime / 1000);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;requestAnimationFrame(animate);</code><br><code>}</code></p><p><em>Best practice:</em> –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ timestamp –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ –ø–æ–¥—Å—á–µ—Ç–∞ –∫–∞–¥—Ä–æ–≤.</p>",
    difficulty: 'middle',
    tags: ['requestAnimationFrame', 'timestamp', 'time-based', 'delta time']
  },

  {
    id: 124,
    question: "–ö–∞–∫ –æ—Ç–º–µ–Ω–∏—Ç—å requestAnimationFrame?",
    answer: "<p>–û—Ç–º–µ–Ω–∞ –∞–Ω–∏–º–∞—Ü–∏–∏ –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –∏ –Ω–µ–Ω—É–∂–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π:</p><h4>–ë–∞–∑–æ–≤–∞—è –æ—Ç–º–µ–Ω–∞:</h4><p><code>let animationId;</code></p><p><code>function animate() {</code><br><code>&nbsp;&nbsp;// –õ–æ–≥–∏–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏</code><br><code>&nbsp;&nbsp;animationId = requestAnimationFrame(animate);</code><br><code>}</code></p><p><code>// –ó–∞–ø—É—Å–∫</code><br><code>animationId = requestAnimationFrame(animate);</code></p><p><code>// –û—Å—Ç–∞–Ω–æ–≤–∫–∞</code><br><code>cancelAnimationFrame(animationId);</code></p><h4>–ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–µ–π:</h4><p><code>class Animation {</code><br><code>&nbsp;&nbsp;constructor(callback) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.callback = callback;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.animationId = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.isRunning = false;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;start() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.isRunning) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.isRunning = true;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.animate();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;animate = (timestamp) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!this.isRunning) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.callback(timestamp);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.animationId = requestAnimationFrame(this.animate);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;stop() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.isRunning = false;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.animationId) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelAnimationFrame(this.animationId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.animationId = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>React –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:</h4><p><code>useEffect(() => {</code><br><code>&nbsp;&nbsp;let animationId;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;function animate() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –õ–æ–≥–∏–∫–∞ –∞–Ω–∏–º–∞—Ü–∏–∏</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;animationId = requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;animationId = requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// Cleanup –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</code><br><code>&nbsp;&nbsp;return () => cancelAnimationFrame(animationId);</code><br><code>}, []);</code></p><h4>–£—Å–ª–æ–≤–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞:</h4><p><code>function animate(timestamp) {</code><br><code>&nbsp;&nbsp;// –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–æ —É—Å–ª–æ–≤–∏—é</code><br><code>&nbsp;&nbsp;if (position >= targetPosition) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return; // –ü—Ä–æ—Å—Ç–æ –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–∏–π –∫–∞–¥—Ä</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;position += velocity;</code><br><code>&nbsp;&nbsp;requestAnimationFrame(animate);</code><br><code>}</code></p><p><em>–ö—Ä–∏—Ç–∏—á–Ω–æ:</em> –í—Å–µ–≥–¥–∞ –æ—Ç–º–µ–Ω—è–π—Ç–µ –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.</p>",
    difficulty: 'middle',
    tags: ['requestAnimationFrame', 'cancelAnimationFrame', 'lifecycle', 'cleanup']
  },

  {
    id: 125,
    question: "–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å easing —Ñ—É–Ω–∫—Ü–∏–∏ —Å requestAnimationFrame?",
    answer: "<p>Easing —Ñ—É–Ω–∫—Ü–∏–∏ –¥–µ–ª–∞—é—Ç –∞–Ω–∏–º–∞—Ü–∏–∏ –±–æ–ª–µ–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏, –∏–∑–º–µ–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–∏:</p><h4>–ë–∞–∑–æ–≤—ã–µ easing —Ñ—É–Ω–∫—Ü–∏–∏:</h4><p><code>const Easing = {</code><br><code>&nbsp;&nbsp;linear: t => t,</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;easeInQuad: t => t * t,</code><br><code>&nbsp;&nbsp;easeOutQuad: t => t * (2 - t),</code><br><code>&nbsp;&nbsp;easeInOutQuad: t => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;easeInCubic: t => t * t * t,</code><br><code>&nbsp;&nbsp;easeOutCubic: t => (--t) * t * t + 1,</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;easeInOutCubic: t => t < 0.5 </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;? 4 * t * t * t </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;: (t - 1) * (2 * t - 2) * (2 * t - 2) + 1</code><br><code>};</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π:</h4><p><code>function animateWithEasing(from, to, duration, easingFn) {</code><br><code>&nbsp;&nbsp;let startTime = null;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;function animate(timestamp) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!startTime) startTime = timestamp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const elapsed = timestamp - startTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const progress = Math.min(elapsed / duration, 1);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–∏–º–µ–Ω—è–µ–º easing</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const easedProgress = easingFn(progress);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ò–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const current = from + (to - from) * easedProgress;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;element.style.left = current + 'px';</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (progress < 1) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;requestAnimationFrame(animate);</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>animateWithEasing(0, 300, 1000, Easing.easeOutCubic);</code></p><h4>–ö–ª–∞—Å—Å Animator —Å easing:</h4><p><code>class Animator {</code><br><code>&nbsp;&nbsp;animate(element, property, from, to, duration, easing = 'linear') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const easingFn = Easing[easing];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;let startTime = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;function step(timestamp) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!startTime) startTime = timestamp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const progress = Math.min((timestamp - startTime) / duration, 1);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const value = from + (to - from) * easingFn(progress);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element.style[property] = value + 'px';</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (progress < 1) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requestAnimationFrame(step);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;requestAnimationFrame(step);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>const animator = new Animator();</code><br><code>animator.animate(element, 'left', 0, 300, 1000, 'easeOutCubic');</code></p><p><em>–°–æ–≤–µ—Ç:</em> –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–æ—Ç–æ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —Ç–∏–ø–∞ GSAP –∏–ª–∏ anime.js.</p>",
    difficulty: 'middle',
    tags: ['requestAnimationFrame', 'easing', '–∞–Ω–∏–º–∞—Ü–∏–∏', '–∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏—è']
  },

  {
    id: 126,
    question: "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç requestAnimationFrame —Å –±—Ä–∞—É–∑–µ—Ä–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–æ–±—ã—Ç–∏–π?",
    answer: "<p>requestAnimationFrame —Ç–µ—Å–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å –±—Ä–∞—É–∑–µ—Ä–Ω—ã–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º –∏ event loop:</p><h4>–ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ event loop:</h4><ol><li>–í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏</li><li>–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è microtasks (Promises, queueMicrotask)</li><li>–í—ã–ø–æ–ª–Ω—è—é—Ç—Å—è rAF callbacks</li><li>–ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç layout/paint</li><li>–û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è macrotasks (setTimeout, setInterval)</li></ol><h4>–ü—Ä–∏–º–µ—Ä –ø–æ—Ä—è–¥–∫–∞:</h4><p><code>console.log('1: sync');</code></p><p><code>setTimeout(() => console.log('2: setTimeout'), 0);</code></p><p><code>Promise.resolve().then(() => console.log('3: Promise'));</code></p><p><code>requestAnimationFrame(() => console.log('4: rAF'));</code></p><p><code>console.log('5: sync');</code></p><p><code>// –í—ã–≤–æ–¥:</code><br><code>// 1: sync</code><br><code>// 5: sync</code><br><code>// 3: Promise (microtask)</code><br><code>// 4: rAF (–ø–µ—Ä–µ–¥ paint)</code><br><code>// 2: setTimeout (macrotask)</code></p><h4>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</h4><ul><li><strong>Timing:</strong> rAF –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ paint, –Ω–æ –ø–æ—Å–ª–µ microtasks</li><li><strong>Batch:</strong> –í—Å–µ rAF callbacks –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥</li><li><strong>Sync:</strong> –í–Ω—É—Ç—Ä–∏ rAF —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ layout –¥–∞–Ω–Ω—ã—Ö –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç forced reflow</li></ul><h4>–û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å:</h4><p><code>// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - read –≤ rAF, write –ø–æ—Å–ª–µ</code><br><code>requestAnimationFrame(() => {</code><br><code>&nbsp;&nbsp;const height = element.offsetHeight; // read</code><br><code>&nbsp;&nbsp;element.style.width = height + 'px'; // write - –±—É–¥–µ—Ç –≤ paint</code><br><code>});</code></p><p><code>// ‚ùå –ü–ª–æ—Ö–æ - read –ø–æ—Å–ª–µ write = forced reflow</code><br><code>element.style.width = '100px';</code><br><code>const height = element.offsetHeight; // forced reflow!</code></p><p><em>–ö–ª—é—á–µ–≤–æ–π –º–æ–º–µ–Ω—Ç:</em> rAF –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –ø–µ—Ä–µ–¥ paint, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ DOM –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–∏–Ω repaint.</p>",
    difficulty: 'senior',
    tags: ['requestAnimationFrame', 'event loop', '—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å']
  },

  {
    id: 127,
    question: "–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å throttle –∞–Ω–∏–º–∞—Ü–∏–π –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ FPS?",
    answer: "<p>–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —á–∞—Å—Ç–æ—Ç—É –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ FPS (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤):</p><h4>Throttle –¥–æ 30 FPS:</h4><p><code>function createThrottledAnimation(fps) {</code><br><code>&nbsp;&nbsp;const interval = 1000 / fps;</code><br><code>&nbsp;&nbsp;let lastTime = 0;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return function animate(timestamp, callback) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const elapsed = timestamp - lastTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (elapsed > interval) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastTime = timestamp - (elapsed % interval);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback(timestamp);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;requestAnimationFrame((t) => animate(t, callback));</code><br><code>&nbsp;&nbsp;};</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è 30 FPS</code><br><code>const animate30fps = createThrottledAnimation(30);</code><br><code></code><br><code>requestAnimationFrame((timestamp) => {</code><br><code>&nbsp;&nbsp;animate30fps(timestamp, (t) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –º–∞–∫—Å–∏–º—É–º 30 —Ä–∞–∑ –≤ —Å–µ–∫—É–Ω–¥—É</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;updateAnimation();</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><h4>–ö–ª–∞—Å—Å —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º FPS:</h4><p><code>class ThrottledAnimator {</code><br><code>&nbsp;&nbsp;constructor(fps = 60) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.fps = fps;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.interval = 1000 / fps;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.lastTime = 0;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.animationId = null;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;start(callback) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const animate = (timestamp) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const elapsed = timestamp - this.lastTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (elapsed > this.interval) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.lastTime = timestamp - (elapsed % this.interval);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback(timestamp, elapsed);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.animationId = requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.animationId = requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;stop() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.animationId) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelAnimationFrame(this.animationId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>const animator = new ThrottledAnimator(30);</code><br><code>animator.start((timestamp, deltaTime) => {</code><br><code>&nbsp;&nbsp;updateGame(deltaTime);</code><br><code>});</code></p><h4>–ó–∞—á–µ–º –Ω—É–∂–Ω–æ:</h4><ul><li>–≠–∫–æ–Ω–æ–º–∏—è CPU –Ω–∞ —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö</li><li>–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –º–æ–Ω–∏—Ç–æ—Ä–∞–º–∏</li><li>–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –≤ —Ñ–æ–Ω–æ–≤—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö</li><li>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –Ω–∏–∑–∫–æ–º FPS</li></ul><p><em>–í–∞–∂–Ω–æ:</em> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å—Ç–∞—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏ (elapsed % interval) –¥–ª—è —Ç–æ—á–Ω–æ—Å—Ç–∏ —Å–ª–µ–¥—É—é—â–µ–≥–æ –∫–∞–¥—Ä–∞.</p>",
    difficulty: 'senior',
    tags: ['requestAnimationFrame', 'throttle', 'FPS', '–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è']
  },

  {
    id: 128,
    question: "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª —Å requestAnimationFrame?",
    answer: "<p>–ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª (game loop) ‚Äî –æ—Å–Ω–æ–≤–∞ –ª—é–±–æ–π –∏–≥—Ä—ã –∏–ª–∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏:</p><h4>–ë–∞–∑–æ–≤—ã–π –∏–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª:</h4><p><code>class GameLoop {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.isRunning = false;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.lastTime = 0;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;start() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.isRunning = true;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.lastTime = performance.now();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.loop();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;loop = (timestamp) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!this.isRunning) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const deltaTime = timestamp - this.lastTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.lastTime = timestamp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// Update –ª–æ–≥–∏–∫–∞ –∏–≥—Ä—ã</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.update(deltaTime);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// Render –≥—Ä–∞—Ñ–∏–∫–∞</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.render();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;requestAnimationFrame(this.loop);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;update(deltaTime) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –§–∏–∑–∏–∫–∞, –∫–æ–ª–ª–∏–∑–∏–∏, AI</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;player.x += player.velocityX * (deltaTime / 1000);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;render() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç—Ä–∏—Å–æ–≤–∫–∞ –Ω–∞ canvas</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;ctx.clearRect(0, 0, canvas.width, canvas.height);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;ctx.fillRect(player.x, player.y, 50, 50);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;stop() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.isRunning = false;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–° —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤—Ä–µ–º–µ–Ω–Ω—ã–º —à–∞–≥–æ–º (fixed timestep):</h4><p><code>class FixedStepGameLoop {</code><br><code>&nbsp;&nbsp;constructor(fps = 60) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.fixedDelta = 1000 / fps;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.accumulator = 0;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.lastTime = 0;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;loop = (timestamp) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const frameTime = timestamp - this.lastTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.lastTime = timestamp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.accumulator += frameTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∏–∑–∏–∫–∏</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;while (this.accumulator >= this.fixedDelta) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.update(this.fixedDelta);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.accumulator -= this.fixedDelta;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –†–µ–Ω–¥–µ—Ä —Å –∏–Ω—Ç–µ—Ä–ø–æ–ª—è—Ü–∏–µ–π</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const alpha = this.accumulator / this.fixedDelta;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.render(alpha);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;requestAnimationFrame(this.loop);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏—è:</h4><ul><li>2D/3D –∏–≥—Ä—ã</li><li>–§–∏–∑–∏—á–µ—Å–∫–∏–µ —Å–∏–º—É–ª—è—Ü–∏–∏</li><li>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏</li><li>–ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã</li></ul><p><em>Best practice:</em> –†–∞–∑–¥–µ–ª—è–π—Ç–µ update (–ª–æ–≥–∏–∫—É) –∏ render (–æ—Ç—Ä–∏—Å–æ–≤–∫—É) –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –∫–æ–¥–∞ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏.</p>",
    difficulty: 'senior',
    tags: ['requestAnimationFrame', 'game loop', '–∏–≥—Ä—ã', 'deltaTime']
  },

  {
    id: 129,
    question: "–ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å layout thrashing –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ requestAnimationFrame?",
    answer: "<p>Layout thrashing (–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ—Å—á–µ—Ç layout) —É–±–∏–≤–∞–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–π:</p><h4>–ü—Ä–æ–±–ª–µ–º–∞ ‚Äî —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ read/write:</h4><p><code>// ‚ùå –ü–õ–û–•–û - layout thrashing</code><br><code>requestAnimationFrame(() => {</code><br><code>&nbsp;&nbsp;elements.forEach(el => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const height = el.offsetHeight; // READ - –≤—ã–∑—ã–≤–∞–µ—Ç layout</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;el.style.width = height + 'px'; // WRITE</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ù–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –±—Ä–∞—É–∑–µ—Ä –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç layout!</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><h4>–†–µ—à–µ–Ω–∏–µ ‚Äî –±–∞—Ç—á–∏–Ω–≥ read/write:</h4><p><code>// ‚úÖ –•–û–†–û–®–û - —Å–Ω–∞—á–∞–ª–∞ –≤—Å–µ READ, –ø–æ—Ç–æ–º –≤—Å–µ WRITE</code><br><code>requestAnimationFrame(() => {</code><br><code>&nbsp;&nbsp;// READ phase</code><br><code>&nbsp;&nbsp;const heights = elements.map(el => el.offsetHeight);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// WRITE phase</code><br><code>&nbsp;&nbsp;elements.forEach((el, i) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;el.style.width = heights[i] + 'px';</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><h4>–ö–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è read/write:</h4><p><code>class LayoutManager {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.reads = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.writes = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.scheduled = false;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;measure(callback) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.reads.push(callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.schedule();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;mutate(callback) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.writes.push(callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.schedule();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;schedule() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.scheduled) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.scheduled = true;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;requestAnimationFrame(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –í—ã–ø–æ–ª–Ω—è–µ–º –≤—Å–µ reads</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reads.forEach(fn => fn());</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reads = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –ó–∞—Ç–µ–º –≤—Å–µ writes</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.writes.forEach(fn => fn());</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.writes = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.scheduled = false;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>const layout = new LayoutManager();</code><br><code></code><br><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>layout.measure(() => {</code><br><code>&nbsp;&nbsp;height = element.offsetHeight;</code><br><code>});</code><br><code></code><br><code>layout.mutate(() => {</code><br><code>&nbsp;&nbsp;element.style.width = height + 'px';</code><br><code>});</code></p><h4>–û–ø–µ—Ä–∞—Ü–∏–∏, –≤—ã–∑—ã–≤–∞—é—â–∏–µ forced reflow:</h4><ul><li>offsetHeight, offsetWidth, offsetTop</li><li>clientHeight, clientWidth</li><li>scrollHeight, scrollWidth</li><li>getComputedStyle()</li><li>getBoundingClientRect()</li></ul><p><em>–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:</em> –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ —á—Ç–µ–Ω–∏—è DOM —Å–≤–æ–π—Å—Ç–≤ –≤–º–µ—Å—Ç–µ, –∑–∞—Ç–µ–º –≤—Å–µ –∑–∞–ø–∏—Å–∏ ‚Äî –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ requestAnimationFrame.</p>",
    difficulty: 'senior',
    tags: ['requestAnimationFrame', 'layout thrashing', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', 'reflow']
  },

  {
    id: 130,
    question: "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç requestAnimationFrame –≤ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö?",
    answer: "<p>–ü–æ–≤–µ–¥–µ–Ω–∏–µ requestAnimationFrame –≤ —Ñ–æ–Ω–æ–≤—ã—Ö –≤–∫–ª–∞–¥–∫–∞—Ö –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</p><h4>–ë–∞–∑–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:</h4><ul><li><strong>–ê–∫—Ç–∏–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞:</strong> ~60 FPS (16.67ms –º–µ–∂–¥—É –∫–∞–¥—Ä–∞–º–∏)</li><li><strong>–§–æ–Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞:</strong> –ü—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–ª–∏ throttled –¥–æ 1-2 FPS</li><li><strong>–ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫–Ω–æ:</strong> –¢–∞–∫–∂–µ throttled</li></ul><h4>–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ–∫—É—Å–∞ –≤–∫–ª–∞–¥–∫–∏:</h4><p><code>class AdaptiveAnimator {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.isVisible = !document.hidden;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.setupVisibilityListener();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;setupVisibilityListener() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;document.addEventListener('visibilitychange', () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.isVisible = !document.hidden;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (this.isVisible) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.onVisible();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.onHidden();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;onVisible() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é/–∏–≥—Ä—É</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.lastTime = performance.now();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.resume();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;onHidden() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ü—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å/—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.pause();</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É:</h4><p><code>// ‚ùå –ü–†–û–ë–õ–ï–ú–ê - –±–æ–ª—å—à–æ–π deltaTime</code><br><code>let lastTime = performance.now();</code><br><code></code><br><code>function animate(timestamp) {</code><br><code>&nbsp;&nbsp;const deltaTime = timestamp - lastTime;</code><br><code>&nbsp;&nbsp;// –ï—Å–ª–∏ –≤–∫–ª–∞–¥–∫–∞ –±—ã–ª–∞ –≤ —Ñ–æ–Ω–µ 10 —Å–µ–∫—É–Ω–¥,</code><br><code>&nbsp;&nbsp;// deltaTime = 10000ms - –ø–µ—Ä—Å–æ–Ω–∞–∂ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è!</code><br><code>&nbsp;&nbsp;player.x += velocity * deltaTime;</code><br><code>}</code></p><p><code>// ‚úÖ –†–ï–®–ï–ù–ò–ï - –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ deltaTime</code><br><code>function animate(timestamp) {</code><br><code>&nbsp;&nbsp;const deltaTime = Math.min(timestamp - lastTime, 100);</code><br><code>&nbsp;&nbsp;lastTime = timestamp;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;player.x += velocity * deltaTime;</code><br><code>}</code></p><h4>–°–±—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ:</h4><p><code>let lastTime = performance.now();</code><br><code>let wasHidden = false;</code></p><p><code>function animate(timestamp) {</code><br><code>&nbsp;&nbsp;// –°–±—Ä–æ—Å –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É</code><br><code>&nbsp;&nbsp;if (wasHidden && !document.hidden) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;lastTime = timestamp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;wasHidden = false;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const deltaTime = timestamp - lastTime;</code><br><code>&nbsp;&nbsp;lastTime = timestamp;</code><br><code>&nbsp;&nbsp;wasHidden = document.hidden;</code><br><code>}</code></p><p><em>Best practice:</em> –í—Å–µ–≥–¥–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π deltaTime –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ visibilitychange –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ —Ñ–æ–Ω–µ.</p>",
    difficulty: 'middle',
    tags: ['requestAnimationFrame', 'visibility', '—Ñ–æ–Ω–æ–≤—ã–µ –≤–∫–ª–∞–¥–∫–∏', 'deltaTime']
  },

  {
    id: 131,
    question: "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∞–Ω–∏–º–∞—Ü–∏–π —Å –æ—á–µ—Ä–µ–¥—å—é –∏ —Ü–µ–ø–æ—á–∫–∞–º–∏?",
    answer: "<p>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ –∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –ø–æ–ª–µ–∑–Ω–∞ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö UI:</p><h4>–ë–∞–∑–æ–≤–∞—è –æ—á–µ—Ä–µ–¥—å –∞–Ω–∏–º–∞—Ü–∏–π:</h4><p><code>class AnimationQueue {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.queue = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.isRunning = false;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;add(animation) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return new Promise((resolve) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.queue.push({ animation, resolve });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!this.isRunning) this.run();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;async run() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.isRunning = true;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;while (this.queue.length > 0) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const { animation, resolve } = this.queue.shift();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;await animation();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.isRunning = false;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å —Ü–µ–ø–æ—á–∫–∞–º–∏:</h4><p><code>const queue = new AnimationQueue();</code></p><p><code>queue</code><br><code>&nbsp;&nbsp;.add(() => animate(el1, { x: 100 }, 1000))</code><br><code>&nbsp;&nbsp;.then(() => queue.add(() => animate(el2, { y: 100 }, 500)))</code><br><code>&nbsp;&nbsp;.then(() => queue.add(() => animate(el3, { scale: 2 }, 800)));</code></p><h4>–°–∏—Å—Ç–µ–º–∞ —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∞–Ω–∏–º–∞—Ü–∏—è–º–∏:</h4><p><code>class AnimationSystem {</code><br><code>&nbsp;&nbsp;sequence(...animations) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return animations.reduce(</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(promise, anim) => promise.then(() => anim()),</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Promise.resolve()</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;parallel(...animations) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return Promise.all(animations.map(anim => anim()));</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;animate(element, props, duration) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return new Promise((resolve) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let startTime = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const startProps = {};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object.keys(props).forEach(key => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startProps[key] = parseFloat(element.style[key]) || 0;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function step(timestamp) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!startTime) startTime = timestamp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const progress = Math.min((timestamp - startTime) / duration, 1);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object.keys(props).forEach(key => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const start = startProps[key];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const end = props[key];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;element.style[key] = (start + (end - start) * progress) + 'px';</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (progress < 1) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requestAnimationFrame(step);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requestAnimationFrame(step);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>const anim = new AnimationSystem();</code></p><p><code>// –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ</code><br><code>anim.sequence(</code><br><code>&nbsp;&nbsp;() => anim.animate(el1, { left: 100 }, 500),</code><br><code>&nbsp;&nbsp;() => anim.animate(el2, { top: 100 }, 500)</code><br><code>);</code></p><p><code>// –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ</code><br><code>anim.parallel(</code><br><code>&nbsp;&nbsp;() => anim.animate(el1, { left: 100 }, 500),</code><br><code>&nbsp;&nbsp;() => anim.animate(el2, { top: 100 }, 500)</code><br><code>);</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –°–ª–æ–∂–Ω—ã–µ UI –∞–Ω–∏–º–∞—Ü–∏–∏, –æ–Ω–±–æ—Ä–¥–∏–Ω–≥, –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏.</p>",
    difficulty: 'senior',
    tags: ['requestAnimationFrame', '–æ—á–µ—Ä–µ–¥—å', '—Ü–µ–ø–æ—á–∫–∏', 'Promise']
  },

  {
    id: 132,
    question: "–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤?",
    answer: "<p>–ü—Ä–∏ –∞–Ω–∏–º–∞—Ü–∏–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫—Ä–∏—Ç–∏—á–Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è 60 FPS:</p><h4>1. Batch DOM –æ–ø–µ—Ä–∞—Ü–∏–∏:</h4><p><code>// ‚ùå –ü–õ–û–•–û - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ reflow</code><br><code>requestAnimationFrame(() => {</code><br><code>&nbsp;&nbsp;particles.forEach(p => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;p.element.style.transform = \`translate(\${p.x}px, \${p.y}px)\`;</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><p><code>// ‚úÖ –õ–£–ß–®–ï - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CSS transform –≤–º–µ—Å—Ç–æ left/top</code><br><code>// ‚úÖ –ï–©–ï –õ–£–ß–®–ï - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Canvas –≤–º–µ—Å—Ç–æ DOM</code></p><h4>2. Canvas –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤:</h4><p><code>class ParticleSystem {</code><br><code>&nbsp;&nbsp;constructor(canvas) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.ctx = canvas.getContext('2d');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.particles = [];</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;update(deltaTime) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.particles.forEach(p => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.x += p.vx * deltaTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p.y += p.vy * deltaTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;render() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.ctx.clearRect(0, 0, canvas.width, canvas.height);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û–¥–∏–Ω draw call –¥–ª—è –≤—Å–µ—Ö —á–∞—Å—Ç–∏—Ü –æ–¥–Ω–æ–≥–æ —Ç–∏–ø–∞</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.particles.forEach(p => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.ctx.fillStyle = p.color;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.ctx.fillRect(p.x, p.y, 5, 5);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>3. –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è (—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å —Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º–æ–µ):</h4><p><code>requestAnimationFrame(() => {</code><br><code>&nbsp;&nbsp;// –†–µ–Ω–¥–µ—Ä–∏–º —Ç–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ viewport</code><br><code>&nbsp;&nbsp;const viewport = getViewport();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;elements.forEach(el => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (isInViewport(el, viewport)) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderElement(el);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><h4>4. Object pooling:</h4><p><code>class ObjectPool {</code><br><code>&nbsp;&nbsp;constructor(createFn, resetFn) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.pool = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.createFn = createFn;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.resetFn = resetFn;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;get() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return this.pool.pop() || this.createFn();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;release(obj) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.resetFn(obj);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.pool.push(obj);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>5. requestIdleCallback –¥–ª—è –Ω–µ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á:</h4><p><code>requestAnimationFrame(() => {</code><br><code>&nbsp;&nbsp;// –ö—Ä–∏—Ç–∏—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥</code><br><code>&nbsp;&nbsp;renderVisibleElements();</code><br><code>});</code></p><p><code>requestIdleCallback(() => {</code><br><code>&nbsp;&nbsp;// –ù–µ–∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è</code><br><code>&nbsp;&nbsp;updateStats();</code><br><code>});</code></p><p><em>–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:</em> –ï—Å–ª–∏ >100 —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∞–Ω–∏–º–∏—Ä—É—é—Ç—Å—è - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Canvas. –ï—Å–ª–∏ <100 - DOM —Å CSS transforms.</p>",
    difficulty: 'senior',
    tags: ['requestAnimationFrame', '–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', 'Canvas']
  },

  {
    id: 133,
    question: "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª —Å requestAnimationFrame?",
    answer: "<p>–ü–ª–∞–≤–Ω—ã–π —Å–∫—Ä–æ–ª–ª —É–ª—É—á—à–∞–µ—Ç UX –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏:</p><h4>–ë–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:</h4><p><code>function smoothScrollTo(targetY, duration = 1000) {</code><br><code>&nbsp;&nbsp;const startY = window.pageYOffset;</code><br><code>&nbsp;&nbsp;const distance = targetY - startY;</code><br><code>&nbsp;&nbsp;let startTime = null;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;function animation(currentTime) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!startTime) startTime = currentTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const elapsed = currentTime - startTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const progress = Math.min(elapsed / duration, 1);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// Easing —Ñ—É–Ω–∫—Ü–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const easeProgress = easeInOutCubic(progress);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;window.scrollTo(0, startY + distance * easeProgress);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (progress < 1) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requestAnimationFrame(animation);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;requestAnimationFrame(animation);</code><br><code>}</code></p><p><code>function easeInOutCubic(t) {</code><br><code>&nbsp;&nbsp;return t < 0.5 </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;? 4 * t * t * t </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;: 1 - Math.pow(-2 * t + 2, 3) / 2;</code><br><code>}</code></p><h4>–°–∫—Ä–æ–ª–ª –∫ —ç–ª–µ–º–µ–Ω—Ç—É:</h4><p><code>function scrollToElement(element, offset = 0, duration = 1000) {</code><br><code>&nbsp;&nbsp;const targetY = element.getBoundingClientRect().top + </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.pageYOffset + </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;offset;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;smoothScrollTo(targetY, duration);</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>const section = document.querySelector('#about');</code><br><code>scrollToElement(section, -100); // -100px –æ—Ç —ç–ª–µ–º–µ–Ω—Ç–∞</code></p><h4>–° –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –æ—Ç–º–µ–Ω—ã:</h4><p><code>class SmoothScroller {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.animationId = null;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;scrollTo(targetY, duration = 1000) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–º–µ–Ω—è–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–∫—Ä–æ–ª–ª</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.cancel();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const startY = window.pageYOffset;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const distance = targetY - startY;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;let startTime = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const animation = (currentTime) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!startTime) startTime = currentTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const progress = Math.min((currentTime - startTime) / duration, 1);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const eased = this.easeInOutQuad(progress);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window.scrollTo(0, startY + distance * eased);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (progress < 1) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.animationId = requestAnimationFrame(animation);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.animationId = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.animationId = requestAnimationFrame(animation);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;cancel() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.animationId) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cancelAnimationFrame(this.animationId);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.animationId = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;easeInOutQuad(t) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><code>const scroller = new SmoothScroller();</code><br><code>scroller.scrollTo(1000, 800);</code></p><p><em>–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:</em> –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç <code>element.scrollIntoView({ behavior: 'smooth' })</code>, –Ω–æ —Å –º–µ–Ω—å—à–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º.</p>",
    difficulty: 'middle',
    tags: ['requestAnimationFrame', '—Å–∫—Ä–æ–ª–ª', 'smooth scroll', 'UX']
  },

  {
    id: 134,
    question: "–ö–∞–∫–∏–µ –µ—Å—Ç—å best practices –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å requestAnimationFrame?",
    answer: "<p>–°–æ–±–ª—é–¥–µ–Ω–∏–µ best practices –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –ø–ª–∞–≤–Ω—ã—Ö –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π:</p><h4>‚úÖ Best Practices:</h4><p><strong>1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ timestamp –¥–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤:</strong></p><p><code>// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ</code><br><code>function animate(timestamp) {</code><br><code>&nbsp;&nbsp;const deltaTime = timestamp - lastTime;</code><br><code>&nbsp;&nbsp;position += velocity * (deltaTime / 1000);</code><br><code>}</code></p><p><strong>2. –í—Å–µ–≥–¥–∞ –æ—Ç–º–µ–Ω—è–π—Ç–µ –ø—Ä–∏ cleanup:</strong></p><p><code>const animationId = requestAnimationFrame(animate);</code><br><code>// –ü—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:</code><br><code>cancelAnimationFrame(animationId);</code></p><p><strong>3. –†–∞–∑–¥–µ–ª—è–π—Ç–µ update –∏ render:</strong></p><p><code>function gameLoop(timestamp) {</code><br><code>&nbsp;&nbsp;update(deltaTime); // –õ–æ–≥–∏–∫–∞</code><br><code>&nbsp;&nbsp;render();          // –û—Ç—Ä–∏—Å–æ–≤–∫–∞</code><br><code>}</code></p><p><strong>4. –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ DOM —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏:</strong></p><p><code>requestAnimationFrame(() => {</code><br><code>&nbsp;&nbsp;// READ phase</code><br><code>&nbsp;&nbsp;const heights = elements.map(el => el.offsetHeight);</code><br><code>&nbsp;&nbsp;// WRITE phase</code><br><code>&nbsp;&nbsp;elements.forEach((el, i) => el.style.width = heights[i] + 'px');</code><br><code>});</code></p><p><strong>5. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π deltaTime:</strong></p><p><code>const deltaTime = Math.min(timestamp - lastTime, 100);</code></p><p><strong>6. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ CSS transforms –≤–º–µ—Å—Ç–æ left/top:</strong></p><p><code>// ‚úÖ GPU —É—Å–∫–æ—Ä–µ–Ω–∏–µ</code><br><code>element.style.transform = \`translate(\${x}px, \${y}px)\`;</code></p><h4>‚ùå –ß–µ–≥–æ –∏–∑–±–µ–≥–∞—Ç—å:</h4><ul><li>–ù–µ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–π—Ç–µ DOM –≤–Ω—É—Ç—Ä–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π scroll/resize</li><li>–ù–µ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –æ–±—ä–µ–∫—Ç—ã –≤ hot path –∞–Ω–∏–º–∞—Ü–∏–∏</li><li>–ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ cancelAnimationFrame –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏</li><li>–ù–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ setInterval –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–π</li><li>–ù–µ —á–∏—Ç–∞–π—Ç–µ layout —Å–≤–æ–π—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –∑–∞–ø–∏—Å–∏ –≤ DOM</li></ul><h4>‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:</h4><ol><li>–ó–∞–±—ã—Ç—ã–π cancelAnimationFrame ‚Üí —É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏</li><li>Layout thrashing ‚Üí 10-100x –º–µ–¥–ª–µ–Ω–Ω–µ–µ</li><li>–ê–Ω–∏–º–∞—Ü–∏—è left/top –≤–º–µ—Å—Ç–æ transform ‚Üí –Ω–µ—Ç GPU</li><li>–°–æ–∑–¥–∞–Ω–∏–µ closure –≤ –∫–∞–∂–¥–æ–º –∫–∞–¥—Ä–µ ‚Üí garbage collection</li><li>–ù–µ —É—á–∏—Ç—ã–≤–∞—Ç—å deltaTime ‚Üí —Ä–∞–∑–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞ —Ä–∞–∑–Ω–æ–º FPS</li></ol><p><em>–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:</em> –ò–∑–º–µ—Ä—è–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ Chrome DevTools Performance –∏ –¥–µ—Ä–∂–∏—Ç–µ –∫–∞–¥—Ä—ã –ø–æ–¥ 16ms –¥–ª—è 60 FPS.</p>",
    difficulty: 'senior',
    tags: ['requestAnimationFrame', 'best practices', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', '–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è']
  },

  {
    id: 135,
    question: "–ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å requestAnimationFrame —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏?",
    answer: "<p>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è requestAnimationFrame —Å React/Vue —Ç—Ä–µ–±—É–µ—Ç –ø–æ–Ω–∏–º–∞–Ω–∏—è lifecycle –∏ cleanup:</p><h4>React —Ö—É–∫ useAnimationFrame:</h4><p><code>function useAnimationFrame(callback) {</code><br><code>&nbsp;&nbsp;const requestRef = useRef();</code><br><code>&nbsp;&nbsp;const previousTimeRef = useRef();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const animate = (time) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (previousTimeRef.current !== undefined) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const deltaTime = time - previousTimeRef.current;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;callback(deltaTime);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;previousTimeRef.current = time;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requestRef.current = requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;requestRef.current = requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => cancelAnimationFrame(requestRef.current);</code><br><code>&nbsp;&nbsp;}, [callback]);</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>function AnimatedComponent() {</code><br><code>&nbsp;&nbsp;const [count, setCount] = useState(0);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;useAnimationFrame((deltaTime) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;setCount(prev => prev + deltaTime * 0.01);</code><br><code>&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return &lt;div&gt;{count.toFixed(2)}&lt;/div&gt;;</code><br><code>}</code></p><h4>Vue 3 Composable:</h4><p><code>import { onMounted, onUnmounted, ref } from 'vue';</code></p><p><code>export function useAnimationFrame(callback) {</code><br><code>&nbsp;&nbsp;let animationId = null;</code><br><code>&nbsp;&nbsp;let previousTime = 0;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;const animate = (time) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const deltaTime = time - previousTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;previousTime = time;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;callback(deltaTime);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;animationId = requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;onMounted(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;animationId = requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;onUnmounted(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (animationId) cancelAnimationFrame(animationId);</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>&lt;script setup&gt;</code><br><code>const rotation = ref(0);</code><br><code></code><br><code>useAnimationFrame((deltaTime) => {</code><br><code>&nbsp;&nbsp;rotation.value += deltaTime * 0.1;</code><br><code>});</code><br><code>&lt;/script&gt;</code></p><h4>–ö–æ–Ω—Ç—Ä–æ–ª—å –∑–∞–ø—É—Å–∫–∞/–æ—Å—Ç–∞–Ω–æ–≤–∫–∏:</h4><p><code>function useControllableAnimation() {</code><br><code>&nbsp;&nbsp;const [isRunning, setIsRunning] = useState(false);</code><br><code>&nbsp;&nbsp;const requestRef = useRef();</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!isRunning) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const animate = (time) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// –∞–Ω–∏–º–∞—Ü–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;requestRef.current = requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;requestRef.current = requestAnimationFrame(animate);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => cancelAnimationFrame(requestRef.current);</code><br><code>&nbsp;&nbsp;}, [isRunning]);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return { isRunning, setIsRunning };</code><br><code>}</code></p><p><em>–ö—Ä–∏—Ç–∏—á–Ω–æ:</em> –í—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ cleanup —Ñ—É–Ω–∫—Ü–∏—é —Å cancelAnimationFrame –∏–∑ useEffect/onUnmounted.</p>",
    difficulty: 'middle',
    tags: ['requestAnimationFrame', 'React', 'Vue', 'hooks', 'composables']
  },
  {
    id: 136,
    question: "–ß—Ç–æ —Ç–∞–∫–æ–µ PerformanceObserver –∏ –¥–ª—è —á–µ–≥–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?",
    answer: "<p><strong>PerformanceObserver</strong> ‚Äî —ç—Ç–æ Web API –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:</p><h4>–û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ:</h4><p>–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (timing events) –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ polling Performance API, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—è callback-based –ø–æ–¥—Ö–æ–¥ –∫ –ø–æ–ª—É—á–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.</p><h4>–°–æ–∑–¥–∞–Ω–∏–µ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const observer = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;const entries = list.getEntries();</code><br><code>&nbsp;&nbsp;entries.forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Name:', entry.name);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Duration:', entry.duration);</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code><br><code></code><br><code>observer.observe({ entryTypes: ['measure', 'navigation'] });</code></p><h4>–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:</h4><ul><li><strong>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</strong> –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –≤ production</li><li><strong>Real User Monitoring (RUM):</strong> –°–±–æ—Ä —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</li><li><strong>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞:</strong> –û—Ç–ø—Ä–∞–≤–∫–∞ –º–µ—Ç—Ä–∏–∫ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –∏–∑–º–µ—Ä–µ–Ω–∏—è</li><li><strong>Debugging:</strong> –í—ã—è–≤–ª–µ–Ω–∏–µ —É–∑–∫–∏—Ö –º–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</li><li><strong>Core Web Vitals:</strong> –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ LCP, FID, CLS</li></ul><p><em>–ö–ª—é—á–µ–≤–æ–µ –æ—Ç–ª–∏—á–∏–µ:</em> –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å polling performance.getEntries().</p>",
    difficulty: 'junior',
    tags: ['PerformanceObserver', '–æ—Å–Ω–æ–≤—ã', 'Web API', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å']
  },

  {
    id: 137,
    question: "–ö–∞–∫–∏–µ —Ç–∏–ø—ã performance entries –º–æ–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å PerformanceObserver?",
    answer: "<p>PerformanceObserver –º–æ–∂–µ—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ç–∏–ø–æ–≤ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</p><h4>–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã entryTypes:</h4><p><strong>navigation:</strong> –ú–µ—Ç—Ä–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –≤–∫–ª—é—á–∞—è DNS, TCP, –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞</p><p><strong>resource:</strong> –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ (images, scripts, CSS, fetch)</p><p><strong>mark:</strong> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–µ—Ç–∫–∏ —á–µ—Ä–µ–∑ performance.mark()</p><p><strong>measure:</strong> –ò–∑–º–µ—Ä–µ–Ω–∏—è –º–µ–∂–¥—É –º–µ—Ç–∫–∞–º–∏ —á–µ—Ä–µ–∑ performance.measure()</p><p><strong>paint:</strong> –ú–µ—Ç—Ä–∏–∫–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (first-paint, first-contentful-paint)</p><p><strong>largest-contentful-paint:</strong> LCP - Core Web Vital</p><p><strong>first-input:</strong> FID - –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è</p><p><strong>layout-shift:</strong> CLS - —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</p><p><strong>longtask:</strong> –ó–∞–¥–∞—á–∏ –¥–æ–ª—å—à–µ 50ms, –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ main thread</p><p><strong>element:</strong> –í—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</p><h4>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏:</h4><p><code>if (PerformanceObserver.supportedEntryTypes) {</code><br><code>&nbsp;&nbsp;console.log(PerformanceObserver.supportedEntryTypes);</code><br><code>&nbsp;&nbsp;// ['navigation', 'resource', 'mark', 'measure', ...]</code><br><code>}</code></p><h4>–ü—Ä–∏–º–µ—Ä –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–∏–ø–∞–º–∏:</h4><p><code>observer.observe({ </code><br><code>&nbsp;&nbsp;entryTypes: ['navigation', 'resource', 'paint'] </code><br><code>});</code></p><p><em>–í–∞–∂–Ω–æ:</em> –†–∞–∑–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ä–∞–∑–Ω—ã–µ —Ç–∏–ø—ã - –≤—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ supportedEntryTypes.</p>",
    difficulty: 'middle',
    tags: ['PerformanceObserver', 'entryTypes', '–º–µ—Ç—Ä–∏–∫–∏', '—Ç–∏–ø—ã']
  },

  {
    id: 138,
    question: "–ö–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å Core Web Vitals —Å –ø–æ–º–æ—â—å—é PerformanceObserver?",
    answer: "<p>Core Web Vitals ‚Äî –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç Google:</p><h4>1. Largest Contentful Paint (LCP):</h4><p><code>const lcpObserver = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;const entries = list.getEntries();</code><br><code>&nbsp;&nbsp;const lastEntry = entries[entries.length - 1];</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;console.log('LCP:', lastEntry.renderTime || lastEntry.loadTime);</code><br><code>&nbsp;&nbsp;// –•–æ—Ä–æ—à–æ: < 2.5s, –ü–ª–æ—Ö–æ: > 4s</code><br><code>});</code><br><code></code><br><code>lcpObserver.observe({ entryTypes: ['largest-contentful-paint'] });</code></p><h4>2. First Input Delay (FID):</h4><p><code>const fidObserver = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const fid = entry.processingStart - entry.startTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('FID:', fid);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –•–æ—Ä–æ—à–æ: < 100ms, –ü–ª–æ—Ö–æ: > 300ms</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code><br><code></code><br><code>fidObserver.observe({ entryTypes: ['first-input'] });</code></p><h4>3. Cumulative Layout Shift (CLS):</h4><p><code>let clsValue = 0;</code><br><code>const clsObserver = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!entry.hadRecentInput) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;clsValue += entry.value;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;console.log('CLS:', clsValue);</code><br><code>&nbsp;&nbsp;// –•–æ—Ä–æ—à–æ: < 0.1, –ü–ª–æ—Ö–æ: > 0.25</code><br><code>});</code><br><code></code><br><code>clsObserver.observe({ entryTypes: ['layout-shift'] });</code></p><h4>–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Å–±–æ—Ä—â–∏–∫ Web Vitals:</h4><p><code>function reportWebVitals() {</code><br><code>&nbsp;&nbsp;// LCP</code><br><code>&nbsp;&nbsp;new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const entry = list.getEntries()[list.getEntries().length - 1];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;sendToAnalytics('LCP', entry.renderTime || entry.loadTime);</code><br><code>&nbsp;&nbsp;}).observe({ entryTypes: ['largest-contentful-paint'] });</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// FID</code><br><code>&nbsp;&nbsp;new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const fid = list.getEntries()[0].processingStart - </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list.getEntries()[0].startTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;sendToAnalytics('FID', fid);</code><br><code>&nbsp;&nbsp;}).observe({ entryTypes: ['first-input'] });</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// CLS</code><br><code>&nbsp;&nbsp;let clsValue = 0;</code><br><code>&nbsp;&nbsp;new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!entry.hadRecentInput) clsValue += entry.value;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;sendToAnalytics('CLS', clsValue);</code><br><code>&nbsp;&nbsp;}).observe({ entryTypes: ['layout-shift'] });</code><br><code>}</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ production –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ SEO –∏ UX —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º Google.</p>",
    difficulty: 'middle',
    tags: ['PerformanceObserver', 'Core Web Vitals', 'LCP', 'FID', 'CLS']
  },

  {
    id: 139,
    question: "–ö–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ (Long Tasks) —Å PerformanceObserver?",
    answer: "<p>Long Tasks ‚Äî –∑–∞–¥–∞—á–∏, –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ main thread –¥–æ–ª—å—à–µ 50ms, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:</p><h4>–ë–∞–∑–æ–≤–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ:</h4><p><code>const longTaskObserver = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Long task detected!');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Duration:', entry.duration); // > 50ms</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Start:', entry.startTime);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Attribution:', entry.attribution);</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code><br><code></code><br><code>longTaskObserver.observe({ entryTypes: ['longtask'] });</code></p><h4>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ Long Task entry:</h4><ul><li><strong>duration:</strong> –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–¥–∞—á–∏ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö</li><li><strong>startTime:</strong> –ö–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ –Ω–∞—á–∞–ª–∞—Å—å</li><li><strong>attribution:</strong> –ö–∞–∫–æ–π —Å–∫—Ä–∏–ø—Ç/–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—ã–∑–≤–∞–ª –∑–∞–¥–∞—á—É</li><li><strong>name:</strong> –¢–∏–ø –∑–∞–¥–∞—á–∏ (self, same-origin, cross-origin)</li></ul><h4>–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∞—Ç—Ä–∏–±—É—Ü–∏–µ–π:</h4><p><code>const observer = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const attribution = entry.attribution[0];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log({</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration: entry.duration,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;containerType: attribution?.containerType,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;containerName: attribution?.containerName,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;containerSrc: attribution?.containerSrc</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –∞–Ω–∞–ª–∏—Ç–∏–∫—É</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (entry.duration > 100) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reportPerformanceIssue({</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type: 'long-task',</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration: entry.duration,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source: attribution?.containerSrc</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code><br><code></code><br><code>observer.observe({ entryTypes: ['longtask'] });</code></p><h4>–ü–æ–¥—Å—á–µ—Ç Total Blocking Time (TBT):</h4><p><code>let totalBlockingTime = 0;</code><br><code></code><br><code>new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// TBT = –≤—Ä–µ–º—è –∑–∞–¥–∞—á–∏ –º–∏–Ω—É—Å 50ms –ø–æ—Ä–æ–≥</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const blockingTime = entry.duration - 50;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (blockingTime > 0) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;totalBlockingTime += blockingTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;console.log('Total Blocking Time:', totalBlockingTime);</code><br><code>}).observe({ entryTypes: ['longtask'] });</code></p><p><em>–ü–æ—á–µ–º—É –≤–∞–∂–Ω–æ:</em> Long Tasks –Ω–∞–ø—Ä—è–º—É—é –≤–ª–∏—è—é—Ç –Ω–∞ FID –∏ –æ–±—â—É—é –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —É—Ö—É–¥—à–∞—è UX.</p>",
    difficulty: 'middle',
    tags: ['PerformanceObserver', 'Long Tasks', 'TBT', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å']
  },

  {
    id: 140,
    question: "–ö–∞–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É —Ä–µ—Å—É—Ä—Å–æ–≤ (images, scripts, CSS) —Å PerformanceObserver?",
    answer: "<p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã—è–≤–∏—Ç—å —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</p><h4>–ë–∞–∑–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤—Å–µ—Ö —Ä–µ—Å—É—Ä—Å–æ–≤:</h4><p><code>const resourceObserver = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Resource:', entry.name);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Type:', entry.initiatorType); // img, script, css, fetch</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Duration:', entry.duration);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Size:', entry.transferSize);</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code><br><code></code><br><code>resourceObserver.observe({ entryTypes: ['resource'] });</code></p><h4>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ç–∏–ø—É —Ä–µ—Å—É—Ä—Å–∞:</h4><p><code>new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –¢–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (entry.initiatorType === 'img') {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('Image loaded:', entry.name);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('Time:', entry.duration);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('Size:', (entry.transferSize / 1024).toFixed(2) + 'KB');</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –ú–µ–¥–ª–µ–Ω–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (entry.duration > 1000) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.warn('Slow resource:', entry.name, entry.duration);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code><br><code>}).observe({ entryTypes: ['resource'] });</code></p><h4>–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ timing'–æ–≤:</h4><p><code>new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const timing = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dns: entry.domainLookupEnd - entry.domainLookupStart,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tcp: entry.connectEnd - entry.connectStart,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;request: entry.responseStart - entry.requestStart,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response: entry.responseEnd - entry.responseStart,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;total: entry.duration</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log(entry.name, timing);</code><br><code>&nbsp;&nbsp;});</code><br><code>}).observe({ entryTypes: ['resource'] });</code></p><h4>–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è:</h4><p><code>new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (entry.transferSize === 0) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('From cache:', entry.name);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} else if (entry.transferSize < entry.decodedBodySize) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('Compressed:', entry.name);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} else {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('Not compressed:', entry.name);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;});</code><br><code>}).observe({ entryTypes: ['resource'] });</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è bundle size, –≤—ã—è–≤–ª–µ–Ω–∏–µ –º–µ–¥–ª–µ–Ω–Ω—ã—Ö CDN, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.</p>",
    difficulty: 'middle',
    tags: ['PerformanceObserver', 'resources', '–∑–∞–≥—Ä—É–∑–∫–∞', '–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è']
  },

  {
    id: 141,
    question: "–ö–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –º–µ—Ç–∫–∏ –∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è —Å performance.mark() –∏ performance.measure()?",
    answer: "<p>User Timing API –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</p><h4>–°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–æ–∫ (marks):</h4><p><code>// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ—Ç–∫–∏ –Ω–∞—á–∞–ª–∞</code><br><code>performance.mark('fetch-start');</code><br><code></code><br><code>// –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</code><br><code>await fetchData();</code><br><code></code><br><code>// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–µ—Ç–∫–∏ –∫–æ–Ω—Ü–∞</code><br><code>performance.mark('fetch-end');</code></p><h4>–°–æ–∑–¥–∞–Ω–∏–µ –∏–∑–º–µ—Ä–µ–Ω–∏–π (measures):</h4><p><code>// –ò–∑–º–µ—Ä–µ–Ω–∏–µ –º–µ–∂–¥—É –º–µ—Ç–∫–∞–º–∏</code><br><code>performance.measure('fetch-duration', 'fetch-start', 'fetch-end');</code></p><h4>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ PerformanceObserver:</h4><p><code>const observer = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log(\`\${entry.name}: \${entry.duration}ms\`);</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code><br><code></code><br><code>observer.observe({ entryTypes: ['mark', 'measure'] });</code></p><h4>–†–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä ‚Äî –∏–∑–º–µ—Ä–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:</h4><p><code>class PerformanceTracker {</code><br><code>&nbsp;&nbsp;startOperation(name) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;performance.mark(\`\${name}-start\`);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;endOperation(name) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;performance.mark(\`\${name}-end\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;performance.measure(</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name, </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\`\${name}-start\`, </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\`\${name}-end\`</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code><br><code></code><br><code>const tracker = new PerformanceTracker();</code><br><code></code><br><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>tracker.startOperation('component-render');</code><br><code>renderComponent();</code><br><code>tracker.endOperation('component-render');</code></p><h4>–ò–∑–º–µ—Ä–µ–Ω–∏–µ –æ—Ç navigationStart:</h4><p><code>performance.mark('app-ready');</code><br><code>performance.measure('time-to-ready', 'navigationStart', 'app-ready');</code></p><h4>–û—á–∏—Å—Ç–∫–∞ –º–µ—Ç–æ–∫:</h4><p><code>// –£–¥–∞–ª–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –º–µ—Ç–∫—É</code><br><code>performance.clearMarks('fetch-start');</code><br><code></code><br><code>// –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –º–µ—Ç–∫–∏</code><br><code>performance.clearMarks();</code><br><code></code><br><code>// –£–¥–∞–ª–∏—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏—è</code><br><code>performance.clearMeasures('fetch-duration');</code></p><p><em>Best practice:</em> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –º–µ—Ç–æ–∫ –∏ –≥—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏.</p>",
    difficulty: 'middle',
    tags: ['PerformanceObserver', 'mark', 'measure', 'User Timing']
  },

  {
    id: 142,
    question: "–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É observe({ entryTypes }) –∏ observe({ type })?",
    answer: "<p>PerformanceObserver.observe() –∏–º–µ–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã —Å —Ä–∞–∑–Ω—ã–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏:</p><h4>1. entryTypes ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ:</h4><p><code>observer.observe({ </code><br><code>&nbsp;&nbsp;entryTypes: ['navigation', 'resource', 'measure'] </code><br><code>});</code></p><p><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</strong></p><ul><li>–ú–æ–∂–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç—å –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ç–∏–ø–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ</li><li>–ü–æ–ª—É—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ entries –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ observe()</li><li>–ù–µ –∏–º–µ–µ—Ç buffered –æ–ø—Ü–∏–∏</li><li>–°—Ç–∞—Ä—ã–π API (–Ω–æ –≤—Å—ë –µ—â—ë –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)</li></ul><h4>2. type ‚Äî –æ–¥–∏–Ω–æ—á–Ω–æ–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ —Å buffered:</h4><p><code>observer.observe({ </code><br><code>&nbsp;&nbsp;type: 'navigation',</code><br><code>&nbsp;&nbsp;buffered: true </code><br><code>});</code></p><p><strong>–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:</strong></p><ul><li>–ù–∞–±–ª—é–¥–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ –æ–¥–Ω–∏–º —Ç–∏–ø–æ–º</li><li>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç buffered: true –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–æ—à–ª—ã—Ö entries</li><li>–ë–æ–ª–µ–µ –≥–∏–±–∫–∏–π –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤</li><li>–ù–æ–≤—ã–π —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π API</li></ul><h4>buffered: true ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ—à–ª—ã—Ö –¥–∞–Ω–Ω—ã—Ö:</h4><p><code>// –ü–æ–ª—É—á–µ–Ω–∏–µ —É–∂–µ –ø—Ä–æ–∏–∑–æ—à–µ–¥—à–∏—Ö navigation events</code><br><code>const observer = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Navigation timing:', entry);</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code><br><code></code><br><code>observer.observe({ </code><br><code>&nbsp;&nbsp;type: 'navigation', </code><br><code>&nbsp;&nbsp;buffered: true // –ü–æ–ª—É—á–∏—Ç entries –¥–æ –≤—ã–∑–æ–≤–∞ observe()</code><br><code>});</code></p><h4>–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —á—Ç–æ:</h4><p><strong>entryTypes:</strong> –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–∏–ø–æ–≤ –∏ –≤–∞–∂–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è</p><p><strong>type + buffered:</strong> –ö–æ–≥–¥–∞ –Ω—É–∂–Ω—ã –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, navigation –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏)</p><h4>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä:</h4><p><code>// –î–ª—è RUM –º–µ—Ç—Ä–∏–∫ - buffered –≤–∞–∂–µ–Ω</code><br><code>new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;const lcp = list.getEntries()[list.getEntries().length - 1];</code><br><code>&nbsp;&nbsp;sendToAnalytics('LCP', lcp.renderTime);</code><br><code>}).observe({ type: 'largest-contentful-paint', buffered: true });</code><br><code></code><br><code>// –î–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –Ω–æ–≤—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤ - buffered –Ω–µ –Ω—É–∂–µ–Ω</code><br><code>new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;logResourceLoad(entry);</code><br><code>&nbsp;&nbsp;});</code><br><code>}).observe({ entryTypes: ['resource'] });</code></p><p><em>–í–∞–∂–Ω–æ:</em> buffered –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–µ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ entries, –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.</p>",
    difficulty: 'middle',
    tags: ['PerformanceObserver', 'observe', 'buffered', 'API']
  },

  {
    id: 143,
    question: "–ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–∞—Ç—å PerformanceObserver –∏ –∏–∑–±–µ–≥–∞—Ç—å —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏?",
    answer: "<p>–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ PerformanceObserver –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</p><h4>–ú–µ—Ç–æ–¥—ã –æ—Ç–∫–ª—é—á–µ–Ω–∏—è:</h4><p><strong>disconnect():</strong> –ü–æ–ª–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è</p><p><code>observer.disconnect();</code></p><p><strong>–ù–µ—Ç unobserve():</strong> –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –¥—Ä—É–≥–∏—Ö Observer API, –Ω–µ–ª—å–∑—è –æ—Ç–∫–ª—é—á–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–∏–ø</p><h4>–í vanilla JavaScript:</h4><p><code>class PerformanceMonitor {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new PerformanceObserver(this.handleEntries);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe({ entryTypes: ['measure'] });</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;handleEntries = (list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û–±—Ä–∞–±–æ—Ç–∫–∞</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;destroy() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer.disconnect();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = null;</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–í React:</h4><p><code>useEffect(() => {</code><br><code>&nbsp;&nbsp;const observer = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û–±—Ä–∞–±–æ—Ç–∫–∞ entries</code><br><code>&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;observer.observe({ entryTypes: ['measure'] });</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;// Cleanup –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</code><br><code>&nbsp;&nbsp;return () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;observer.disconnect();</code><br><code>&nbsp;&nbsp;};</code><br><code>}, []);</code></p><h4>–í Vue:</h4><p><code>onMounted(() => {</code><br><code>&nbsp;&nbsp;observer.value = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û–±—Ä–∞–±–æ—Ç–∫–∞</code><br><code>&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;observer.value.observe({ entryTypes: ['resource'] });</code><br><code>});</code><br><code></code><br><code>onUnmounted(() => {</code><br><code>&nbsp;&nbsp;observer.value?.disconnect();</code><br><code>&nbsp;&nbsp;observer.value = null;</code><br><code>});</code></p><h4>–£—Å–ª–æ–≤–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ:</h4><p><code>class ConditionalMonitor {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new PerformanceObserver(this.handleEntries);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.isMonitoring = false;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;start() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!this.isMonitoring) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe({ entryTypes: ['longtask'] });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.isMonitoring = true;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;stop() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.isMonitoring) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.observer.disconnect();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.isMonitoring = false;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><p><em>–ö—Ä–∏—Ç–∏—á–Ω–æ:</em> –í—Å–µ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–π—Ç–µ disconnect() –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏–ª–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.</p>",
    difficulty: 'middle',
    tags: ['PerformanceObserver', 'cleanup', '—É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏', 'lifecycle']
  },

  {
    id: 144,
    question: "–ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Real User Monitoring (RUM) —Å–∏—Å—Ç–µ–º—É —Å PerformanceObserver?",
    answer: "<p>RUM —Å–æ–±–∏—Ä–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ production:</p><h4>–ë–∞–∑–æ–≤–∞—è RUM —Å–∏—Å—Ç–µ–º–∞:</h4><p><code>class RealUserMonitoring {</code><br><code>&nbsp;&nbsp;constructor(endpoint) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.endpoint = endpoint;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.metrics = {};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.setupObservers();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;setupObservers() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// Navigation timing</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const nav = list.getEntries()[0];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.metrics.loadTime = nav.loadEventEnd - nav.fetchStart;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.metrics.domContentLoaded = nav.domContentLoadedEventEnd;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sendMetrics();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}).observe({ type: 'navigation', buffered: true });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// LCP</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const entries = list.getEntries();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const lcp = entries[entries.length - 1];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.metrics.lcp = lcp.renderTime || lcp.loadTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sendMetrics();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}).observe({ type: 'largest-contentful-paint', buffered: true });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// FID</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const entry = list.getEntries()[0];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.metrics.fid = entry.processingStart - entry.startTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sendMetrics();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}).observe({ type: 'first-input', buffered: true });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// CLS</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;let clsValue = 0;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!entry.hadRecentInput) clsValue += entry.value;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.metrics.cls = clsValue;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}).observe({ type: 'layout-shift', buffered: true });</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;sendMetrics() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (navigator.sendBeacon) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;navigator.sendBeacon(</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.endpoint, </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JSON.stringify(this.metrics)</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const rum = new RealUserMonitoring('/api/metrics');</code></p><h4>–° –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</h4><p><code>sendMetrics() {</code><br><code>&nbsp;&nbsp;const data = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;...this.metrics,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;userAgent: navigator.userAgent,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;connection: navigator.connection?.effectiveType,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;url: window.location.href,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;timestamp: Date.now()</code><br><code>&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;navigator.sendBeacon(this.endpoint, JSON.stringify(data));</code><br><code>}</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –†–µ–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º –≤ production –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ UX.</p>",
    difficulty: 'senior',
    tags: ['PerformanceObserver', 'RUM', '–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥', 'production']
  },

  {
    id: 145,
    question: "–ö–∞–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å Element Timing API?",
    answer: "<p>Element Timing API –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ—Ä—è—Ç—å –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤–∞–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤:</p><h4>–ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ HTML:</h4><p><code>&lt;img src=\"hero.jpg\" elementtiming=\"hero-image\"&gt;</code><br><code>&lt;h1 elementtiming=\"main-heading\"&gt;Title&lt;/h1&gt;</code><br><code>&lt;div elementtiming=\"important-content\"&gt;Content&lt;/div&gt;</code></p><h4>–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ PerformanceObserver:</h4><p><code>const elementObserver = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Element:', entry.identifier);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Render time:', entry.renderTime);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Load time:', entry.loadTime);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.log('Size:', entry.naturalWidth, 'x', entry.naturalHeight);</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code><br><code></code><br><code>elementObserver.observe({ type: 'element', buffered: true });</code></p><h4>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤:</h4><p><code>class CriticalElementMonitor {</code><br><code>&nbsp;&nbsp;constructor(criticalElements) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.criticalElements = criticalElements;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.timings = {};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.setupObserver();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;setupObserver() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const observer = new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (this.criticalElements.includes(entry.identifier)) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.timings[entry.identifier] = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;renderTime: entry.renderTime,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loadTime: entry.loadTime,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url: entry.url</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.checkAllLoaded();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;observer.observe({ type: 'element', buffered: true });</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;checkAllLoaded() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (Object.keys(this.timings).length === this.criticalElements.length) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log('All critical elements loaded:', this.timings);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reportMetrics();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const monitor = new CriticalElementMonitor([</code><br><code>&nbsp;&nbsp;'hero-image', </code><br><code>&nbsp;&nbsp;'main-heading', </code><br><code>&nbsp;&nbsp;'cta-button'</code><br><code>]);</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —É–ª—É—á—à–µ–Ω–∏–µ perceived performance.</p>",
    difficulty: 'middle',
    tags: ['PerformanceObserver', 'Element Timing', '—ç–ª–µ–º–µ–Ω—Ç—ã', '—Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥']
  },

  {
    id: 146,
    question: "–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ PerformanceObserver?",
    answer: "<p>PerformanceObserver —Å–∞–º –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏:</p><h4>1. –§–∏–ª—å—Ç—Ä—É–π—Ç–µ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ —Ç–∏–ø—ã:</h4><p><code>// ‚ùå –ü–õ–û–•–û - –ø–æ–ª—É—á–∞–µ–º –≤—Å—ë</code><br><code>observer.observe({ entryTypes: ['resource', 'measure', 'mark', 'navigation'] });</code><br><code></code><br><code>// ‚úÖ –•–û–†–û–®–û - —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ–µ</code><br><code>observer.observe({ type: 'resource' });</code></p><h4>2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ debounce –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö:</h4><p><code>class OptimizedMonitor {</code><br><code>&nbsp;&nbsp;constructor() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.buffer = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.sendTimeout = null;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;addEntry(entry) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.buffer.push(entry);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–∞—Ç—á–µ–º</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;clearTimeout(this.sendTimeout);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.sendTimeout = setTimeout(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.sendBatch();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}, 5000);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;sendBatch() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.buffer.length === 0) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;navigator.sendBeacon('/metrics', JSON.stringify(this.buffer));</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.buffer = [];</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>3. –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:</h4><p><code>new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ –ø–æ–ª—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const minimal = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name: entry.name,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;duration: entry.duration,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type: entry.entryType</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;sendMetric(minimal);</code><br><code>&nbsp;&nbsp;});</code><br><code>}).observe({ entryTypes: ['measure'] });</code></p><h4>4. –°—ç–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è production:</h4><p><code>class SampledMonitor {</code><br><code>&nbsp;&nbsp;constructor(sampleRate = 0.1) { // 10% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.shouldMonitor = Math.random() < sampleRate;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (this.shouldMonitor) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.setupObservers();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>5. –£—Å–ª–æ–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:</h4><p><code>// –¢–æ–ª—å–∫–æ –≤ dev –∏–ª–∏ –¥–ª—è debug</code><br><code>if (process.env.NODE_ENV === 'development' || DEBUG_MODE) {</code><br><code>&nbsp;&nbsp;new PerformanceObserver(...).observe(...);</code><br><code>}</code></p><h4>6. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ requestIdleCallback:</h4><p><code>new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;requestIdleCallback(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —Å–≤–æ–±–æ–¥–Ω–æ–µ –≤—Ä–µ–º—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;processEntries(list.getEntries());</code><br><code>&nbsp;&nbsp;});</code><br><code>}).observe({ entryTypes: ['resource'] });</code></p><p><em>Best practice:</em> –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—ç–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–∞—Ç—á–∏–Ω–≥ –¥–ª—è –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –≤–ª–∏—è–Ω–∏—è –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.</p>",
    difficulty: 'senior',
    tags: ['PerformanceObserver', '–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è', '–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', 'batching']
  },

  {
    id: 147,
    question: "–ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω—É—é —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å PerformanceObserver?",
    answer: "<p>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ PerformanceObserver –∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö entryTypes –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É –±—Ä–∞—É–∑–µ—Ä–∞–º–∏:</p><h4>–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑–æ–≤–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏:</h4><p><code>if ('PerformanceObserver' in window) {</code><br><code>&nbsp;&nbsp;// PerformanceObserver –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</code><br><code>} else {</code><br><code>&nbsp;&nbsp;// Fallback –Ω–∞ performance.getEntries()</code><br><code>}</code></p><h4>–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤:</h4><p><code>function isEntryTypeSupported(type) {</code><br><code>&nbsp;&nbsp;if (!PerformanceObserver.supportedEntryTypes) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return false;</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;return PerformanceObserver.supportedEntryTypes.includes(type);</code><br><code>}</code><br><code></code><br><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>if (isEntryTypeSupported('largest-contentful-paint')) {</code><br><code>&nbsp;&nbsp;// –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ LCP</code><br><code>}</code></p><h4>–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ–±–µ—Ä—Ç–∫–∞ —Å fallback:</h4><p><code>class SafePerformanceObserver {</code><br><code>&nbsp;&nbsp;constructor(callback, types) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.callback = callback;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.types = types;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.observer = null;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if ('PerformanceObserver' in window) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.useObserver();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} else {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.useFallback();</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;useObserver() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const supportedTypes = this.types.filter(type => </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PerformanceObserver.supportedEntryTypes?.includes(type)</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (supportedTypes.length > 0) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.observer = new PerformanceObserver(this.callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.observer.observe({ entryTypes: supportedTypes });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;useFallback() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// Polling –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;setInterval(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const entries = performance.getEntriesByType(this.types[0]);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (entries.length > 0) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.callback({ getEntries: () => entries });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}, 1000);</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ü–æ–ª–∏—Ñ–∏–ª –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–æ–≤:</h4><p><code>if (!('PerformanceObserver' in window)) {</code><br><code>&nbsp;&nbsp;// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–ª–∏—Ñ–∏–ª</code><br><code>&nbsp;&nbsp;// https://github.com/GoogleChrome/web-vitals</code><br><code>&nbsp;&nbsp;import('web-vitals/polyfill');</code><br><code>}</code></p><h4>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤:</h4><ul><li><strong>Chrome/Edge:</strong> –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤</li><li><strong>Firefox:</strong> –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ç–∏–ø–æ–≤, –∫—Ä–æ–º–µ element</li><li><strong>Safari:</strong> –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã</li><li><strong>IE:</strong> –ù–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è</li></ul><p><em>Best practice:</em> –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ supportedEntryTypes –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏ –∏–º–µ–π—Ç–µ fallback –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.</p>",
    difficulty: 'middle',
    tags: ['PerformanceObserver', '—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å', '–ø–æ–ª–∏—Ñ–∏–ª', '–∫—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω–æ—Å—Ç—å']
  },

  {
    id: 148,
    question: "–ö–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å PerformanceObserver —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏?",
    answer: "<p>–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è PerformanceObserver —Å React/Vue —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ lifecycle:</p><h4>React —Ö—É–∫ usePerformanceObserver:</h4><p><code>function usePerformanceObserver(entryTypes, callback) {</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!('PerformanceObserver' in window)) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const observer = new PerformanceObserver(callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;try {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;observer.observe({ entryTypes });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;} catch (e) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.error('PerformanceObserver error:', e);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => observer.disconnect();</code><br><code>&nbsp;&nbsp;}, [entryTypes, callback]);</code><br><code>}</code></p><p><code>// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</code><br><code>function App() {</code><br><code>&nbsp;&nbsp;usePerformanceObserver(['measure'], (list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(entry.name, entry.duration);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><h4>Vue 3 Composable:</h4><p><code>export function usePerformanceObserver(entryTypes, callback) {</code><br><code>&nbsp;&nbsp;let observer = null;</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;onMounted(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;if (!('PerformanceObserver' in window)) return;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;observer = new PerformanceObserver(callback);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;observer.observe({ entryTypes });</code><br><code>&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;onUnmounted(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;observer?.disconnect();</code><br><code>&nbsp;&nbsp;});</code><br><code>}</code></p><h4>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:</h4><p><code>function ComponentPerformanceTracker({ componentName, children }) {</code><br><code>&nbsp;&nbsp;useEffect(() => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;performance.mark(\`\${componentName}-mount-start\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;return () => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;performance.mark(\`\${componentName}-unmount\`);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;performance.measure(</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\`\${componentName}-lifetime\`,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\`\${componentName}-mount-start\`,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\`\${componentName}-unmount\`</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;}, [componentName]);</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;usePerformanceObserver(['measure'], (list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (entry.name.includes(componentName)) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(\`\${componentName} performance:\`, entry.duration);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return children;</code><br><code>}</code></p><p><em>–ö—Ä–∏—Ç–∏—á–Ω–æ:</em> –í—Å–µ–≥–¥–∞ –æ—Ç–∫–ª—é—á–∞–π—Ç–µ observer –≤ cleanup —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.</p>",
    difficulty: 'middle',
    tags: ['PerformanceObserver', 'React', 'Vue', '–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è', 'hooks']
  },

  {
    id: 149,
    question: "–ö–∞–∫–∏–µ –µ—Å—Ç—å best practices –∏ –ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å PerformanceObserver?",
    answer: "<p>–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å PerformanceObserver –≤–∞–∂–Ω–æ —Å–ª–µ–¥–æ–≤–∞—Ç—å –ª—É—á—à–∏–º –ø—Ä–∞–∫—Ç–∏–∫–∞–º:</p><h4>‚úÖ Best Practices:</h4><p><strong>1. –í—Å–µ–≥–¥–∞ –æ—Ç–∫–ª—é—á–∞–π—Ç–µ observer:</strong></p><p><code>useEffect(() => {</code><br><code>&nbsp;&nbsp;const observer = new PerformanceObserver(callback);</code><br><code>&nbsp;&nbsp;observer.observe({ entryTypes: ['measure'] });</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;return () => observer.disconnect(); // –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!</code><br><code>}, []);</code></p><p><strong>2. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ç–∏–ø–æ–≤:</strong></p><p><code>if (PerformanceObserver.supportedEntryTypes?.includes('longtask')) {</code><br><code>&nbsp;&nbsp;// –ò—Å–ø–æ–ª—å–∑—É–µ–º longtask</code><br><code>}</code></p><p><strong>3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ buffered –¥–ª—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö:</strong></p><p><code>observer.observe({ type: 'navigation', buffered: true });</code></p><p><strong>4. –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ callback:</strong></p><p><code>// ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞</code><br><code>new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;const entries = list.getEntries();</code><br><code>&nbsp;&nbsp;requestIdleCallback(() => processEntries(entries));</code><br><code>}).observe({ entryTypes: ['resource'] });</code></p><p><strong>5. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—ç–º–ø–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production:</strong></p><p><code>if (Math.random() < 0.1) { // 10% –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</code><br><code>&nbsp;&nbsp;setupPerformanceMonitoring();</code><br><code>}</code></p><h4>‚ùå –ü–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏:</h4><p><strong>1. –ó–∞–±—ã—Ç—ã–π disconnect():</strong></p><p><code>// ‚ùå –£—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏</code><br><code>const observer = new PerformanceObserver(callback);</code><br><code>observer.observe({ entryTypes: ['measure'] });</code><br><code>// –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è disconnect()!</code></p><p><strong>2. –¢—è–∂–µ–ª—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ callback:</strong></p><p><code>// ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç main thread</code><br><code>new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –¢—è–∂–µ–ª—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;complexProcessing(entry);</code><br><code>&nbsp;&nbsp;});</code><br><code>});</code></p><p><strong>3. –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏:</strong></p><p><code>// ‚ùå –ú–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å –≤ —Å—Ç–∞—Ä—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö</code><br><code>new PerformanceObserver(...).observe({ type: 'element' });</code></p><p><strong>4. –û—Ç–ø—Ä–∞–≤–∫–∞ –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö:</strong></p><p><code>// ‚ùå –ü–ª–æ—Ö–æ –¥–ª—è performance</code><br><code>list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;fetch('/metrics', { method: 'POST', body: JSON.stringify(entry) });</code><br><code>});</code></p><h4>‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏:</h4><ol><li>–ù–µ –≤—ã–∑—ã–≤–∞—Ç—å disconnect() –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</li><li>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ entryTypes –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏</li><li>–û—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∫–∞–∂–¥—É—é –º–µ—Ç—Ä–∏–∫—É –æ—Ç–¥–µ–ª—å–Ω—ã–º –∑–∞–ø—Ä–æ—Å–æ–º</li><li>–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å buffered –¥–ª—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∏–∫</li><li>–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –≤ 100% —Å–ª—É—á–∞–µ–≤ –≤ production</li></ol><p><em>–ó–æ–ª–æ—Ç–æ–µ –ø—Ä–∞–≤–∏–ª–æ:</em> PerformanceObserver –¥–ª—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫, –∞ –Ω–µ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏. –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.</p>",
    difficulty: 'senior',
    tags: ['PerformanceObserver', 'best practices', '–ø–æ–¥–≤–æ–¥–Ω—ã–µ –∫–∞–º–Ω–∏', '–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è']
  },

  {
    id: 150,
    question: "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ performance budget –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞?",
    answer: "<p>Performance Budget ‚Äî —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ª–∏–º–∏—Ç—ã –Ω–∞ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:</p><h4>–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–æ–≤:</h4><p><code>const PERFORMANCE_BUDGETS = {</code><br><code>&nbsp;&nbsp;lcp: 2500,        // 2.5s –¥–ª—è LCP</code><br><code>&nbsp;&nbsp;fid: 100,         // 100ms –¥–ª—è FID</code><br><code>&nbsp;&nbsp;cls: 0.1,         // 0.1 –¥–ª—è CLS</code><br><code>&nbsp;&nbsp;longTask: 50,     // –ù–µ –±–æ–ª—å—à–µ 50ms</code><br><code>&nbsp;&nbsp;jsSize: 200 * 1024, // 200KB JS</code><br><code>&nbsp;&nbsp;imageSize: 500 * 1024 // 500KB images</code><br><code>};</code></p><h4>–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –±—é–¥–∂–µ—Ç–∞:</h4><p><code>class PerformanceBudgetMonitor {</code><br><code>&nbsp;&nbsp;constructor(budgets) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.budgets = budgets;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.violations = [];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.setupMonitoring();</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;setupMonitoring() {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// LCP –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const lcp = list.getEntries()[list.getEntries().length - 1];</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const value = lcp.renderTime || lcp.loadTime;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (value > this.budgets.lcp) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reportViolation('LCP', value, this.budgets.lcp);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}).observe({ type: 'largest-contentful-paint', buffered: true });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// Long Tasks –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (entry.duration > this.budgets.longTask) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reportViolation('Long Task', entry.duration, this.budgets.longTask);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}).observe({ entryTypes: ['longtask'] });</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –†–∞–∑–º–µ—Ä —Ä–µ—Å—É—Ä—Å–æ–≤</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;new PerformanceObserver((list) => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;list.getEntries().forEach(entry => {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (entry.initiatorType === 'script' && </code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;entry.transferSize > this.budgets.jsSize) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.reportViolation('JS Bundle', entry.transferSize, this.budgets.jsSize);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;}).observe({ entryTypes: ['resource'] });</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;reportViolation(metric, actual, budget) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;const violation = {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;metric,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;actual,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;budget,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exceededBy: actual - budget,</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timestamp: Date.now()</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;};</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.violations.push(violation);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;console.warn('‚ö†Ô∏è Performance Budget Violation:', violation);</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;this.notifyTeam(violation);</code><br><code>&nbsp;&nbsp;}</code><br><code>&nbsp;&nbsp;</code><br><code>&nbsp;&nbsp;notifyTeam(violation) {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;// –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Slack/Email/etc</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;fetch('/api/alert', {</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method: 'POST',</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;body: JSON.stringify(violation)</code><br><code>&nbsp;&nbsp;&nbsp;&nbsp;});</code><br><code>&nbsp;&nbsp;}</code><br><code>}</code></p><h4>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:</h4><p><code>const monitor = new PerformanceBudgetMonitor(PERFORMANCE_BUDGETS);</code></p><p><em>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ:</em> –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ production, –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞.</p>",
    difficulty: 'senior',
    tags: ['PerformanceObserver', 'Performance Budget', '–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥', '–∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è']
  }
];
